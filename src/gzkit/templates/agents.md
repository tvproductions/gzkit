# AGENTS.md

Universal agent contract for {project_name}.

## Project Identity

**Name**: {project_name}

**Purpose**: {project_purpose}

**Tech Stack**: {tech_stack}

## Behavior Rules

### Always

1. Read AGENTS.md before starting work
2. Follow the gate covenant for all changes
3. Record governance events in the ledger
4. Preserve human intent across context boundaries

### Never

1. Bypass Gate 5 (human attestation)
2. Modify the ledger directly (use gzkit commands)
3. Create governance artifacts without proper linkage
4. Make changes that violate declared invariants

## Pattern Discovery

When working on this codebase:

1. **Check governance state**: `gz state` shows artifact relationships
2. **Check gate status**: `gz status` shows what's pending
3. **Follow the brief**: Active briefs define allowed/denied paths
4. **Link to parent**: All artifacts must trace to a PRD or constitution

### Workflow

```
PRD → Constitution → Brief → ADR → Implementation → Attestation
```

## Gate Covenant

| Gate | Purpose | Verification |
|------|---------|--------------|
| Gate 1 | ADR recorded | `gz validate --documents` |
| Gate 2 | Tests pass | `gz test` |
| Gate 3 | Docs updated | `gz lint` |
| Gate 4 | BDD verified | Manual check |
| Gate 5 | Human attests | `gz attest` |

### Lane Rules

- **lite**: Gates 1, 2, 5 required
- **heavy**: All gates required

## Execution Rules

### Command Execution

Always use `uv run` for Python commands:

```bash
uv run -m gzkit --help     # CLI entry point
uv run -m unittest discover tests  # Run tests
```

### Quality Commands

```bash
gz lint       # Ruff + PyMarkdown
gz format     # Auto-format code
gz test       # Run unit tests
gz typecheck  # Type check with ty
gz check      # All quality checks
```

### Governance Commands

```bash
gz init       # Initialize project
gz prd        # Create PRD
gz constitute # Create constitution
gz specify    # Create brief
gz plan       # Create ADR
gz state      # Query ledger state
gz status     # Display gate status
gz attest     # Record attestation
gz validate   # Schema validation
gz sync       # Regenerate control surfaces
```

## Control Surfaces

This file is generated by `gz sync`. Do not edit directly.

- **Source**: `.gzkit/manifest.json`
- **Updated**: {sync_date}
