{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Documentation Structure","text":"<pre><code>docs/\n\u251c\u2500\u2500 user/           # Public site (gzkit.org) - served by MkDocs\n\u2502   \u251c\u2500\u2500 index.md\n\u2502   \u251c\u2500\u2500 charter.md\n\u2502   \u251c\u2500\u2500 lineage.md\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 developer/      # Internal docs - NOT published\n\u2502   \u251c\u2500\u2500 deployment.md\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 README.md       # This file\n</code></pre>"},{"location":"#editing","title":"Editing","text":"<ul> <li>Public docs: Edit <code>docs/user/</code>, run <code>uv run mkdocs serve</code> to preview</li> <li>Internal docs: Edit <code>docs/developer/</code>, no build needed</li> </ul>"},{"location":"#build","title":"Build","text":"<pre><code>uv sync --extra docs\nuv run mkdocs build    # Output to site/\nuv run mkdocs serve    # Dev server at localhost:8000\n</code></pre>"},{"location":"governance/GovZero/adr-lifecycle/","title":"ADR Lifecycle and Status Mapping","text":"<p>Status: Active Last reviewed: 2026-01-30 Authority: Canon (defines ADR lifecycle states, pre-release identifiers, and closeout-to-status mapping)</p> <p>This document canonizes ADR lifecycle states and their relationship to Gate 5 closeout attestation. For gate definitions, see charter.md. For closeout ceremony behavior, see audit-protocol.md.</p>"},{"location":"governance/GovZero/adr-lifecycle/#adr-lifecycle-states","title":"ADR Lifecycle States","text":"<p>An ADR progresses through these states:</p> State Meaning Transition Trigger Pool Planned ADR awaiting prioritization; lightweight intent only Author identifies future work need Draft ADR being authored; not yet ready for review ADR pulled from pool; author creates full structure Proposed ADR submitted for review; awaiting acceptance Author declares ready for review Accepted ADR approved; implementation work may begin Human accepts the proposal Completed Implementation finished; Gate 5 attestation received Human attests \"Completed\" or \"Completed \u2014 Partial\" Validated Post-attestation audit completed (Phase 2) Audit passes and reconciliation recorded Superseded Replaced by a newer ADR New ADR explicitly supersedes this one Abandoned Work stopped; ADR will not be completed Human attests \"Dropped\" or declares abandonment"},{"location":"governance/GovZero/adr-lifecycle/#lifecycle-diagram","title":"Lifecycle Diagram","text":"<pre><code>Pool \u2192 Draft \u2192 Proposed \u2192 Accepted \u2192 [implementation] \u2192 Closeout Ceremony \u2192 Completed \u2192 Validated\n  \u2502                                                                        \u2192 Abandoned (if Dropped)\n  \u2502                                                      \u2193\n  \u2502                                                 Superseded (if replaced by new ADR)\n  \u2502\n  \u2514\u2500\u2500 (may remain in pool indefinitely until prioritized or dropped)\n</code></pre>"},{"location":"governance/GovZero/adr-lifecycle/#pre-release-identifier-scheme-semver-compliant","title":"Pre-Release Identifier Scheme (SemVer Compliant)","text":"<p>During development (0.y.z) and post-release (1.0.0+), SemVer pre-release identifiers provide a unified namespace for tracking work items. The format is:</p> <pre><code>{major}.{minor}.{patch}[-{type}.{identifier}]\n</code></pre>"},{"location":"governance/GovZero/adr-lifecycle/#identifier-types","title":"Identifier Types","text":"Type Purpose Example <code>pool.{slug}</code> Planned ADR in pool, awaiting prioritization <code>0.2.0-pool.forecaster-core</code> <code>obpi.{nn}</code> OBPI brief in progress under an ADR <code>0.1.15-obpi.03</code> <code>ghi.{nn}</code> GitHub Issue discovered during work <code>0.1.15-ghi.67</code>"},{"location":"governance/GovZero/adr-lifecycle/#precedence","title":"Precedence","text":"<p>Per SemVer, pre-release versions have lower precedence than the associated normal version:</p> <pre><code>0.1.15-obpi.01 &lt; 0.1.15-obpi.02 &lt; 0.1.15-ghi.67 &lt; 0.1.15\n</code></pre> <p>When an ADR completes (e.g., <code>0.1.15</code>), all work-item identifiers (<code>-obpi.*</code>, <code>-ghi.*</code>) are \"rolled up\" into the completed version.</p>"},{"location":"governance/GovZero/adr-lifecycle/#examples","title":"Examples","text":"<p>Pre-1.0.0 (initial development):</p> Version Meaning <code>0.1.15</code> ADR-0.1.15 completed <code>0.1.15-obpi.01</code> OBPI-0.1.15-01 in progress <code>0.1.15-ghi.67</code> GHI #67 discovered during 0.1.15 work <code>0.2.0-pool.exog-pipeline</code> ADR planned for 0.2.x, not yet started <p>Post-1.0.0 (stable API):</p> Version Meaning <code>1.2.3</code> Current stable release <code>1.2.4-obpi.01</code> Patch-level work in progress <code>1.3.0-pool.forecaster</code> Minor-level feature in planning pool <code>2.0.0-pool.breaking-change</code> Major-level breaking change planned"},{"location":"governance/GovZero/adr-lifecycle/#pool-artifacts","title":"Pool Artifacts","text":"<p>Pool ADRs live in <code>docs/design/adr/pool/</code> with pre-release identifiers:</p> <pre><code>docs/design/adr/pool/\n  ADR-0.2.0-pool.exog-pipeline.md       # lightweight intent only\n  ADR-0.2.0-pool.forecaster-core.md\n  ADR-1.3.0-pool.scheduler-cadence.md\n</code></pre> <p>Pool Status Constraint (Binding):</p> <p>ADRs in the <code>docs/design/adr/pool/</code> directory may ONLY have status <code>Pool</code>.</p> Rule Enforcement Pool ADRs have status <code>Pool</code> only No other status permitted while in pool/ Pool ADRs are lightweight Intent only; no OBPI briefs required Pool ADRs cannot be Proposed/Accepted Must be pulled from pool first Pool directory is the only valid location for Pool status ADRs outside pool/ cannot have status Pool <p>Rationale: The pool is a backlog of planned work, not active governance artifacts. Pool ADRs await prioritization and do not participate in the gate system until pulled.</p> <p>When pulled from pool:</p> <ol> <li>Assign the next available version number (e.g., <code>0.2.1</code>)</li> <li>Create full ADR folder structure under <code>docs/design/adr/adr-X.Y.x/</code></li> <li>Change status to <code>Draft</code> (or <code>Proposed</code> if ready for review)</li> <li>Write OBPI briefs (required before <code>Accepted</code>)</li> <li>Delete or archive the pool file</li> </ol>"},{"location":"governance/GovZero/adr-lifecycle/#pool-promotion-tooling","title":"Pool Promotion Tooling","text":"<p>Use the canonical promotion command:</p> <pre><code>uv run gz adr promote ADR-pool.&lt;slug&gt; --semver X.Y.Z [--dry-run]\n</code></pre> <p>The command enforces protocol and writes lineage evidence:</p> <ul> <li>Creates promoted ADR package path by SemVer bucket (<code>foundation/</code>, <code>pre-release/</code>, <code>&lt;major&gt;.0/</code>)</li> <li>Marks pool source file as archived context (<code>status: Superseded</code>, <code>promoted_to: ADR-X.Y.Z-slug</code>)</li> <li>Appends <code>artifact_renamed</code> ledger event with reason <code>pool_promotion</code></li> </ul>"},{"location":"governance/GovZero/adr-lifecycle/#closeout-attestation-to-status-mapping","title":"Closeout Attestation to Status Mapping","text":"<p>When a human provides Gate 5 attestation, the ADR status updates as follows:</p> Closeout Attestation ADR Status Notes Completed Completed All claims verified; work finished Completed \u2014 Partial: [reason] Completed Deferrals documented in ADR Consequences section; follow-on ADRs created for deferred scope Dropped \u2014 [reason] Abandoned Rationale recorded; ADR does not count toward roadmap"},{"location":"governance/GovZero/adr-lifecycle/#audit-completion-to-status-mapping","title":"Audit Completion to Status Mapping","text":"Audit Outcome ADR Status Notes Audit passes Validated Post-closeout reconciliation complete Audit pending or failing Completed Remains in Phase 1 until resolved"},{"location":"governance/GovZero/adr-lifecycle/#state-transition-rules","title":"State Transition Rules","text":"<ol> <li>Pool \u2192 Draft: ADR pulled from pool; author creates full structure in <code>adr-X.Y.x/</code></li> <li>Draft \u2192 Proposed: Author determines ADR is ready for review</li> <li>Proposed \u2192 Accepted: Human reviews and accepts the proposal for implementation</li> <li>Accepted \u2192 Completed: Human provides \"Completed\" or \"Completed \u2014 Partial\" attestation via closeout ceremony</li> <li>Accepted \u2192 Abandoned: Human provides \"Dropped\" attestation or explicitly abandons work</li> <li>Any \u2192 Superseded: A new ADR explicitly declares it supersedes this one (add <code>Superseded-By: ADR-X.Y.Z</code> to metadata)</li> <li>Completed \u2192 Validated: Audit passes and reconciliation recorded</li> </ol> <p>Pool-specific constraints:</p> <ul> <li>Pool ADRs cannot skip Draft (must be pulled and structured first)</li> <li>Pool ADRs may be abandoned directly (Pool \u2192 Abandoned) if deprioritized</li> <li>Pool is the only status valid in <code>pool/</code> directory; all other statuses require <code>adr-X.Y.x/</code></li> </ul>"},{"location":"governance/GovZero/adr-lifecycle/#obpi-completeness-requirement-canonical","title":"OBPI Completeness Requirement (Canonical)","text":"<p>Binding rule: OBPIs are co-created with the ADR, not deferred.</p> <p>Before an ADR transitions to Accepted status:</p> <ul> <li>Each numbered checklist item in the Feature Checklist MUST have exactly one   corresponding OBPI brief file in the <code>briefs/</code> directory</li> <li>Each brief MUST follow naming: <code>OBPI-{semver}-{nn}-{slug}.md</code></li> <li>Each brief MUST reference its parent ADR and specific checklist item</li> </ul> <p>Rationale: The Work Breakdown Structure (WBS) is a contract between ADR intent and implementation. Orphaned checklist items (without briefs) create ambiguity about scope. Co-creation ensures intent is locked with execution units at decision time.</p> <p>Verification: The <code>gz-adr-manager</code> skill enforces this during ADR creation. Manual verification: count checklist items in ADR, count brief files in <code>briefs/</code> \u2014 must match.</p> <p>Anti-pattern: ADR tables listing OBPIs as \"Pending\" with no actual brief files. This is a governance violation. All briefs must exist as files before Accepted.</p>"},{"location":"governance/GovZero/adr-lifecycle/#deprecated-terms","title":"Deprecated Terms","text":"<p>The following terms have been used historically but are not canonical:</p> Term Disposition Deprecated Use \"Superseded\" with rationale, or \"Abandoned\" if no replacement Pending Use \"Proposed\" or \"Accepted\" depending on approval state Retired Use \"Superseded\" with backlink to replacement Completed + Validated Use \"Validated\" (legacy combined status)"},{"location":"governance/GovZero/adr-lifecycle/#adr-status-table","title":"ADR Status Table","text":"<p>The authoritative ADR status table lives at adr-status.md (colocated in GovZero).</p> <p>That table MUST use only the lifecycle states defined in this document. Status values in that table are derived from this canon; if conflict exists, this document governs.</p>"},{"location":"governance/GovZero/adr-lifecycle/#adr-series-and-release-tagging","title":"ADR Series and Release Tagging","text":"<p>ADRs are organized into series by their minor version number. Each series has distinct governance characteristics.</p>"},{"location":"governance/GovZero/adr-lifecycle/#series-classification","title":"Series Classification","text":"Series Name Purpose Release Tag Behavior 0.0.x Foundation Infrastructure, governance, tooling No release tags created 0.1.x+ Feature User-facing capability, external contracts Release tags created on validation <p>Foundation series (0.0.x):</p> <ul> <li>Establishes project infrastructure, governance framework, and developer tooling</li> <li>Changes are internal/structural and do not constitute user-facing releases</li> <li>Validated foundation ADRs contribute to project maturity but do not trigger version bumps</li> <li>Example: ADR-0.0.21 (GovZero Layered Trust) \u2014 governance infrastructure, not a release</li> </ul> <p>Feature series (0.1.x and beyond):</p> <ul> <li>Introduces user-facing capability, external API changes, or observable behavior changes</li> <li>Each validated ADR in a feature series represents a releasable increment</li> <li>Release tags track the highest validated feature-series ADR</li> </ul>"},{"location":"governance/GovZero/adr-lifecycle/#release-tag-rule-binding","title":"Release Tag Rule (Binding)","text":"<p>The release tag SHALL be the highest validated non-foundation ADR.</p> <pre><code>Release Tag = v{highest validated ADR where series \u2260 0.0.x}\n</code></pre> Scenario Highest Validated Release Tag ADR-0.1.14 validated 0.1.14 v0.1.14 ADR-0.0.25 validated (foundation) 0.1.14 (unchanged) v0.1.14 (no change) ADR-0.1.15 validated 0.1.15 v0.1.15 <p>Backfill validations: When earlier ADRs are validated after later ones (e.g., 0.1.12 validated after 0.1.14), no new release tag is created \u2014 the release already advanced.</p>"},{"location":"governance/GovZero/adr-lifecycle/#agent-enforcement","title":"Agent Enforcement","text":"<p>When validating an ADR, agents MUST:</p> <ol> <li>Check if the ADR is in the foundation series (0.0.x)</li> <li>If foundation: complete validation, no release tag action</li> <li>If feature series: compare against current highest validated feature ADR</li> <li>If this ADR &gt; current highest: create release tag <code>v{ADR version}</code></li> <li>If this ADR \u2264 current highest: no release tag action (backfill case)</li> </ol>"},{"location":"governance/GovZero/adr-lifecycle/#references","title":"References","text":"<ul> <li>Gate definitions: charter.md</li> <li>Closeout ceremony: audit-protocol.md</li> <li>Disposition rubric: ../ADR_DISPOSITION_RUBRIC.md</li> <li>ADR status table: adr-status.md</li> <li>Release doctrine: releases/README.md</li> </ul>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/","title":"GovZero ADR/OBPI/GHI/Audit Linkage","text":"<p>Status: Active Last reviewed: 2026-01-22 Authority: Canon (linkage, artifact placement, and pre-release identifier conventions)</p> <p>This document defines the canonical linkage between ADRs, OBPIs, GHIs, and audits. Gate definitions and closeout behavior remain authoritative in <code>charter.md</code> and <code>audit-protocol.md</code>.</p>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#scope","title":"Scope","text":"<ul> <li>Defines how ADR intent, OBPI briefs, GitHub issues, and audit artifacts connect.</li> <li>Standardizes where related artifacts live and how they reference each other.</li> <li>Does not redefine gate semantics or human attestation rules.</li> </ul>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#definitions","title":"Definitions","text":"<ul> <li>ADR: The intent contract and top-level evidence ledger for a decision.</li> <li>OBPI: One Brief Per Item; the atomic implementation unit for a single ADR checklist item.</li> <li>GHI: GitHub Issue used for tracking work (optional but linkable).</li> <li>Audit: Post-attestation reconciliation artifact that references observed proofs.</li> <li>ADR Closeout Form: An optional collaboration workspace for the closeout ceremony (observation and attestation).</li> </ul>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#canonical-linkage-rules","title":"Canonical linkage rules","text":"<ol> <li>Each ADR MUST include a Feature Checklist and an Evidence Ledger.</li> <li>Each checklist item MUST map to exactly one OBPI brief.</li> <li>Each OBPI brief MUST reference its parent ADR and the specific checklist item.</li> <li>The ADR Evidence Ledger MUST include a \"Related issues\" field; use <code>none</code> or <code>TBD</code>    when no GHI exists (no blank fields).</li> <li>If a GHI exists for an OBPI, the OBPI MUST link it and the ADR Evidence Ledger    SHOULD list it.</li> <li>Audits occur only after human attestation and MUST NOT be treated as proof of    attestation.</li> <li>ADR Closeout Forms are optional workspaces; they are not proof artifacts and are not    required for closeout.</li> </ol>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#timing-of-obpi-creation-binding","title":"Timing of OBPI Creation (Binding)","text":"<p>OBPIs are co-created with the ADR, not deferred.</p> <p>When an ADR is pulled from pool or authored fresh:</p> <ol> <li>At Draft time: OBPI brief files are created alongside the ADR document</li> <li>Before Proposed: All checklist items have corresponding brief files</li> <li>Before Accepted: Brief count matches checklist item count (1:1 mapping verified)</li> </ol> <p>What this means:</p> <ul> <li>An ADR cannot be marked Proposed with \"TBD\" or \"Pending\" entries in its OBPI table</li> <li>Brief files must exist in the <code>briefs/</code> directory \u2014 a table row is not sufficient</li> <li>The brief content may be minimal at Draft (stub acceptable), but the file must exist</li> </ul> <p>Enforcement: The <code>gz-adr-manager</code> skill creates briefs during ADR creation. See adr-lifecycle.md \u00a7 OBPI Completeness Requirement for the canonical rule.</p>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#artifact-layout","title":"Artifact layout","text":""},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#pool-layout-pre-prioritization","title":"Pool layout (pre-prioritization)","text":"<p>ADRs in the planning pool live in a dedicated directory with pre-release identifiers. Pool entries are lightweight \u2014 intent only, no OBPIs, no folder structure.</p> <pre><code>docs/design/adr/pool/\n  ADR-0.2.0-pool.exog-pipeline.md       # lightweight intent\n  ADR-0.2.0-pool.forecaster-core.md     # target minor version + slug\n  ADR-1.3.0-pool.scheduler-cadence.md   # post-1.0 planning\n</code></pre> <p>Pool ADR template (minimal):</p> <pre><code># ADR-{version}-pool.{slug}\n\n## Intent\n\n[2-3 sentences describing the problem and proposed solution]\n\n## Target Scope\n\n- [Bullet list of major deliverables]\n\n## Dependencies\n\n- [Prerequisites or related ADRs]\n\n## Notes\n\n[Optional: context, alternatives considered, rough effort estimate]\n</code></pre> <p>When an ADR is pulled from pool for implementation:</p> <ol> <li>Assign the next available version number in the target series</li> <li>Create full folder structure under <code>docs/design/adr/adr-X.Y.x/</code></li> <li>Expand intent into full ADR with Feature Checklist and Evidence Ledger</li> <li>Write OBPI briefs for each checklist item</li> <li>Delete or redirect the pool file</li> </ol>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#preferred-layout-adr-contained","title":"Preferred layout (ADR-contained)","text":"<pre><code>docs/design/adr/adr-X.Y.x/ADR-X.Y.Z-{slug}/\n  ADR-X.Y.Z-{slug}.md\n  ADR-CLOSEOUT-FORM.md            # optional closeout ceremony workspace\n  briefs/\n    OBPI-X.Y.Z-01-*.md\n    OBPI-X.Y.Z-02-*.md\n  audit/\n    AUDIT_PLAN.md                 # pre-audit plan\n    AUDIT.md                      # post-attestation audit log\n    proofs/                       # optional, command outputs and receipts\n  logs/\n    design-outcomes.jsonl         # optional, agent-facing\n</code></pre> <p>This layout co-locates intent, briefs, audit, and optional logs for a single ADR.</p>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#legacy-layout-shared-briefs-tree","title":"Legacy layout (shared briefs tree)","text":"<pre><code>docs/design/adr/adr-X.Y.x/ADR-X.Y.Z-{slug}.md\ndocs/design/briefs/adr-X.Y.x/adr-X.Y.Z-{slug}/OBPI-X.Y.Z-*.md\ndocs/design/briefs/adr-X.Y.x/adr-X.Y.Z-{slug}/AUDIT-ADR-X.Y.Z-COMPLETED.md\n</code></pre> <p>Legacy layout remains valid for historical ADRs. New ADRs SHOULD use the preferred layout unless a transition plan is explicitly deferred.</p> <p>Legacy audit archive: <code>docs/design/audit/**</code> remains historical only; new ADR audits live under the ADR-contained layout above.</p>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#ghi-linkage-rules","title":"GHI linkage rules","text":""},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#ghis-vs-obpis-planned-vs-emergent-work","title":"GHIs vs OBPIs: Planned vs Emergent Work","text":"<p>OBPIs are planned work. Each OBPI is an atomic implementation unit scoped in advance, tied to an ADR checklist item. OBPIs define what we intend to build.</p> <p>GHIs capture emergent work. GitHub issues are for surprises, bugs, asides, problems, and anything that surfaces while fulfilling an OBPI. GHIs are NOT OBPI-level work themselves \u2014 they are discovered needs that arise during execution.</p>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#ghi-purpose","title":"GHI Purpose","text":"<p>GHIs should be used for:</p> <ul> <li>Bugs discovered during implementation</li> <li>Surprises that weren't anticipated in the original brief</li> <li>Asides \u2014 related work noticed but out of scope for the current OBPI</li> <li>Problems that block or complicate the planned work</li> <li>Discovered needs \u2014 new capabilities revealed as necessary during execution</li> </ul>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#ghi-adr-association","title":"GHI-ADR Association","text":"<p>A GHI may be associated with an ADR as its discovery context. This means: \"while working on ADR-X.Y.Z, we discovered this need.\" The association records provenance, not ownership.</p> <p>A GHI discovered during ADR work may eventually:</p> <ol> <li>Become a new OBPI under the same ADR (if scope fits)</li> <li>Spawn a new ADR (if scope warrants semver bump)</li> <li>Remain tracked for future consideration</li> <li>Be closed as won't-fix or duplicate</li> </ol>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#linkage-mechanics","title":"Linkage Mechanics","text":"<ul> <li>GHIs are OPTIONAL. Use them for multi-session work, cross-team coordination, or   when emergent work needs tracking outside the brief.</li> <li>If a GHI exists and relates to an OBPI, link it in the OBPI and in the ADR Evidence Ledger.</li> <li>If no GHI exists, use <code>none</code> or <code>TBD</code> in the ADR Evidence Ledger.</li> </ul>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#pre-release-identifier-convention","title":"Pre-Release Identifier Convention","text":"<p>GHIs discovered during ADR work can be tracked using SemVer pre-release identifiers:</p> <pre><code>{adr-version}-ghi.{issue-number}\n</code></pre> <p>Example: While working on ADR-0.1.15, you discover a bug and create GHI #67. The identifier <code>0.1.15-ghi.67</code> captures:</p> <ul> <li>Discovery context: Found during 0.1.15 work</li> <li>Issue reference: GitHub Issue #67</li> <li>Precedence: Sorts before <code>0.1.15</code> completion (per SemVer)</li> </ul> <p>This convention is optional but enables unified version-based tracking across ADRs, OBPIs, and GHIs. See adr-lifecycle.md for the full pre-release identifier scheme.</p>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#optional-jsonl-ledger-agent-facing","title":"Optional JSONL ledger (agent-facing)","text":"<p>JSONL logs are allowed as agent memory but are not proof and do not replace Markdown attestation. If used, store under the ADR folder <code>logs/</code> and include only trace metadata. Suggested minimal schema:</p> <pre><code>{\"ts\":\"ISO8601\",\"obpi\":\"0.1.12-03\",\"gate\":2,\"event\":\"implemented\",\"actor\":\"agent\",\"commit\":\"abc123\",\"issue\":47,\"docs_updated\":[\"path/to/doc\"],\"learning\":\"\"}\n</code></pre>"},{"location":"governance/GovZero/adr-obpi-ghi-audit-linkage/#references","title":"References","text":"<ul> <li>Gate definitions: <code>docs/governance/GovZero/charter.md</code></li> <li>Closeout ceremony: <code>docs/governance/GovZero/audit-protocol.md</code></li> <li>Governance index: <code>docs/governance/GOVERNANCE_AND_AGENT_TOOLING_INDEX.md</code></li> <li>Background (non-canonical):</li> <li><code>docs/governance/GOVZERO-GATE-3-5-AUDIT-FORM-ISSUE.md</code></li> <li><code>docs/governance/GOVZERO-GATE-3-5-AUDIT-FORM-ISSUE-CODEX-FEEDBACK.md</code></li> <li><code>docs/governance/GOVZERO-GATE-3-5-AUDIT-FORM-ISSUE-COPILOT-FEEDBACK.md</code></li> </ul>"},{"location":"governance/GovZero/adr-status/","title":"ADR Status","text":""},{"location":"governance/GovZero/adr-status/#adr-status-table","title":"ADR Status Table","text":"<p>Status: Active Last reviewed: 2026-02-09</p> ADR Title Type Status Date Added Date Closed Completed Audit Verified Link ADR-0.0.0 Reset Organizing Doctrine (Surfaces \u00b7 Enablers \u00b7 Proofs) ADR Accepted 2025-10-04 No ADR-0.0.0 ADR-0.0.1 JSON-first foundation; YAML deprecated ADR Validated 2025-11-19 2025-11-21 2025-11-21 Yes (2026-01-06) ADR-0.0.1 ADR-0.0.2 JSON &amp; SQL Foundation + SQL Hygiene Unification ADR Validated 2025-11-19 No ADR-0.0.2 ADR-0.0.3 Subsystem Boundaries (Manifest-Driven Architecture) ADR Validated 2025-12-10 2025-12-10 No ADR-0.0.3 ADR-0.0.4 Artifact, Data, Config, and Tmp Directory Schema (Config-Driven Organization) ADR Superseded 2025-12-10 No ADR-0.0.4 ADR-0.0.5 AirlineOps I/O Doctrine (Cross-Platform, JSON-Only, Config-Driven, Adaptive) ADR Validated 2025-12-21 2025-12-22 2025-12-22 No ADR-0.0.5 ADR-0.0.6 Agent Self-Reporting Lint &amp; Governance Receipts (ARB) ADR Validated 2025-12-22 2026-01-28 2026-01-28 No ADR-0.0.6 ADR-0.0.7 ADR-0.0.7 Reconciliation Note \u2014 Agent Skills Note/Digest Validated 2025-12-24 2026-01-30 2025-12-24 Yes (2026-01-30) ADR-0.0.7 ADR-0.0.7 Agent Skills Foundation ADR Validated 2025-12-23 2025-12-23 2025-12-23 Yes (2026-01-30) ADR-0.0.7 ADR-0.0.8 Operator Documentation Architecture: Gate 3/5 Proof Structure ADR Validated 2025-12-25 2025-12-27 2025-12-27 Yes (2026-01-30) ADR-0.0.8 ADR-0.0.9 CHORE System Architecture Overhaul ADR Validated 2025-12-25 2025-12-25 No ADR-0.0.9 ADR-0.0.10 Catalog-First URL Resolution for BTS ADR Validated 2026-01-01 2026-01-01 No ADR-0.0.10 ADR-0.0.11 Agent-Driven Chore Orchestration ADR Validated 2026-01-03 2026-01-28 2026-01-28 No ADR-0.0.11 ADR-0.0.12 Skills as gz Facade ADR Validated 2026-01-06 Yes (2026-01-06) ADR-0.0.12 ADR-0.0.13 Repository Canonicalization as Compiler Behavior ADR Validated 2026-01-07 2026-01-07 2026-01-07 No ADR-0.0.13 ADR-0.0.14 Skills as gz Facade \u2014 Thin Wrapper and Composite Expansion ADR Validated 2026-01-07 2026-01-08 2026-01-08 No ADR-0.0.14 ADR-0.0.15 Dataset Contract Specification ADR Validated 2026-01-14 2026-01-14 2026-01-14 No ADR-0.0.15 ADR-0.0.16 Reporter Contract Specification ADR Validated 2026-01-14 2026-01-15 2026-01-15 No ADR-0.0.16 ADR-0.0.17 Dataset Package Lifecycle ADR Validated 2026-01-16 2026-01-16 No ADR-0.0.17 ADR-0.0.18 Dataset Documentation Requirements ADR Validated 2026-01-16 2026-01-16 No ADR-0.0.18 ADR-0.0.19 AIRAC-Orchestrated Warehouse Pipeline (Dataset-Agnostic Generalization) ADR Validated 2026-01-21 2026-01-27 2026-01-27 No ADR-0.0.19 ADR-0.0.20 artifact-organization-canonicalization ADR Validated 2026-01-26 2026-01-29 2026-01-29 No ADR-0.0.20 ADR-0.0.21 GovZero Tooling Layered Trust Architecture ADR Validated 2026-01-26 2026-01-29 2026-01-29 Yes (2026-01-29) ADR-0.0.21 ADR-0.0.22 Config Directory Canonicalization ADR Validated 2026-01-28 2026-01-29 2026-01-29 Yes (2026-01-29) ADR-0.0.22 ADR-0.0.23 Hexagonal Architecture for Dataset Warehouse Pipeline ADR Validated 2026-01-29 No ADR-0.0.23 ADR-0.0.24 Validation Receipt Temporal Anchoring ADR Validated 2026-01-30 2026-02-11 2026-02-11 No ADR-0.0.24 ADR-0.0.25 Compounding Engineering &amp; Session Handoff Contract ADR Proposed 2026-01-30 No ADR-0.0.25 ADR-0.0.26 TestSuite-Based Test Segmentation ADR Validated 2026-02-07 2026-02-10 No ADR-0.0.26 ADR-0.0.27 Agent Session Guardrails ADR Proposed 2026-02-09 No ADR-0.0.27 ADR-0.0.28 Skill Quality Alignment (Anthropic Guide Compliance) ADR Proposed 2026-02-10 No ADR-0.0.28 ADR-0.0.29 OBPI Completion Anchoring ADR Proposed 2026-02-11 No ADR-0.0.29 ADR-0.1.0 doctrine-separation ADR Validated 2025-09-29 2025-09-29 2025-09-29 Yes (2026-01-30) ADR-0.1.0 ADR-0.1.1 Pivot to 0.1.x &amp; Lineage Discipline ADR Validated 2025-09-30 2025-09-30 2025-09-30 Yes (2026-01-30) ADR-0.1.1 ADR-0.1.2 INGEST-CORE: DB28 cadence, receipts, T-100/ASQP, fail-closed planning ADR Superseded 2025-09-30 2025-10-03 No ADR-0.1.2 ADR-0.1.3 DB28 Hard-Enforce &amp; Warehouse Sync Flags ADR Validated 2025-10-03 2025-10-04 2025-10-04 Yes (2026-01-30) ADR-0.1.3 ADR-0.1.4 Warehouse Sync Surface &amp; Finalized Receipt Schema ADR Validated 2025-10-04 2025-10-04 2025-10-04 Yes (2026-01-30) ADR-0.1.4 ADR-0.1.5 Dataset Registry Normalization &amp; Governance Schema ADR Validated 2025-10-06 2025-10-06 2025-10-06 Yes (2026-01-30) ADR-0.1.5 ADR-0.1.6 Public Data Ingest (LIVE-Proof of Required Datasets) stabilization ADR Validated 2025-10-06 2025-10-17 2025-10-17 Yes (2026-01-30) ADR-0.1.6 ADR-0.1.7 PREZIP Aviation Core Ingestion ADR Validated 2025-10-18 2025-10-21 2025-10-21 Yes (2026-01-30) ADR-0.1.7 ADR-0.1.8 Finish <code>aviation_core</code>: DB10 + FAA Cycles (NASR NFD, IFP FAACIFP18) ADR Validated 2025-10-21 2025-10-21 2025-10-21 Yes (2026-01-30) ADR-0.1.8 ADR-0.1.9 Aviation Core Cemented (Consolidated Reference) Note/Digest Accepted Unknown No ADR-0.1.9 ADR-0.1.9 COPILOT DIGEST \u2014 ADR 0.1.9 \u201cAviation Core Cemented\u201d Note/Digest Accepted Unknown No ADR-0.1.9 ADR-0.1.9 ADR\u20110.1.9 Developer Digest \u2014 \"Aviation Core Cemented\" Note/Digest Accepted Unknown No ADR-0.1.9 ADR-0.1.9 ADR-0.1.9 Reconciliation Note \u2014 Aviation Core Note/Digest Validated 2025-11-09 2026-01-30 2025-11-09 Yes (2026-01-30) ADR-0.1.9 ADR-0.1.9 Aviation Core Cemented ADR Validated 2025-11-09 2025-11-09 2025-11-09 Yes (2026-01-30) ADR-0.1.9 ADR-0.1.10 Reporting Catalog and data_sources.json ADR Validated 2025-11-09 2025-11-09 2025-11-09 Yes (2026-01-30) ADR-0.1.10 ADR-0.1.11 freezer-archival-policy-cold-store ADR Validated 2025-12-23 2026-01-06 No ADR-0.1.11 ADR-0.1.12 Hot Contract From Registrar Inventory (No Catalog Refresh) ADR Validated 2026-01-05 2026-01-09 2026-01-09 Yes (2026-01-30) ADR-0.1.12 ADR-0.1.13 Mirror Layer (Postgres + Parquet Analytical Reads) ADR Validated 2025-11-09 2026-01-10 2026-01-10 Yes (2026-01-30) ADR-0.1.13 ADR-0.1.14 Exogenous Ingest (CPI \u2192 Fuel \u2192 PPI \u2192 Macro \u2192 Gravity Attractors) ADR Validated 2025-11-09 No ADR-0.1.14 ADR-0.1.15 Warehouse-Wide Dataset Integration ADR Accepted 2026-01-13 \u2014 No ADR-0.1.15 ADR-0.1.16 Unified Adapter Architecture ADR Accepted 2026-01-30 No ADR-0.1.16 ADR-pool Canonical Query Views ADR Pool 2025-11-09 2026-01-30 No ADR-pool ADR-pool Manifest Contracts ADR Pool 2025-11-09 2026-01-30 No ADR-pool ADR-pool dbt/DVC/Pact Emulation ADR Pool 2025-12-06 2026-01-30 No ADR-pool ADR-pool NAIP Historical Archive ADR Pool 2025-11-09 2026-01-30 No ADR-pool ADR-0.2.0 Aviation Core Time-Series Forecasting Framework ADR Accepted Unknown No ADR-0.2.0 ADR-0.2.11 Atmospheric Climatology Modeling (NAIP Climo Engine) ADR Accepted Unknown No ADR-0.2.11 ADR-0.4.0 Schedule Development Using NAIP Atmospheric Climatology ADR Accepted Unknown No ADR-0.4.0 ADR-0.5.0 Operational NAIP Engine (Real-Time Atmospheric Ingestion) ADR Accepted Unknown No ADR-0.5.0"},{"location":"governance/GovZero/architectural-enforcement/","title":"Architectural Enforcement Protocol","text":"<p>Purpose: Mechanisms to ensure agents follow architecture, not just read it. Status: Proposed Last reviewed: 2026-02-04</p>"},{"location":"governance/GovZero/architectural-enforcement/#problem-statement","title":"Problem Statement","text":"<p>Documentation makes the right answer findable. It doesn't make it unavoidable.</p> <p>Previous failures:</p> <ul> <li>OBPI briefs said \"delegate to existing adapters\"</li> <li>Agents created standalone implementations anyway</li> <li>Tests passed but architecture was violated</li> </ul>"},{"location":"governance/GovZero/architectural-enforcement/#three-enforcement-layers","title":"Three Enforcement Layers","text":""},{"location":"governance/GovZero/architectural-enforcement/#layer-1-code-level-validation-automated","title":"Layer 1: Code-Level Validation (Automated)","text":"<p>What: Tests that validate architectural compliance via AST analysis.</p> <p>Location: <code>tests/architecture/</code></p> <p>Implementation:</p> <pre><code># tests/architecture/test_adapter_compliance.py\n\"\"\"Validate all adapters follow delegation pattern (ADR-0.1.16).\"\"\"\n\nimport ast\nfrom pathlib import Path\nimport unittest\n\nADAPTER_DIR = Path(\"src/airlineops/warehouse/adapters\")\nREQUIRED_IMPORT = \"airlineops.warehouse.ingest.adapters\"\n\n\nclass TestAdapterArchitecturalCompliance(unittest.TestCase):\n    \"\"\"AST-based validation of adapter delegation rule.\"\"\"\n\n    def test_all_adapters_import_from_legacy(self):\n        \"\"\"Every adapter MUST import from warehouse/ingest/adapters/.\"\"\"\n        violations = []\n\n        for adapter_file in ADAPTER_DIR.glob(\"*.py\"):\n            if adapter_file.name.startswith(\"_\"):\n                continue\n\n            tree = ast.parse(adapter_file.read_text())\n            has_required_import = False\n\n            for node in ast.walk(tree):\n                if isinstance(node, ast.ImportFrom):\n                    if node.module and REQUIRED_IMPORT in node.module:\n                        has_required_import = True\n                        break\n\n            if not has_required_import:\n                violations.append(adapter_file.name)\n\n        self.assertEqual(\n            violations, [],\n            f\"Adapters missing delegation imports: {violations}\\n\"\n            f\"Per ADR-0.1.16, adapters MUST import from {REQUIRED_IMPORT}\"\n        )\n\n    def test_adapters_under_line_limit(self):\n        \"\"\"Adapters should be thin facades (&lt;300 lines).\"\"\"\n        violations = []\n\n        for adapter_file in ADAPTER_DIR.glob(\"*.py\"):\n            if adapter_file.name.startswith(\"_\"):\n                continue\n\n            line_count = len(adapter_file.read_text().splitlines())\n            if line_count &gt; 300:\n                violations.append(f\"{adapter_file.name}: {line_count} lines\")\n\n        self.assertEqual(\n            violations, [],\n            f\"Adapters exceeding 300 lines (too much business logic): {violations}\"\n        )\n</code></pre> <p>Run: <code>uv run -m unittest tests.architecture.test_adapter_compliance -v</code></p>"},{"location":"governance/GovZero/architectural-enforcement/#layer-2-agent-checkpoint-protocol-process","title":"Layer 2: Agent Checkpoint Protocol (Process)","text":"<p>What: Required verification output BEFORE any implementation.</p> <p>Add to OBPI template:</p> <pre><code>### ARCHITECTURAL VERIFICATION (MANDATORY \u2014 BEFORE CODE)\n\n**Complete this section BEFORE writing any code. Copy-paste and fill in:**\n\n```text\n## Architectural Checkpoint\n\n**Bounded Context:** [Discovery | Planning | Acquisition | Ingestion | Validation | Reporting]\n\n**I am working in the ______ context, which:**\n- OWNS: [list what this context owns]\n- DOES NOT OWN: [list what this context does NOT own]\n\n**Invariants that apply to this work:**\n- [ ] Single-active HOT contract (if applicable)\n- [ ] Single-active COLD contract (if applicable)\n- [ ] Adapter delegation rule (if adapter work)\n- [ ] Manifest determinism (if manifest work)\n\n**Canonical format for this dataset:** [YYYY-Qn | YYYY-MM | YYCC | YYYY | STATIC]\n\n**I will DELEGATE to:** [list existing modules I will import from]\n**I will IMPLEMENT:** [list only the thin facade/protocol compliance]\n\n**STOP CONDITIONS:**\n- [ ] I cannot identify my bounded context \u2192 STOP, ask human\n- [ ] I cannot find the module to delegate to \u2192 STOP, ask human\n- [ ] I'm writing &gt;50 lines of business logic \u2192 STOP, wrong approach\n</code></pre> <p>If you cannot complete this checkpoint, STOP and emit BLOCKERS.</p>"},{"location":"governance/GovZero/architectural-enforcement/#layer-3-architectural-compliance-check-skill","title":"Layer 3: Architectural Compliance Check (Skill)","text":"<p>What: A runnable chore that audits the codebase against <code>config/architecture.json</code>.</p> <p>Location: <code>docs/governance/GovZero/</code> policy + <code>gz</code> quality/validation commands</p> <p>Chore definition:</p> <pre><code>{\n  \"architectural-compliance-audit\": {\n    \"description\": \"Audit code against architecture.json invariants\",\n    \"command\": \"uv run gz check\",\n    \"checks\": [\n      \"adapter_delegation_rule\",\n      \"bounded_context_imports\",\n      \"invariant_enforcement\"\n    ]\n  }\n}\n</code></pre> <p>Output format:</p> <pre><code>## Architectural Compliance Audit\n\n### Adapter Delegation Rule (ADR-0.1.16)\n\u2713 bts_db1b_ticket.py \u2014 imports from adapters/bts/db1b_ticket\n\u2713 bts_db1b_coupon.py \u2014 imports from adapters/bts/db1b_coupon\n\u2717 bts_foo.py \u2014 MISSING delegation import\n\n### Bounded Context Violations\n\u2713 No cross-context imports detected\n\n### Invariant Enforcement\n\u2713 Single-active HOT \u2014 enforced in registrar.py:407\n\u2713 Single-active COLD \u2014 enforced in registrar.py:184\n\n**Result:** 1 violation detected. See above.\n</code></pre>"},{"location":"governance/GovZero/architectural-enforcement/#integration-with-obpi-workflow","title":"Integration with OBPI Workflow","text":""},{"location":"governance/GovZero/architectural-enforcement/#before-implementation","title":"Before Implementation","text":"<ol> <li>Agent reads <code>docs/design/architecture/system-manifest.md</code></li> <li>Agent completes Architectural Checkpoint in brief</li> <li>Human reviews checkpoint before approving implementation</li> </ol>"},{"location":"governance/GovZero/architectural-enforcement/#during-implementation","title":"During Implementation","text":"<ol> <li>Agent runs <code>uv run -m unittest tests.architecture -v</code> after each file</li> <li>Violations fail immediately \u2014 no \"fix later\"</li> </ol>"},{"location":"governance/GovZero/architectural-enforcement/#after-implementation","title":"After Implementation","text":"<ol> <li>Agent runs architectural compliance chore</li> <li>Results included in OBPI completion evidence</li> <li>Human attestation includes architectural compliance</li> </ol>"},{"location":"governance/GovZero/architectural-enforcement/#enforcement-matrix","title":"Enforcement Matrix","text":"Mechanism When What It Catches Automated? AST import tests CI/pre-commit Missing delegation imports \u2713 Line count tests CI/pre-commit Too much business logic \u2713 Checkpoint protocol Before coding Wrong bounded context \u2717 (human review) Compliance chore After coding Cross-context violations \u2713 Human attestation Before completion Architectural misalignment \u2717 (human gate)"},{"location":"governance/GovZero/architectural-enforcement/#failure-modes-this-prevents","title":"Failure Modes This Prevents","text":"Previous Failure Enforcement That Blocks It Standalone adapter (no delegation) AST import test fails Adapter with 500 lines of logic Line count test fails Agent in wrong bounded context Checkpoint requires explicit declaration Agent bypasses registrar Cross-context import check Agent doesn't understand architecture Checkpoint forces articulation"},{"location":"governance/GovZero/architectural-enforcement/#implementation-checklist","title":"Implementation Checklist","text":"<ul> <li>[ ] Create <code>tests/architecture/test_adapter_compliance.py</code></li> <li>[ ] Add architectural checkpoint to OBPI template</li> <li>[ ] Create architectural compliance chore</li> <li>[ ] Add to pre-commit hooks (optional)</li> <li>[ ] Update AGENTS.md with enforcement requirements</li> </ul>"},{"location":"governance/GovZero/architectural-enforcement/#see-also","title":"See Also","text":"<ul> <li>System Manifest \u2014 Bounded contexts and invariants</li> <li>ADR-0.1.16 \u2014 Adapter delegation rule</li> <li>OBPI Template \u2014 Brief format</li> </ul>"},{"location":"governance/GovZero/audit-protocol/","title":"GovZero Audit Protocol","text":"<p>Status: Active Last reviewed: 2026-01-18 Authority: Canon (defines ADR audit workflow and closeout ceremony)</p> <p>This document defines the audit protocol for ADR closeout within GovZero governance. Gate definitions are in charter.md \u2014 this document references gates by number only.</p>"},{"location":"governance/GovZero/audit-protocol/#adr-closeout-ceremony","title":"ADR Closeout Ceremony","text":"<p>The ADR closeout ceremony is a hard mode transition that transfers interpretive authority from the agent to the human. It ensures human attestation is grounded in direct observation, not mediated through agent claims.</p>"},{"location":"governance/GovZero/audit-protocol/#trigger","title":"Trigger","text":"<p>The ceremony begins when the human invokes:</p> <ul> <li>\"ADR closeout ceremony\"</li> <li>Or recognized equivalent (e.g., \"begin closeout\", \"closeout ADR-X.Y.Z\")</li> </ul>"},{"location":"governance/GovZero/audit-protocol/#attestation-forms","title":"Attestation Forms","text":"<p>The human MUST provide one of the following explicit attestations:</p> Attestation Meaning Completed ADR work is finished; all claims verified; ready to finalize Completed \u2014 Partial: [reason] Subset of work accepted; remainder deferred with documented rationale Dropped \u2014 [reason] ADR rejected; clear rationale provided; does not advance"},{"location":"governance/GovZero/audit-protocol/#agent-behavior-must","title":"Agent Behavior: MUST","text":"<ol> <li> <p>Agent MUST recognize the closeout trigger phrase as a mode transition command.</p> </li> <li> <p>Agent MUST immediately yield interpretive authority to the human upon entering closeout mode.</p> </li> <li> <p>Agent MUST present raw artifact paths and commands for human execution, not summaries or interpretations.</p> </li> <li> <p>A short paths/commands-only inventory is permitted if it is derived solely from the      provided paths/commands and contains no outcomes or conclusions.</p> </li> <li> <p>Agent MUST wait for explicit human attestation before recording closeout status.</p> </li> <li> <p>Agent MUST record the human's attestation verbatim, including timestamp and any stated rationale.</p> </li> <li> <p>Agent MUST run audit checks only after the human has provided attestation (post-closeout audit).</p> </li> <li> <p>Agent MUST reference gate semantics by number only (e.g., \"Gate 5\") and defer to <code>docs/governance/GovZero/charter.md</code> for definitions.</p> </li> <li> <p>Agent MUST treat logs and ledgers as reconciliation artifacts for agent use, not as proof of human attestation.</p> </li> <li> <p>Agent MUST surface this document for human reference during closeout.</p> </li> </ol>"},{"location":"governance/GovZero/audit-protocol/#agent-behavior-must-not","title":"Agent Behavior: MUST NOT","text":"<ol> <li>Agent MUST NOT summarize, interpret, or editorialize evidence outcomes during closeout mode.</li> <li>Correct: \"Run <code>uv run -m unittest -v</code> to see test results\"</li> <li> <p>Forbidden: \"All tests pass\"</p> </li> <li> <p>Agent MUST NOT infer attestation from silence, continuation, or implicit approval. Attestation must be explicit.</p> </li> <li> <p>Agent MUST NOT auto-close an ADR based on passing checks. Human attestation is the closeout gate, not CI status.</p> </li> <li> <p>Agent MUST NOT run audit checks during closeout mode. Audit is post-attestation only.</p> </li> <li> <p>Agent MUST NOT present ledger entries or logs as proof of completion. These are agent-facing reconciliation, not human-facing evidence.</p> </li> <li> <p>Agent MUST NOT redefine, restate, or reinterpret gate semantics. Reference by number only; definitions live in the charter.</p> </li> <li> <p>Agent MUST NOT offer to \"check if requirements are met\" during closeout. The human checks; the agent presents paths.</p> </li> <li> <p>Agent MUST NOT proceed to post-closeout tasks until attestation is recorded.</p> </li> </ol>"},{"location":"governance/GovZero/audit-protocol/#mode-transition-before-vs-during-vs-after-closeout","title":"Mode Transition: Before vs During vs After Closeout","text":"Phase Agent Role Human Role Permitted Agent Actions Pre-Closeout Active executor Reviewer/requester Run tests, generate reports, interpret results, suggest next steps, update code During Closeout Passive presenter Active observer/attestor Present artifact paths, surface commands, record attestation verbatim, answer factual questions only Post-Closeout Audit executor Passive (informed of results) Run audit checks, update ledgers, file reconciliation receipts, report audit findings <p>Trigger: Human invokes \"ADR closeout ceremony\" (or recognized equivalent)</p> <p>Exit condition: Human provides explicit attestation (Completed / Completed \u2014 Partial / Dropped)</p> <p>Transition rules:</p> <ul> <li>Pre \u2192 During: Triggered by human invoking closeout ceremony</li> <li>During \u2192 Post: Triggered by human providing attestation</li> <li>Agent cannot self-transition out of \"During\" phase</li> </ul>"},{"location":"governance/GovZero/audit-protocol/#why-this-prevents-mediated-observation","title":"Why This Prevents Mediated Observation","text":"<p>The core integrity risk in agent-assisted governance is mediated observation: the human sees reality only through the agent's lens. If the agent says \"tests pass\" and the human accepts this, the human has not observed the tests \u2014 they have observed the agent's claim about the tests. This creates an epistemic gap where the agent's errors, biases, or hallucinations become invisible.</p> <p>The closeout ceremony eliminates mediated observation by inverting the information flow:</p> <ul> <li>The agent presents paths, not conclusions (\"see <code>artifacts/reports/coverage.html</code>\" not \"coverage is 87%\")</li> <li>The agent presents commands, not outcomes (\"run <code>uv run -m unittest -v</code>\" not \"all 42 tests pass\")</li> <li>The human executes and observes directly, with the agent as a silent index</li> </ul> <p>This ensures the human's attestation is grounded in direct observation of artifacts, not in trust of agent claims. The agent cannot corrupt what it does not interpret.</p> <p>Post-closeout audit is permitted because it serves a different function: reconciliation and drift detection for future agent runs, not proof of the current closeout. Ledgers and logs are explicitly labeled as agent-facing artifacts so no future agent (or human) mistakes them for attestation evidence.</p>"},{"location":"governance/GovZero/audit-protocol/#closeout-ceremony-agent-script","title":"Closeout Ceremony: Agent Script","text":"<p>When the human invokes \"ADR closeout ceremony\", the agent MUST respond with:</p> <pre><code>ADR CLOSEOUT CEREMONY \u2014 MODE TRANSITION\n\nI am now in PASSIVE PRESENTER mode. I will not interpret evidence.\n\nSummary (paths/commands only; no outcomes):\n- ADR under review: [ADR path]\n- Related briefs: [OBPI paths]\n- Runbook/manpage paths (for walkthrough commands): [paths]\n- Evidence commands listed below\n\nArtifacts for your direct observation:\n- Tests: Run `uv run -m unittest -v`\n- Coverage: Run `uv run coverage report` or view `artifacts/reports/coverage.html`\n- Docs build: Run `uv run mkdocs build -q`\n- BDD (if Heavy): Run `uv run behave features/{feature}.feature`\n- Runbook walkthrough (product commands from runbook/manpages): [commands]\n\nDocs alignment check (human-confirmed):\n- [ ] Manpage exists and reflects current CLI behavior\n- [ ] Runbook includes relevant commands\n- [ ] Dataset documentation updated if applicable\n- [ ] CLI --help matches manpage SYNOPSIS\n\nWhen you have observed the artifacts, provide your attestation:\n- \"Completed\"\n- \"Completed \u2014 Partial: [reason]\"\n- \"Dropped \u2014 [reason]\"\n\nI await your attestation.\n</code></pre> <p>The agent MUST NOT deviate from this script or add interpretive commentary.</p>"},{"location":"governance/GovZero/audit-protocol/#post-closeout-audit","title":"Post-Closeout Audit","text":"<p>After the human provides attestation, the agent MAY:</p> <ol> <li>Record the attestation in the ADR metadata</li> <li>Update ledgers/logs with reconciliation data</li> <li>Run automated audit checks</li> <li>Update ADR status to Validated after audit completion (see ADR lifecycle)</li> <li>Report audit findings to the human</li> </ol> <p>Ledger entries are for agent reconciliation only. They do not constitute proof of human attestation.</p>"},{"location":"governance/GovZero/audit-protocol/#references","title":"References","text":"<ul> <li>Gate definitions: charter.md</li> <li>ADR/OBPI/GHI/audit linkage: adr-obpi-ghi-audit-linkage.md</li> <li>Disposition rubric (legacy): ../ADR_DISPOSITION_RUBRIC.md</li> <li>Agent contract: /AGENTS.md</li> </ul>"},{"location":"governance/GovZero/charter/","title":"GovZero Charter v6","text":"<p>Status: Active Last reviewed: 2026-01-08 Authority: Canon (sole authority for gate definitions)</p> <p>This document is the sole authority for GovZero gate definitions and semantics. All other documents MUST reference gates by number only and defer here for meaning.</p>"},{"location":"governance/GovZero/charter/#authority-boundary","title":"Authority Boundary","text":"Role Authority Human Attests to ADR closeout; provides explicit attestation Agent Assists with implementation, testing, documentation; presents artifacts Audit Runs post-attestation to reconcile artifacts; does not grant authority <p>Human attestation is the closeout gate. Agents cannot attest on behalf of humans. Audit is a reconciliation mechanism, not an authority mechanism.</p>"},{"location":"governance/GovZero/charter/#gate-definitions","title":"Gate Definitions","text":""},{"location":"governance/GovZero/charter/#gate-1-adr-intent","title":"Gate 1: ADR (Intent)","text":"<p>Purpose: Record intent and tradeoffs before implementation.</p> <p>Artifact: ADR document with problem statement, decision, and consequences.</p> <p>Applies to: All work (Lite and Heavy lanes).</p>"},{"location":"governance/GovZero/charter/#gate-2-tdd-tests","title":"Gate 2: TDD (Tests)","text":"<p>Purpose: Verify implementation correctness through automated tests.</p> <p>Artifact: Passing unit tests with coverage floor (\u226540%).</p> <p>Applies to: All work (Lite and Heavy lanes).</p>"},{"location":"governance/GovZero/charter/#gate-3-docs-documentation","title":"Gate 3: Docs (Documentation)","text":"<p>Purpose: Ensure documentation accurately describes code behavior.</p> <p>Artifact: Clean markdown lint, mkdocs build passes, links/anchors valid.</p> <p>Applies to: Heavy lane only.</p>"},{"location":"governance/GovZero/charter/#gate-4-bdd-behavior","title":"Gate 4: BDD (Behavior)","text":"<p>Purpose: Verify external contract behavior through acceptance tests.</p> <p>Artifact: Passing Behave scenarios for CLI/API/schema contracts.</p> <p>Applies to: Heavy lane only.</p>"},{"location":"governance/GovZero/charter/#gate-5-human-attestation","title":"Gate 5: Human Attestation","text":"<p>Purpose: Human directly observes artifacts and attests to ADR completion.</p> <p>Artifact: Explicit human attestation recorded with timestamp.</p> <p>Applies to: Heavy lane only (required for ADR closeout).</p> <p>Authority: Human attestation is the sole authority for ADR closeout. Agents present artifacts; humans observe and attest. Audit runs post-attestation.</p>"},{"location":"governance/GovZero/charter/#lane-doctrine","title":"Lane Doctrine","text":"Lane Gates Trigger Lite 1, 2 Internal changes only (no external contract changes) Heavy 1, 2, 3, 4, 5 External contract changes (CLI, API, schema, error messages) <p>Default lane is Lite. Escalate to Heavy only when external contracts change.</p>"},{"location":"governance/GovZero/charter/#closeout-attestation-terms","title":"Closeout Attestation Terms","text":"<p>Human attestation MUST use one of these exact forms:</p> Term Meaning Completed ADR work finished; all claims verified Completed \u2014 Partial: [reason] Subset accepted; remainder deferred with rationale Dropped \u2014 [reason] ADR rejected; clear rationale provided <p>These terms are canonical. Other terms (accept, approve, sign off) are not valid for closeout.</p>"},{"location":"governance/GovZero/charter/#references","title":"References","text":"<ul> <li>ADR lifecycle and status mapping: adr-lifecycle.md</li> <li>ADR status table: adr-status.md</li> <li>Closeout ceremony behavior: audit-protocol.md</li> <li>ADR/OBPI/GHI/audit linkage: adr-obpi-ghi-audit-linkage.md</li> <li>Agent contract: /AGENTS.md</li> <li>Machine-readable governance: /config/governance_manifest.json</li> </ul>"},{"location":"governance/GovZero/gate5-architecture/","title":"Gate 5 Documentation Architecture","text":"<p>Status: Active Last reviewed: 2026-01-29</p>"},{"location":"governance/GovZero/gate5-architecture/#overview","title":"Overview","text":"<p>Gate 5 enforces code-documentation-intent alignment for Heavy lane work. This document defines the three-layer documentation structure that proves robustness.</p> <p>Core Principle: Documentation is the Gate 5 artifact. There is no separate \"Gate 5 deliverable.\" You organize existing docs to prove robustness.</p>"},{"location":"governance/GovZero/gate5-architecture/#three-layer-documentation-structure","title":"Three-Layer Documentation Structure","text":"<p>Effective: 2025-12-06</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  LAYER 1: Operator Runbook (docs/user/operator_runbook.md)          \u2502\n\u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u2502\n\u2502  Entry point and narrative index                                    \u2502\n\u2502  High-level workflow (Librarian \u2192 Warehouse \u2192 Reporter)             \u2502\n\u2502  Governance context (hot horizons, alignment, retention)            \u2502\n\u2502  Troubleshooting and cross-dataset coordination                     \u2502\n\u2502  Pointers to manpages for detailed references                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                \u2502\n                                \u2502 references\n                                \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  LAYER 2: Manpage Directory (docs/user/manpages/)                   \u2502\n\u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u2502\n\u2502  Unix-style command references (one per workflow step)              \u2502\n\u2502  Structure: NAME, SYNOPSIS, DESCRIPTION, OPTIONS,                   \u2502\n\u2502             IMPLEMENTATION TRACE, CONFIGURATION,                    \u2502\n\u2502             ALGORITHM, EXAMPLES, EXIT STATUS, SEE ALSO, NOTES       \u2502\n\u2502  Config-First: All settings from config/settings.json               \u2502\n\u2502  Concrete, tested examples with expected output                     \u2502\n\u2502  Exit codes with recovery procedures                                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                \u2502\n                                \u2502 traces to\n                                \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  LAYER 3: Docstrings (in source code .py files)                     \u2502\n\u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u2502\n\u2502  Pure PEP 257 style: One-liner + Args + Returns + Raises            \u2502\n\u2502  PROHIBITED: Call Stack, Configuration, Algorithm, Examples         \u2502\n\u2502  REQUIRED: One-liner summary, Args, Returns, Raises                 \u2502\n\u2502  Optional Note pointing to manpage for implementation trace         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"governance/GovZero/gate5-architecture/#layer-details","title":"Layer Details","text":""},{"location":"governance/GovZero/gate5-architecture/#layer-1-operator-runbook","title":"Layer 1: Operator Runbook","text":"<p>File: <code>docs/user/operator_runbook.md</code></p> <p>Purpose: Entry point for operators. Provides the \"what\" and \"why\" of workflows.</p> <p>Contents:</p> <ul> <li>High-level workflow sequence</li> <li>Governance context (hot horizons, alignment, retention)</li> <li>Troubleshooting and cross-dataset coordination</li> <li>Pointers to manpages (never duplicates manpage content)</li> </ul>"},{"location":"governance/GovZero/gate5-architecture/#layer-2-manpage-directory","title":"Layer 2: Manpage Directory","text":"<p>Directory: <code>docs/user/manpages/</code></p> <p>Purpose: Unix-style command references. One file per workflow step.</p> <p>Required Sections:</p> Section Content NAME Command name and one-line summary SYNOPSIS Command syntax with options DESCRIPTION What the command does OPTIONS All flags and arguments IMPLEMENTATION TRACE Call stack with docstring summaries CONFIGURATION Settings from config/settings.json ALGORITHM Step-by-step logic (numbered) EXAMPLES Concrete, tested examples with expected output EXIT STATUS Exit codes and recovery procedures SEE ALSO Related manpages and docs NOTES Edge cases, caveats, version notes <p>IMPLEMENTATION TRACE format:</p> <pre><code>module.py :: function_name() \u2014 One-liner from docstring\n  \u251c\u2500\u2500 helper.py :: helper_func() \u2014 Helper one-liner\n  \u2514\u2500\u2500 utils.py :: utility_func() \u2014 Utility one-liner\n</code></pre>"},{"location":"governance/GovZero/gate5-architecture/#layer-3-docstrings","title":"Layer 3: Docstrings","text":"<p>Location: Source code <code>.py</code> files</p> <p>Style: Pure PEP 257</p> <p>Required:</p> <ul> <li>One-liner summary (sacred first line \u2014 shared with manpage)</li> <li>Args section</li> <li>Returns section</li> <li>Raises section</li> </ul> <p>Prohibited (goes in manpages instead):</p> <ul> <li>Call Stack</li> <li>Configuration</li> <li>Algorithm</li> <li>Examples</li> <li>Exit code tables</li> </ul>"},{"location":"governance/GovZero/gate5-architecture/#mirroring-strategy-no-duplication","title":"Mirroring Strategy (No Duplication)","text":"<p>Principle: Single source of truth for each piece of information.</p> Information Source of Truth Consumers Args/Returns/Raises Docstring Manpage abbreviates One-liner summary Docstring Manpage copies verbatim Algorithm Manpage Code implements Configuration config/settings.json Manpage documents Exit codes Manpage Code returns"},{"location":"governance/GovZero/gate5-architecture/#enforcement-hooks","title":"Enforcement Hooks","text":"Hook Purpose Threshold <code>validate-manpages</code> Every function in manpage IMPLEMENTATION TRACE exists in code 100% <code>sync-manpage-docstrings --check</code> One-liners match between code and manpage Exact match <code>interrogate -f 85</code> Docstring coverage \u226585% <code>test-manpage-examples</code> Extract bash from EXAMPLES, execute, verify exit codes All pass"},{"location":"governance/GovZero/gate5-architecture/#agent-workflow-heavy-lane","title":"Agent Workflow (Heavy Lane)","text":"<p>When implementing Heavy lane work:</p> <ol> <li>Update code \u2014 implementation + tests</li> <li>Update docstrings \u2014 pure PEP 257 (Args, Returns, Raises)</li> <li>Update manpage \u2014 IMPLEMENTATION TRACE, CONFIGURATION, ALGORITHM, EXAMPLES, EXIT STATUS</li> <li>Update operator_runbook.md \u2014 if workflow sequence or governance changes</li> <li>Run validation chores \u2014 before commit</li> </ol>"},{"location":"governance/GovZero/gate5-architecture/#gate-5-checklist","title":"Gate 5 Checklist","text":"<p>Every Heavy brief must satisfy:</p> <ul> <li>[ ] Operator runbook updated or confirmed current</li> <li>[ ] Manpage updated (IMPLEMENTATION TRACE, CONFIGURATION, ALGORITHM, EXAMPLES, EXIT STATUS)</li> <li>[ ] Docstrings updated (pure PEP 257: Args, Returns, Raises)</li> <li>[ ] Help text (argparse) reflects actual behavior</li> <li>[ ] Examples are concrete, accurate, executable</li> <li>[ ] Links/anchors validated (mkdocs build clean)</li> <li>[ ] Markdown lint clean</li> <li>[ ] Validation chores pass (validate-manpages, sync-manpage-docstrings --check, interrogate)</li> </ul>"},{"location":"governance/GovZero/gate5-architecture/#see-also","title":"See Also","text":"<ul> <li>GovZero Charter \u2014 Gate definitions</li> <li>Audit Protocol \u2014 Closeout ceremony procedure</li> <li>Runbook-Code Covenant \u2014 Binding instructions</li> </ul>"},{"location":"governance/GovZero/gzkit-structure/","title":".gzkit/ Directory Structure","text":"<p>Status: Active Last reviewed: 2026-02-11 Parent ADR: ADR-0.0.25 (Compounding Engineering &amp; Session Handoff Contract)</p>"},{"location":"governance/GovZero/gzkit-structure/#overview","title":"Overview","text":"<p><code>.gzkit/</code> (GovZero Kit) is the canonical root directory for GovZero governance ledgers and learning artifacts. It consolidates governance outputs that were previously scattered across <code>artifacts/</code> into a single, version-controlled location.</p>"},{"location":"governance/GovZero/gzkit-structure/#purpose","title":"Purpose","text":"<ul> <li>Centralized governance storage: Single root for all GovZero ledger files</li> <li>Compound engineering: Learning artifacts accumulate across sessions, enabling future work to build on past insights</li> <li>Git-tracked by default: All files in <code>.gzkit/</code> are version-controlled unless explicitly gitignored</li> <li>Append-only ledgers: JSONL files grow monotonically, preserving full audit history</li> </ul>"},{"location":"governance/GovZero/gzkit-structure/#directory-structure","title":"Directory Structure","text":"<pre><code>.gzkit/\n\u251c\u2500\u2500 README.md                          # Quick orientation\n\u251c\u2500\u2500 insights/                          # Agent insight ledgers\n\u2502   \u2514\u2500\u2500 agent-insights.jsonl           # Observations captured during work sessions\n\u2514\u2500\u2500 lessons/                           # Learning ledgers (compound engineering)\n    \u2514\u2500\u2500 (*.jsonl files added by future OBPIs)\n</code></pre>"},{"location":"governance/GovZero/gzkit-structure/#subdirectory-definitions","title":"Subdirectory Definitions","text":""},{"location":"governance/GovZero/gzkit-structure/#insights","title":"<code>insights/</code>","text":"<p>Agent observations captured automatically during work sessions. These are raw, unstructured insights harvested by hooks or recorded by agents during problem-solving.</p> File Description <code>agent-insights.jsonl</code> Observations from all agents across sessions"},{"location":"governance/GovZero/gzkit-structure/#lessons","title":"<code>lessons/</code>","text":"<p>Structured learning ledgers for compound engineering. Unlike raw insights, lessons are curated and categorized for future consumption. This directory is scaffolded by OBPI-0.0.25-02; learning ledger files will be populated by subsequent OBPIs in the ADR-0.0.25 series.</p>"},{"location":"governance/GovZero/gzkit-structure/#jsonl-conventions","title":"JSONL Conventions","text":"<p>All ledger files in <code>.gzkit/</code> follow these conventions:</p> Convention Rule Format JSONL (JSON Lines) \u2014 one JSON object per line Mutability Append-only \u2014 never edit or delete existing lines Encoding UTF-8, no BOM Timestamps ISO 8601 UTC (Z-suffixed preferred) Required fields <code>timestamp</code> at minimum; <code>type</code> for typed ledgers"},{"location":"governance/GovZero/gzkit-structure/#example-entry","title":"Example Entry","text":"<pre><code>{\"timestamp\": \"2026-02-11T14:30:00Z\", \"type\": \"insight\", \"category\": \"pattern\", \"insight\": \"Port adapters delegate all business logic to legacy ingest modules.\"}\n</code></pre> <p>For the full field specification of typed governance ledgers (obpi-audit, covers-map, etc.), see Unified Ledger Schema.</p>"},{"location":"governance/GovZero/gzkit-structure/#storage-conventions-adr-0025-decision-3","title":"Storage Conventions (ADR-0.0.25 Decision 3)","text":"<p>ADR-0.0.25 defines a storage architecture that splits artifacts by scope:</p> Artifact Type Location Rationale GovZero ledgers <code>.gzkit/</code> Repo-wide governance outputs Learning ledgers <code>.gzkit/lessons/</code> Cross-session compound learning Agent insights <code>.gzkit/insights/</code> Raw agent observations Session handoffs <code>{ADR-package}/handoffs/</code> Package-local, tied to specific ADR work ADR audit ledgers <code>{ADR-package}/logs/</code> Per-ADR OBPI audit trails <p><code>.gzkit/</code> holds repo-scoped artifacts. ADR-scoped artifacts (handoffs, per-ADR audit logs) remain in their ADR package directories.</p>"},{"location":"governance/GovZero/gzkit-structure/#relationship-to-artifacts","title":"Relationship to <code>artifacts/</code>","text":"<p>The <code>artifacts/</code> directory holds runtime outputs (databases, caches, logs) and is gitignored. <code>.gzkit/</code> is distinct:</p> Aspect <code>artifacts/</code> <code>.gzkit/</code> Git status Gitignored Tracked Content Runtime data (DB, cache) Governance ledgers Mutability Read/write Append-only Lifecycle Ephemeral, regenerable Permanent audit trail <p>Migration of existing GovZero outputs (agent-insights.jsonl) from root to <code>.gzkit/</code> was completed by OBPI-0.0.25-09.</p>"},{"location":"governance/GovZero/gzkit-structure/#references","title":"References","text":"<ul> <li>ADR-0.0.25 \u2014 Parent ADR</li> <li>Unified Ledger Schema \u2014 JSONL field definitions and validation API</li> <li>Layered Trust Architecture \u2014 Tool layer model and boundaries</li> <li>GovZero Charter \u2014 Gate definitions and authority</li> </ul>"},{"location":"governance/GovZero/handoff-chaining/","title":"Handoff Chaining","text":""},{"location":"governance/GovZero/handoff-chaining/#handoff-document-chaining-protocol","title":"Handoff Document Chaining Protocol","text":"<p>Status: Active Last reviewed: 2026-02-12 Parent ADR: ADR-0.0.25 (Compounding Engineering &amp; Session Handoff Contract) OBPI: OBPI-0.0.25-07</p>"},{"location":"governance/GovZero/handoff-chaining/#overview","title":"Overview","text":"<p>Session handoff documents can form chains that preserve context lineage across multiple engineering sessions. Each document may declare a <code>continues_from</code> field in its YAML frontmatter pointing to its predecessor. By following these links, an agent can reconstruct the full history of decisions and context for long-running work.</p> <p>The chaining protocol defines the link format, traversal rules, and integrity checks that ensure chains remain reliable and navigable.</p>"},{"location":"governance/GovZero/handoff-chaining/#link-format","title":"Link Format","text":"<p>The <code>continues_from</code> field uses a canonical relative path from the repository root:</p> <pre><code>continues_from: \"{ADR-package}/handoffs/{previous-handoff}.md\"\n</code></pre>"},{"location":"governance/GovZero/handoff-chaining/#valid-examples","title":"Valid Examples","text":"Value Description <code>ADR-0.0.25-session-handoff/handoffs/20260210T120000Z-session.md</code> Full canonical path <code>ADR-1.2.3-my-feature/handoffs/initial-handoff.md</code> Different ADR package"},{"location":"governance/GovZero/handoff-chaining/#invalid-examples","title":"Invalid Examples","text":"Value Reason <code>previous-session.md</code> Bare filename, no path structure <code>ADR-0.0.25-slug/previous.md</code> Missing <code>/handoffs/</code> directory <code>ADR-0.0.25-slug/handoffs/session.txt</code> Non-<code>.md</code> extension <code>some-dir/handoffs/session.md</code> Missing <code>ADR-X.Y.Z-</code> prefix (empty) Leave empty for chain root (first handoff) <p>The format is validated by the regex pattern:</p> <pre><code>^ADR-\\d+\\.\\d+\\.\\d+-[\\w-]+/handoffs/[\\w.-]+\\.md$\n</code></pre>"},{"location":"governance/GovZero/handoff-chaining/#chain-traversal-rules","title":"Chain Traversal Rules","text":"<ol> <li>Start from the newest handoff document</li> <li>Read its <code>continues_from</code> field from YAML frontmatter</li> <li>Resolve the path relative to the repository root</li> <li>Follow the predecessor \u2014 read its frontmatter, repeat</li> <li>Stop when a document has no <code>continues_from</code> (chain root)</li> <li>Return oldest-first \u2014 reverse the collected chain for chronological order</li> </ol>"},{"location":"governance/GovZero/handoff-chaining/#termination-conditions","title":"Termination Conditions","text":"Condition Behavior No <code>continues_from</code> field Stop \u2014 chain root reached <code>continues_from</code> is empty Stop \u2014 chain root reached Predecessor file not found Stop \u2014 record error Circular reference detected Stop \u2014 record error Depth limit reached (20) Stop \u2014 record error"},{"location":"governance/GovZero/handoff-chaining/#chain-integrity-checks","title":"Chain Integrity Checks","text":"<p>The <code>check_chain_integrity()</code> function validates a chain and returns a <code>ChainIntegrityResult</code> with categorized findings.</p>"},{"location":"governance/GovZero/handoff-chaining/#errors-hard-failures","title":"Errors (Hard Failures)","text":"<p>Errors make the chain invalid (<code>is_valid = False</code>):</p> Check Condition Error Message Format <code>continues_from</code> doesn't match canonical pattern <code>Invalid continues_from format: ...</code> Existence Predecessor file does not exist on disk <code>Predecessor file not found: ...</code> Circular reference A document appears twice in traversal <code>Circular reference detected at ...</code> Depth limit Chain reaches 20 documents <code>Chain depth 20 reaches limit of 20</code>"},{"location":"governance/GovZero/handoff-chaining/#warnings-soft-advisories","title":"Warnings (Soft Advisories)","text":"<p>Warnings do not invalidate the chain (<code>is_valid = True</code>):</p> Check Condition Warning Message Depth advisory Chain exceeds 5 documents <code>Chain depth N exceeds advisory threshold of 5</code>"},{"location":"governance/GovZero/handoff-chaining/#data-types","title":"Data Types","text":""},{"location":"governance/GovZero/handoff-chaining/#chainintegrityresult","title":"ChainIntegrityResult","text":"<p>Frozen dataclass returned by <code>check_chain_integrity()</code>:</p> Field Type Description <code>chain</code> <code>list[Path]</code> Handoff paths, oldest to newest <code>errors</code> <code>list[str]</code> Hard failures <code>warnings</code> <code>list[str]</code> Soft advisories <code>is_valid</code> <code>bool</code> (property) <code>True</code> when <code>len(errors) == 0</code>"},{"location":"governance/GovZero/handoff-chaining/#constants","title":"Constants","text":"Constant Value Purpose <code>_CHAIN_DEPTH_LIMIT</code> <code>20</code> Maximum chain length before hard error <code>_CHAIN_DEPTH_WARNING</code> <code>5</code> Advisory threshold for chain depth <code>_CONTINUES_FROM_RE</code> regex Canonical format validation pattern"},{"location":"governance/GovZero/handoff-chaining/#see-also","title":"See Also","text":"<ul> <li>Handoff Document Validation \u2014 Document-level validation checks</li> <li>Staleness Classification \u2014 Multi-factor staleness system</li> <li>Session Handoff Schema \u2014 Schema specification</li> <li>ADR-0.0.25 \u2014 Architecture decision record</li> <li>Tests: <code>tests/governance/test_handoff_chaining.py</code></li> </ul>"},{"location":"governance/GovZero/handoff-validation/","title":"Handoff Validation","text":""},{"location":"governance/GovZero/handoff-validation/#handoff-document-validation","title":"Handoff Document Validation","text":"<p>Status: Active Last reviewed: 2026-02-12 Parent ADR: ADR-0.0.25 (Compounding Engineering &amp; Session Handoff Contract) OBPI: OBPI-0.0.25-06</p>"},{"location":"governance/GovZero/handoff-validation/#overview","title":"Overview","text":"<p>Session handoff documents must be validated before they can serve as reliable context for agent resume workflows. The validation module implements a fail-closed philosophy: every check returns a list of violations, and only an empty list means the document is clean.</p> <p>Six validation checks run in sequence, with errors accumulated (not short-circuited) so that a single pass reveals all issues.</p>"},{"location":"governance/GovZero/handoff-validation/#validation-checks","title":"Validation Checks","text":""},{"location":"governance/GovZero/handoff-validation/#1-frontmatter-parsing","title":"1. Frontmatter Parsing","text":"<p>Extracts YAML frontmatter delimited by <code>---</code> markers. Validates:</p> <ul> <li>Opening and closing <code>---</code> delimiters are present</li> <li>YAML is syntactically valid</li> <li>Content is a YAML mapping (not a list or scalar)</li> </ul>"},{"location":"governance/GovZero/handoff-validation/#2-frontmatter-schema","title":"2. Frontmatter Schema","text":"<p>Validates the parsed frontmatter against <code>HandoffFrontmatter</code> (Pydantic model):</p> Field Type Validation <code>mode</code> <code>\"CREATE\"</code> or <code>\"RESUME\"</code> Literal enum <code>adr_id</code> string Matches <code>ADR-X.Y.Z</code> <code>branch</code> string Required, non-empty <code>timestamp</code> string ISO 8601 parseable <code>agent</code> string Required, non-empty <code>obpi_id</code> string or null Matches <code>OBPI-X.Y.Z-NN</code> <code>session_id</code> string or null Optional <code>continues_from</code> string or null Optional <p>Extra fields are forbidden (<code>extra=\"forbid\"</code>). Model is frozen (immutable after creation).</p>"},{"location":"governance/GovZero/handoff-validation/#3-placeholder-detection","title":"3. Placeholder Detection","text":"<p>Scans the document body (frontmatter stripped, HTML comments removed) for placeholder markers:</p> Pattern Examples <code>TBD</code> \"TBD\", \"tbd\" <code>TODO</code> \"TODO: finish this\" <code>FIXME</code> \"FIXME later\" <code>PLACEHOLDER</code> \"PLACEHOLDER value\" <code>XXX</code> \"XXX needs work\" <code>CHANGEME</code> \"CHANGEME\" <code>...</code> (standalone) Ellipsis on its own line <p>Detection is case-insensitive and uses word boundaries to avoid false positives within longer words.</p>"},{"location":"governance/GovZero/handoff-validation/#4-secret-detection","title":"4. Secret Detection","text":"<p>Scans full content for potential leaked credentials:</p> Pattern Matches <code>password=</code> Password assignments <code>secret=</code> Secret assignments <code>token=</code> Token assignments <code>api_key=</code> API key assignments <code>Bearer &lt;token&gt;</code> Authorization headers <code>PRIVATE KEY</code> PEM key blocks <code>sk-&lt;20+ chars&gt;</code> OpenAI API keys <code>ghp_&lt;20+ chars&gt;</code> GitHub personal access tokens <p>The <code>sk-</code> and <code>ghp_</code> patterns use negative lookbehind <code>(?&lt;![a-zA-Z])</code> to avoid false positives (e.g., <code>task-management</code> does not match <code>sk-</code>).</p>"},{"location":"governance/GovZero/handoff-validation/#5-required-sections","title":"5. Required Sections","text":"<p>Verifies all seven required <code>##</code> section headings are present:</p> <ol> <li>Current State Summary</li> <li>Important Context</li> <li>Decisions Made</li> <li>Immediate Next Steps</li> <li>Pending Work / Open Loops</li> <li>Verification Checklist</li> <li>Evidence / Artifacts</li> </ol> <p>Optional sections (e.g., \"Environment State\") are not checked.</p>"},{"location":"governance/GovZero/handoff-validation/#6-referenced-file-existence","title":"6. Referenced File Existence","text":"<p>In the \"Evidence / Artifacts\" section, backtick-quoted strings that look like file paths (contain <code>/</code> or <code>.</code>) are resolved against the repository root. Missing files are reported.</p> <p>Heuristics skip non-path content:</p> <ul> <li>Strings starting with <code>-</code>, <code>$</code>, <code>uv</code>, <code>git</code> (commands)</li> <li>Strings without <code>/</code> or <code>.</code> (variable names, not paths)</li> </ul>"},{"location":"governance/GovZero/handoff-validation/#python-api","title":"Python API","text":"<pre><code>from pathlib import Path\n\nfrom gzkit.validate import extract_headers, parse_frontmatter\n\ncontent = Path(\"handoffs/session.md\").read_text()\nfrontmatter, body = parse_frontmatter(content)\nheaders = extract_headers(body)\n\nprint(frontmatter.get(\"schema\"))\nprint(headers)\n</code></pre>"},{"location":"governance/GovZero/handoff-validation/#operational-validation","title":"Operational Validation","text":"<pre><code># Validate governance documents and surfaces\nuv run gz validate --documents --surfaces\n\n# Run interactive handoff interview flow\nuv run gz interview handoff\n</code></pre>"},{"location":"governance/GovZero/handoff-validation/#constants","title":"Constants","text":"Constant Value Purpose <code>HANDOFF_SCHEMA_VERSION</code> <code>\"govzero.handoff.v1\"</code> Schema version identifier <code>REQUIRED_SECTIONS</code> 7-element tuple Required <code>##</code> section headings"},{"location":"governance/GovZero/handoff-validation/#error-handling","title":"Error Handling","text":"<ul> <li><code>HandoffValidationError</code> is raised by <code>parse_frontmatter()</code> for structural issues (missing delimiters, invalid YAML)</li> <li><code>pydantic.ValidationError</code> is raised by <code>HandoffFrontmatter</code> for schema violations</li> <li><code>validate_handoff_document()</code> catches both and returns them as strings in the error list</li> <li>All other validators return <code>list[str]</code> \u2014 empty means clean, non-empty lists the violations</li> </ul>"},{"location":"governance/GovZero/handoff-validation/#see-also","title":"See Also","text":"<ul> <li>Session Handoff Schema -- Schema specification</li> <li>Staleness Classification -- Multi-factor staleness system</li> <li>ADR-0.0.25 -- Architecture decision record</li> <li>Sources: <code>src/gzkit/validate.py</code>, <code>src/gzkit/interview.py</code></li> <li>Tests: <code>tests/governance/test_handoff_validation.py</code></li> </ul>"},{"location":"governance/GovZero/layered-trust/","title":"GovZero Layered Trust Architecture","text":"<p>Status: Active Last reviewed: 2026-01-29 Parent ADR: ADR-0.0.21 (GovZero Tooling Layered Trust Architecture)</p>"},{"location":"governance/GovZero/layered-trust/#overview","title":"Overview","text":"<p>GovZero tooling follows a layered trust architecture where tools are organized by their relationship to evidence:</p> <ul> <li>Layer 1 tools gather evidence and write proof to the ledger</li> <li>Layer 2 tools consume ledger entries and trust them as proof</li> <li>Layer 3 tools synchronize files without verification</li> </ul> <p>This separation enables cross-verification (tools check each other's work) and creates an audit trail (ledger entries are receipts).</p>"},{"location":"governance/GovZero/layered-trust/#the-three-layers","title":"The Three Layers","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  LAYER 1: Evidence Gathering                                        \u2502\n\u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500                                        \u2502\n\u2502  Tools: gz-obpi-audit, gz-adr-verification, coverage reporters      \u2502\n\u2502  Action: Run tests, measure coverage, verify criteria               \u2502\n\u2502  Output: Ledger entries (proof)                                     \u2502\n\u2502  Trust: Trusts nothing \u2014 verifies everything                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                \u2502\n                                \u2502 writes\n                                \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        JSONL LEDGER FILES                           \u2502\n\u2502              logs/obpi-audit.jsonl, covers-map.jsonl                \u2502\n\u2502                    (structured proof records)                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                \u2502\n                                \u2502 reads\n                                \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  LAYER 2: Ledger Consumption                                        \u2502\n\u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500                                        \u2502\n\u2502  Tools: gz-obpi-reconcile, gz-adr-recon, gz-adr-audit               \u2502\n\u2502  Action: Read ledger, update metadata, generate reports             \u2502\n\u2502  Output: Updated briefs, ADR tables, audit reports                  \u2502\n\u2502  Trust: Trusts ledger entries \u2014 does NOT re-verify                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                \u2502\n                                \u2502 updates\n                                \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  LAYER 3: File Synchronization                                      \u2502\n\u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500                                       \u2502\n\u2502  Tools: gz-adr-sync, gz-obpi-sync                                   \u2502\n\u2502  Action: Sync index files from source files                         \u2502\n\u2502  Output: adr_index.md, adr_status.md                                \u2502\n\u2502  Trust: Trusts file content \u2014 no verification                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"governance/GovZero/layered-trust/#layer-1-evidence-gathering","title":"Layer 1: Evidence Gathering","text":"<p>Purpose: Verify actual work and record proof.</p> <p>Principle: Trust nothing. Run the tests. Measure the coverage. Check the code.</p> Tool What It Verifies Ledger Entry Type <code>gz-obpi-audit</code> Brief acceptance criteria vs evidence <code>obpi-audit</code> <code>gz-adr-verification</code> @covers tags \u2192 test mapping <code>covers-map</code> Coverage reporters Module coverage vs threshold <code>coverage-run</code> <p>Workflow: Read source artifacts \u2192 Execute verification \u2192 Write ledger entry \u2192 Do NOT update metadata files</p> <pre><code># Example: gz-obpi-audit verifies a brief and writes ledger entry\n/gz-obpi-audit OBPI-0.0.19-03\n\n# Output: ledger entry in logs/obpi-audit.jsonl\n{\"type\": \"obpi-audit\", \"obpi_id\": \"OBPI-0.0.19-03\", \"criteria_evaluated\": [...], ...}\n</code></pre>"},{"location":"governance/GovZero/layered-trust/#layer-2-ledger-consumption","title":"Layer 2: Ledger Consumption","text":"<p>Purpose: Update metadata based on verified proof.</p> <p>Principle: Trust the ledger. If Layer 1 said it passed, it passed.</p> Tool What It Updates Ledger Entry Consumed <code>gz-obpi-reconcile</code> Brief files (Status, checkboxes) <code>obpi-audit</code> <code>gz-adr-recon</code> ADR OBPI tables <code>obpi-audit</code>, <code>reconciliation</code> <code>gz-adr-audit</code> Audit reports, attestation All entry types <p>Workflow: Read ledger \u2192 Trust results (no re-verification) \u2192 Update metadata \u2192 Write summary entry</p> <pre><code># Example: gz-obpi-reconcile reads ledger, fixes stale briefs\n/gz-obpi-reconcile ADR-0.0.19\n\n# Reads: logs/obpi-audit.jsonl\n# Updates: briefs/OBPI-0.0.19-*.md (Status, checkboxes)\n# Does NOT update: ADR OBPI table (that's gz-adr-recon's job)\n</code></pre>"},{"location":"governance/GovZero/layered-trust/#layer-3-file-synchronization","title":"Layer 3: File Synchronization","text":"<p>Purpose: Keep index files in sync with source files.</p> <p>Principle: Read file metadata, update indexes. No verification.</p> Tool Source Target <code>gz-adr-sync</code> ADR files adr_index.md, adr_status.md <code>gz-obpi-sync</code> Brief files ADR OBPI table <code>gz-adr-manager</code> User input New ADR + briefs <code>gz-obpi-brief</code> User input New OBPI brief <p>Workflow: Read source file metadata \u2192 Update target index \u2192 No verification (trusts content as-is)</p> <p>Layer 3 vs Layer 2 for OBPI Table Sync:</p> <p>Two tools can update the ADR OBPI table:</p> Tool Layer Source Use Case <code>gz-adr-recon</code> 2 Ledger entries Proof-based sync (preferred) <code>gz-obpi-sync</code> 3 Brief file <code>Status:</code> field Bootstrapping, quick sync (no proof) <p>When to use Layer 3 (<code>gz-obpi-sync</code>):</p> <ul> <li>Bootstrapping a new ADR before any ledger exists</li> <li>Quick status check without full audit overhead</li> <li>Legacy ADR cleanup where briefs are already marked</li> </ul> <p>When to use Layer 2 (<code>gz-adr-recon</code>):</p> <ul> <li>Pre-closeout verification (audit trail required)</li> <li>Multi-agent sessions (ledger is single source of truth)</li> <li>Compliance workflows (proof required for attestation)</li> </ul>"},{"location":"governance/GovZero/layered-trust/#tool-boundaries","title":"Tool Boundaries","text":"Tool Layer Reads Writes Does NOT Touch gz-obpi-audit 1 Code, tests, briefs Ledger Brief files, ADR table gz-adr-verification 1 Tests (@covers) Ledger ADR files gz-obpi-reconcile 2 Ledger, briefs Brief files, ledger ADR OBPI table gz-adr-recon 2 Ledger ADR OBPI table Brief files gz-adr-audit 2 Ledger Audit report Source files gz-adr-sync 3 ADR files Index files Ledger gz-obpi-sync 3 Brief files ADR OBPI table Ledger"},{"location":"governance/GovZero/layered-trust/#when-to-use-each-tool","title":"When to Use Each Tool","text":"Scenario Tool Layer \"Did this brief's work get done?\" gz-obpi-audit 1 \"Which tests cover this ADR?\" gz-adr-verification 1 \"Update stale brief metadata\" gz-obpi-reconcile 2 \"Sync ADR table from ledger (proof-based)\" gz-adr-recon 2 \"Prepare for closeout ceremony\" gz-adr-audit 2 \"Update ADR index after status change\" gz-adr-sync 3 \"Quick ADR table sync (no proof)\" gz-obpi-sync 3"},{"location":"governance/GovZero/layered-trust/#common-workflows","title":"Common Workflows","text":"<p>Before closeout ceremony:</p> <pre><code>1. gz-obpi-audit (Layer 1) \u2014 verify each brief, write ledger\n2. gz-obpi-reconcile (Layer 2) \u2014 fix stale briefs from ledger\n3. gz-adr-recon (Layer 2) \u2014 sync ADR table from ledger\n4. gz-adr-audit (Layer 2) \u2014 generate audit report for attestation\n</code></pre> <p>After completing work on a brief:</p> <pre><code>1. gz-obpi-audit (Layer 1) \u2014 verify the brief, write ledger\n2. gz-obpi-reconcile (Layer 2) \u2014 update brief Status if criteria pass\n</code></pre>"},{"location":"governance/GovZero/layered-trust/#design-principles","title":"Design Principles","text":""},{"location":"governance/GovZero/layered-trust/#1-ledger-is-the-api","title":"1. Ledger Is the API","text":"<p>Tools communicate via ledger entries, not direct calls. Layer 1 writes; Layer 2 reads.</p>"},{"location":"governance/GovZero/layered-trust/#2-verification-happens-once","title":"2. Verification Happens Once","text":"<p>Layer 1 verifies. Layer 2 trusts the verification. No re-running tests in Layer 2.</p>"},{"location":"governance/GovZero/layered-trust/#3-clear-ownership","title":"3. Clear Ownership","text":"<ul> <li>OBPI tools own brief-level concerns</li> <li>ADR tools own ADR-level concerns</li> <li>No tool reaches across boundaries</li> </ul>"},{"location":"governance/GovZero/layered-trust/#4-audit-trail","title":"4. Audit Trail","text":"<p>Every verification produces a ledger entry. The trail is the proof.</p>"},{"location":"governance/GovZero/layered-trust/#skill-file-annotations","title":"Skill File Annotations","text":"<p>Each skill's SKILL.md includes a <code>govzero_layer</code> metadata field:</p> <pre><code>metadata:\n  govzero_layer: \"Layer 1 \u2014 Evidence Gathering\"\n  # or\n  govzero_layer: \"Layer 2 \u2014 Ledger Consumption\"\n  # or\n  govzero_layer: \"Layer 3 \u2014 File Sync\"\n</code></pre> <p>Canonical values:</p> Value Meaning <code>\"Layer 1 \u2014 Evidence Gathering\"</code> Verifies work, writes proof to ledger <code>\"Layer 2 \u2014 Ledger Consumption\"</code> Reads ledger, trusts proof, updates metadata <code>\"Layer 3 \u2014 File Sync\"</code> Syncs files without verification <p>Prose requirement: Each skill should also include a description section (e.g., <code>## Trust Model</code> or <code>**Layer:**</code> callout) explaining the layer behavior in human terms.</p> <p>This makes the architecture explicit and machine-readable.</p>"},{"location":"governance/GovZero/layered-trust/#see-also","title":"See Also","text":"<ul> <li>Ledger Schema \u2014 JSONL entry format specifications</li> <li>GovZero Charter \u2014 Gate definitions and authority</li> <li>ADR-0.0.21 \u2014 Architecture decision record</li> <li>Audit Protocol \u2014 Closeout ceremony procedure</li> </ul>"},{"location":"governance/GovZero/ledger-schema/","title":"GovZero Unified Ledger Schema","text":"<p>Status: Active Last reviewed: 2026-01-29 Schema version: <code>govzero.ledger.v1</code> Parent ADR: ADR-0.0.21 (GovZero Tooling Layered Trust Architecture)</p>"},{"location":"governance/GovZero/ledger-schema/#overview","title":"Overview","text":"<p>The GovZero unified ledger schema defines a standardized JSONL format for all Layer 1 governance tool outputs. This enables Layer 2 tools to reliably consume structured evidence from multiple sources.</p>"},{"location":"governance/GovZero/ledger-schema/#purpose","title":"Purpose","text":"<ul> <li>Machine-readable evidence: All governance operations produce structured, parseable records</li> <li>Discriminated union: Type-safe parsing using the <code>type</code> field as discriminator</li> <li>Backward compatibility: Legacy entries without <code>type</code> field are auto-detected</li> <li>Extensibility: Evidence payloads allow custom fields for domain-specific data</li> </ul>"},{"location":"governance/GovZero/ledger-schema/#architecture","title":"Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     Layer 2 Tools                       \u2502\n\u2502  (gz-adr-audit, dashboards, compliance reports)         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                          \u25b2\n                          \u2502 consumes\n                          \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   JSONL Ledger Files                    \u2502\n\u2502     obpi-audit.jsonl, covers-map.jsonl, etc.            \u2502\n\u2502                (unified schema)                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                          \u25b2\n                          \u2502 produces\n                          \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     Layer 1 Tools                       \u2502\n\u2502  gz-obpi-audit, gz-obpi-sync, gz-adr-verification       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#entry-types","title":"Entry Types","text":"Type Description Source Tool <code>obpi-audit</code> OBPI brief status audit results gz-obpi-audit <code>covers-map</code> ADR \u2192 test mapping from @covers gz-adr-verification <code>coverage-run</code> Module coverage measurement coverage reporter <code>reconciliation</code> Reconciliation session summary gz-obpi-reconcile"},{"location":"governance/GovZero/ledger-schema/#common-fields","title":"Common Fields","text":"<p>All entry types share these base fields:</p> Field Type Required Description <code>type</code> string Yes* Entry type discriminator <code>timestamp</code> string Yes ISO 8601 UTC timestamp (Z-suffixed) <code>schema_version</code> string No Schema version (default: <code>govzero.ledger.v1</code>) <code>agent</code> string No Agent that created the entry <code>session_id</code> string No Session identifier for grouping <p>*Legacy entries may omit <code>type</code>; it is inferred from content.</p>"},{"location":"governance/GovZero/ledger-schema/#entry-schemas","title":"Entry Schemas","text":""},{"location":"governance/GovZero/ledger-schema/#obpi-audit","title":"obpi-audit","text":"<p>Records the evaluation of an OBPI brief's acceptance criteria.</p> <pre><code>{\n  \"type\": \"obpi-audit\",\n  \"timestamp\": \"2026-01-26T14:45:00Z\",\n  \"obpi_id\": \"OBPI-0.0.19-03\",\n  \"adr_id\": \"ADR-0.0.19\",\n  \"brief_status_before\": \"Accepted\",\n  \"brief_status_after\": \"Completed\",\n  \"lane\": \"Lite\",\n  \"evidence\": {\n    \"tests_found\": [\"tests/warehouse/test_manifest_purity.py\"],\n    \"tests_passed\": true,\n    \"test_count\": 10,\n    \"coverage_module\": \"src/airlineops/warehouse/manifest.py\",\n    \"coverage_percent\": 46.05,\n    \"coverage_threshold\": 40\n  },\n  \"criteria_evaluated\": [\n    {\n      \"criterion\": \"Coverage \u226540%\",\n      \"result\": \"PASS\",\n      \"evidence\": \"46.05% achieved\"\n    }\n  ],\n  \"action_taken\": \"brief_updated\",\n  \"agent\": \"claude-code\",\n  \"session_id\": \"2026-01-26-obpi-status-session\"\n}\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#obpi-audit-fields","title":"obpi-audit Fields","text":"Field Type Required Description <code>obpi_id</code> string Yes OBPI identifier (format: <code>OBPI-X.Y.Z-NN</code>) <code>adr_id</code> string Yes Parent ADR identifier (format: <code>ADR-X.Y.Z</code>) <code>brief_status_before</code> BriefStatus No* Status before audit (verbose format) <code>brief_status_after</code> BriefStatus No* Status after audit (verbose format) <code>brief_status</code> BriefStatus No* Current status (compact format) <code>lane</code> Lane No Lane type (Lite or Heavy) <code>evidence</code> object No Evidence payload (structured or raw dict) <code>evidence_verified</code> boolean No Whether evidence was verified <code>criteria_evaluated</code> array No Per-criterion evaluation results <code>action_taken</code> AuditAction No Action taken during audit <code>description</code> string No Description for created briefs <code>gap</code> string No Gap description if incomplete <code>test_evidence</code> string No Compact test evidence string <p>*At least one status field is required (verbose or compact).</p>"},{"location":"governance/GovZero/ledger-schema/#status-formats","title":"Status Formats","text":"<p>Verbose format (status transition):</p> <pre><code>{\n  \"brief_status_before\": \"Accepted\",\n  \"brief_status_after\": \"Completed\"\n}\n</code></pre> <p>Compact format (current state):</p> <pre><code>{\n  \"brief_status\": \"Completed\"\n}\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#covers-map","title":"covers-map","text":"<p>Records the mapping between an ADR and its covering tests.</p> <pre><code>{\n  \"type\": \"covers-map\",\n  \"timestamp\": \"2026-01-26T14:45:00Z\",\n  \"adr_id\": \"ADR-0.0.19\",\n  \"tests\": [\n    \"tests/warehouse/test_manifest_purity.py::TestManifestPurity\",\n    \"tests/core/test_registrar_invariants.py::TestRegistrarInvariants\"\n  ],\n  \"coverage_pct\": 46.5\n}\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#covers-map-fields","title":"covers-map Fields","text":"Field Type Required Description <code>adr_id</code> string Yes ADR identifier (format: <code>ADR-X.Y.Z</code>) <code>tests</code> array No Test file/class paths covering this ADR <code>coverage_pct</code> number No Coverage percentage (0-100)"},{"location":"governance/GovZero/ledger-schema/#coverage-run","title":"coverage-run","text":"<p>Records module-level coverage measurement results.</p> <pre><code>{\n  \"type\": \"coverage-run\",\n  \"timestamp\": \"2026-01-26T14:45:00Z\",\n  \"module\": \"src/airlineops/warehouse/manifest.py\",\n  \"percent\": 46.05,\n  \"threshold\": 40,\n  \"result\": \"PASS\"\n}\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#coverage-run-fields","title":"coverage-run Fields","text":"Field Type Required Description <code>module</code> string Yes Module path <code>percent</code> number Yes Coverage percentage achieved (0-100) <code>threshold</code> number Yes Coverage threshold required (0-100) <code>result</code> CoverageResult Yes Pass/fail result"},{"location":"governance/GovZero/ledger-schema/#reconciliation","title":"reconciliation","text":"<p>Records summary of a reconciliation session.</p> <pre><code>{\n  \"type\": \"reconciliation\",\n  \"timestamp\": \"2026-01-26T23:15:00Z\",\n  \"reconciliation_session\": \"gz-obpi-reconcile\",\n  \"adr_id\": \"ADR-0.0.19\",\n  \"phase\": \"full_reconciliation\",\n  \"briefs_audited\": 12,\n  \"pre_sync_drift\": 0,\n  \"completed_count\": 10,\n  \"accepted_count\": 2,\n  \"agent\": \"claude-code\"\n}\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#reconciliation-fields","title":"reconciliation Fields","text":"Field Type Required Description <code>reconciliation_session</code> string Yes Session identifier <code>adr_id</code> string Yes ADR identifier being reconciled <code>phase</code> string Yes Reconciliation phase <code>briefs_audited</code> integer No Number of briefs audited <code>pre_sync_drift</code> integer No Drift count before sync <code>completed_count</code> integer No Number of completed briefs <code>accepted_count</code> integer No Number of accepted briefs"},{"location":"governance/GovZero/ledger-schema/#type-definitions","title":"Type Definitions","text":""},{"location":"governance/GovZero/ledger-schema/#briefstatus","title":"BriefStatus","text":"<p>Valid ADR/OBPI status values (canonical per GovZero lifecycle):</p> <pre><code>Pool | Draft | Proposed | Accepted | Completed | Validated | Superseded | Abandoned\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#auditresult","title":"AuditResult","text":"<p>Criterion evaluation results:</p> <pre><code>PASS | FAIL | PARTIAL | DEFERRED | UNKNOWN\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#lane","title":"Lane","text":"<p>Validation lane types:</p> <pre><code>Lite | Heavy\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#auditaction","title":"AuditAction","text":"<p>Actions taken during audit:</p> <pre><code>none | brief_updated | created | status_corrected\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#coverageresult","title":"CoverageResult","text":"<p>Coverage threshold comparison:</p> <pre><code>PASS | FAIL\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#legacy-compatibility","title":"Legacy Compatibility","text":"<p>Entries created before schema unification may lack the <code>type</code> field. The schema auto-detects entry type from content:</p> Content Pattern Inferred Type <code>obpi_id</code> + <code>adr_id</code> present <code>obpi-audit</code> <code>reconciliation_session</code> present <code>reconciliation</code> <p>New entries MUST include the <code>type</code> field.</p>"},{"location":"governance/GovZero/ledger-schema/#validation-api","title":"Validation API","text":""},{"location":"governance/GovZero/ledger-schema/#python","title":"Python","text":"<pre><code>from pathlib import Path\n\nfrom gzkit.validate import validate_ledger\n\nerrors = validate_ledger(Path(\".gzkit/ledger.jsonl\"))\nif errors:\n    for error in errors:\n        print(error.message)\nelse:\n    print(\"Ledger is valid.\")\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#creating-entries","title":"Creating Entries","text":"<pre><code>from gzkit.ledger import gate_checked_event\n\nentry = gate_checked_event(\n    adr_id=\"ADR-0.3.0\",\n    gate=2,\n    status=\"pass\",\n    command=\"uv run gz test\",\n    returncode=0,\n)\n\n# Serialize to JSON for JSONL append\nline = entry.to_dict()\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#ledger-file-locations","title":"Ledger File Locations","text":"<p>Ledgers are stored per-ADR in the ADR-contained folder structure:</p> <pre><code>docs/design/adr/{series}/ADR-{id}-{slug}/logs/obpi-audit.jsonl\n</code></pre> <p>Example:</p> <pre><code>docs/design/adr/adr-0.0.x/ADR-0.0.19-AIRAC-orchestrated-warehouse-pipeline/logs/obpi-audit.jsonl\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#extensibility","title":"Extensibility","text":""},{"location":"governance/GovZero/ledger-schema/#custom-evidence-fields","title":"Custom Evidence Fields","text":"<p>The <code>evidence</code> field in <code>obpi-audit</code> entries accepts arbitrary additional fields:</p> <pre><code>{\n  \"evidence\": {\n    \"tests_found\": [\"tests/foo.py\"],\n    \"tests_passed\": true,\n    \"custom_metric\": 42,\n    \"domain_specific_data\": {\"key\": \"value\"}\n  }\n}\n</code></pre>"},{"location":"governance/GovZero/ledger-schema/#new-entry-types","title":"New Entry Types","text":"<p>To add a new entry type:</p> <ol> <li>Create a new model class inheriting from <code>LedgerEntryBase</code></li> <li>Add <code>type: Literal[\"new-type\"]</code> as discriminator</li> <li>Add to <code>LedgerEntry</code> union type</li> <li>Update <code>model_map</code> in validation functions</li> <li>Add tests in <code>tests/governance/test_ledger_schema.py</code></li> <li>Document in this file</li> </ol>"},{"location":"governance/GovZero/ledger-schema/#see-also","title":"See Also","text":"<ul> <li>Layered Trust Architecture \u2014 Tool layer model and boundaries</li> <li>ADR-0.0.21 \u2014 Architecture decision record</li> <li>GovZero Charter \u2014 Gate definitions and authority</li> <li>ADR Lifecycle \u2014 Status transitions</li> <li>Python modules: <code>src/gzkit/validate.py</code>, <code>src/gzkit/ledger.py</code></li> </ul>"},{"location":"governance/GovZero/session-handoff-obligations/","title":"Session Handoff Obligations","text":""},{"location":"governance/GovZero/session-handoff-obligations/#agent-session-handoff-obligations","title":"Agent Session Handoff Obligations","text":"<p>Status: Active Last reviewed: 2026-02-13 Parent ADR: ADR-0.0.25 (Compounding Engineering &amp; Session Handoff Contract) OBPI: OBPI-0.0.25-08</p>"},{"location":"governance/GovZero/session-handoff-obligations/#overview","title":"Overview","text":"<p>This document codifies the behavioral contract that binds all AI coding agents operating under GovZero governance to use the session handoff mechanism correctly. These obligations apply to every agent listed in the Agent Profiles table of <code>AGENTS.md</code> \u2014 Claude Code, Codex, and GitHub Copilot.</p> <p>The handoff system preserves engineering context across sessions. Without normative rules, agents may silently drop context, skip handoffs, or resume on stale state. These obligations close those gaps.</p>"},{"location":"governance/GovZero/session-handoff-obligations/#proactive-triggers","title":"Proactive Triggers","text":""},{"location":"governance/GovZero/session-handoff-obligations/#must-create-a-handoff-when","title":"MUST Create a Handoff When","text":"<ol> <li>Session ending with incomplete work \u2014 If the current OBPI or task is not yet <code>Completed</code>, the agent MUST create a handoff document before the session ends.</li> <li>Switching ADR scope \u2014 When pivoting from one ADR's work to another within the same session, the agent MUST create a handoff for the ADR being left.</li> <li>Human requests it \u2014 When the operator explicitly asks for a handoff (e.g., <code>/gz-session-handoff CREATE</code>).</li> </ol>"},{"location":"governance/GovZero/session-handoff-obligations/#should-create-a-handoff-when","title":"SHOULD Create a Handoff When","text":"<ul> <li>A session has produced significant decisions or discoveries not yet recorded elsewhere.</li> <li>The agent has accumulated substantial context that would be expensive to reconstruct.</li> <li>More than 2 hours of focused work has occurred on a single ADR.</li> </ul>"},{"location":"governance/GovZero/session-handoff-obligations/#normative-obligations","title":"Normative Obligations","text":"# Obligation Rationale 1 MUST populate all 7 required sections with session-specific content \u2014 no placeholders, no HTML comment stubs. The validation pipeline rejects incomplete documents. Partial handoffs provide false confidence. 2 MUST pass the full validation pipeline (frontmatter schema, placeholder detection, secret detection, section presence, file reference existence) before considering a handoff complete. Fail-closed validation is the design principle \u2014 only a clean document can serve as reliable context. 3 MUST set <code>continues_from</code> when a prior handoff exists for the same ADR. Chaining preserves lineage. An unchained handoff orphans prior context. 4 MUST record accurate <code>branch</code> and <code>adr_id</code> in frontmatter matching the actual working state. RESUME workflow uses these fields for context verification. Mismatches trigger warnings that undermine trust."},{"location":"governance/GovZero/session-handoff-obligations/#prohibitions","title":"Prohibitions","text":"<ol> <li> <p>MUST NOT resume a \"Very Stale\" handoff without human verification. The staleness classification system marks documents older than 7 days (or with significant git divergence) as requiring human review. Proceeding without verification risks acting on invalidated context.</p> </li> <li> <p>MUST NOT bypass validation by writing handoff files directly. Always use the CREATE workflow (<code>create_handoff()</code> or the <code>/gz-session-handoff CREATE</code> skill). Direct file writes skip placeholder detection, secret scanning, and section validation.</p> </li> <li> <p>MUST NOT silently discard handoff context during RESUME. When resuming, the agent must acknowledge the handoff content (staleness classification, chain depth, first next step) before proceeding with new work.</p> </li> </ol>"},{"location":"governance/GovZero/session-handoff-obligations/#create-workflow-summary","title":"CREATE Workflow Summary","text":"<ol> <li>Scaffold \u2014 Generate document from template with frontmatter populated</li> <li>Populate \u2014 Fill all 7 required sections with session-specific content</li> <li>Validate \u2014 Run full validation pipeline (6 checks)</li> <li>Write \u2014 Persist to <code>{ADR-package}/handoffs/{timestamp}-{slug}.md</code></li> </ol> <p>Full specification: gz-session-handoff SKILL</p>"},{"location":"governance/GovZero/session-handoff-obligations/#resume-workflow-summary","title":"RESUME Workflow Summary","text":"<ol> <li>Discover \u2014 List available handoffs for the target ADR, sorted newest-first</li> <li>Classify \u2014 Evaluate staleness (time, commits, files, branch divergence)</li> <li>Gate \u2014 If Stale or Very Stale, require human verification before proceeding</li> <li>Load chain \u2014 Traverse <code>continues_from</code> links for full lineage</li> <li>Extract \u2014 Pull first next step for immediate action</li> </ol> <p>Full specification: gz-session-handoff SKILL</p>"},{"location":"governance/GovZero/session-handoff-obligations/#staleness-handling-rules","title":"Staleness Handling Rules","text":"Classification Age Action Fresh &lt; 24 hours Resume directly Slightly Stale 24h \u2013 72h Resume with caution; note elapsed time Stale 72h \u2013 7 days Human verification required before proceeding Very Stale &gt; 7 days Human verification required; consider creating a fresh handoff instead <p>Multi-factor staleness (commits, files, branch divergence) can escalate the classification independently of time. See Multi-Factor Staleness Classification for the full four-factor model.</p>"},{"location":"governance/GovZero/session-handoff-obligations/#chaining-requirements","title":"Chaining Requirements","text":"<ul> <li>Every handoff after the first for a given ADR MUST set <code>continues_from</code> to the canonical path of its predecessor.</li> <li>Chain depth is hard-limited at 20 documents (error) with an advisory warning at 5.</li> <li>Circular references are detected and rejected.</li> <li>Chain traversal returns documents in chronological (oldest-first) order.</li> </ul> <p>Full specification: Handoff Document Chaining Protocol</p>"},{"location":"governance/GovZero/session-handoff-obligations/#see-also","title":"See Also","text":"<ul> <li>Session Handoff Schema \u2014 Schema specification (OBPI-01)</li> <li>Handoff Document Validation \u2014 Validation checks (OBPI-06)</li> <li>Multi-Factor Staleness Classification \u2014 Staleness system (OBPI-05)</li> <li>Handoff Document Chaining Protocol \u2014 Chaining protocol (OBPI-07)</li> <li>ADR-0.0.25 \u2014 Architecture decision record</li> <li>gz-session-handoff SKILL \u2014 Skill specification</li> <li>AGENTS.md \u00a7 Session Handoff \u2014 Agent contract integration</li> </ul>"},{"location":"governance/GovZero/session-handoff-schema/","title":"Session Handoff Schema","text":""},{"location":"governance/GovZero/session-handoff-schema/#govzero-session-handoff-schema","title":"GovZero Session Handoff Schema","text":"<p>Status: Active Last reviewed: 2026-02-11 Schema version: <code>govzero.handoff.v1</code> Parent ADR: ADR-0.0.25 (Compounding Engineering &amp; Session Handoff Contract)</p>"},{"location":"governance/GovZero/session-handoff-schema/#overview","title":"Overview","text":"<p>The session handoff schema defines the structure for agent context preservation documents. Handoff documents enable reliable session transfer \u2014 an agent captures its working state, decisions, and next steps so a subsequent session can resume without information loss.</p>"},{"location":"governance/GovZero/session-handoff-schema/#purpose","title":"Purpose","text":"<ul> <li>Zero-ambiguity context transfer: Structured format ensures nothing is lost between sessions</li> <li>Validated resumption: Fail-closed validation prevents agents from proceeding on stale or incomplete context</li> <li>Chained lineage: <code>continues_from</code> links create an audit trail across sessions</li> <li>Compound learning: Each session's insights feed into future sessions via structured Evidence sections</li> </ul>"},{"location":"governance/GovZero/session-handoff-schema/#architecture","title":"Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   Resuming Agent                         \u2502\n\u2502         (validates, loads, verifies, executes)           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                          \u25b2\n                          \u2502 reads + validates\n                          \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502               Handoff Document (.md)                     \u2502\n\u2502     YAML frontmatter + 7 required Markdown sections      \u2502\n\u2502           (stored in {ADR-package}/handoffs/)             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                          \u25b2\n                          \u2502 creates + validates\n                          \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   Creating Agent                         \u2502\n\u2502      (scaffolds, populates, validates, stores)           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"governance/GovZero/session-handoff-schema/#yaml-frontmatter","title":"YAML Frontmatter","text":"<p>Every handoff document begins with YAML frontmatter between <code>---</code> delimiters.</p>"},{"location":"governance/GovZero/session-handoff-schema/#field-reference","title":"Field Reference","text":"Field Type Required Description <code>mode</code> <code>CREATE</code> | <code>RESUME</code> Yes Handoff mode \u2014 CREATE for new documents, RESUME for continuation <code>adr_id</code> string Yes Parent ADR identifier (format: <code>ADR-X.Y.Z</code>) <code>branch</code> string Yes Git branch at time of handoff <code>timestamp</code> string Yes ISO 8601 UTC timestamp (Z-suffix or offset) <code>agent</code> string Yes Agent that created the document (e.g., <code>claude-code</code>) <code>obpi_id</code> string No Current OBPI being worked (format: <code>OBPI-X.Y.Z-NN</code>) <code>session_id</code> string No Session grouping identifier <code>continues_from</code> string No Relative path to predecessor handoff (chaining)"},{"location":"governance/GovZero/session-handoff-schema/#example","title":"Example","text":"<pre><code>---\nmode: CREATE\nadr_id: ADR-0.0.25\nbranch: feature/session-handoff\ntimestamp: \"2026-02-11T14:30:00Z\"\nagent: claude-code\nobpi_id: OBPI-0.0.25-03\nsession_id: handoff-session-001\ncontinues_from: handoffs/2026-02-10T09-00-00Z-schema-draft.md\n---\n</code></pre>"},{"location":"governance/GovZero/session-handoff-schema/#field-validation-rules","title":"Field Validation Rules","text":"<ul> <li><code>adr_id</code>: Must match pattern <code>ADR-\\d+\\.\\d+\\.\\d+</code> (three-part SemVer)</li> <li><code>timestamp</code>: Must parse as valid ISO 8601 via <code>datetime.fromisoformat()</code></li> <li><code>obpi_id</code>: If present, must match pattern <code>OBPI-\\d+\\.\\d+\\.\\d+-\\d{2}</code> (SemVer + 2-digit sequence)</li> <li><code>mode</code>: Exactly <code>CREATE</code> or <code>RESUME</code> (case-sensitive)</li> <li>Extra fields: Forbidden \u2014 unknown keys cause validation failure</li> </ul>"},{"location":"governance/GovZero/session-handoff-schema/#required-sections","title":"Required Sections","text":"<p>Every handoff document body must contain these 7 section headings as level-2 Markdown headers (<code>## Heading</code>):</p> # Section Purpose 1 Current State Summary What has been done, current phase, success/failure of last action 2 Important Context Non-obvious knowledge the resuming agent needs (constraints, gotchas, config locations) 3 Decisions Made Decisions with rationale and rejected alternatives 4 Immediate Next Steps Ordered list of 3-5 concrete next actions 5 Pending Work / Open Loops Deferred or blocked items that must be completed 6 Verification Checklist Commands and checks to verify handoff accuracy 7 Evidence / Artifacts File paths and descriptions of session outputs"},{"location":"governance/GovZero/session-handoff-schema/#optional-section","title":"Optional Section","text":"Section Purpose Environment State Python version, package versions, OS-specific notes, database state"},{"location":"governance/GovZero/session-handoff-schema/#validation-rules","title":"Validation Rules","text":"<p>All validation is fail-closed \u2014 any violation prevents the document from being accepted.</p> # Rule Function Behavior 1 Frontmatter present <code>parse_frontmatter()</code> Opening/closing <code>---</code> delimiters, valid YAML mapping 2 Frontmatter valid <code>HandoffFrontmatter</code> model All required fields present and well-formed 3 No placeholders <code>validate_no_placeholders()</code> Body must not contain TBD, TODO, FIXME, PLACEHOLDER, XXX, CHANGEME, or standalone <code>...</code> 4 No secrets <code>validate_no_secrets()</code> Content must not contain <code>password=</code>, <code>secret=</code>, <code>token=</code>, <code>api_key=</code>, <code>Bearer</code>, or <code>PRIVATE KEY</code> 5 Sections present <code>validate_sections_present()</code> All 7 required section headings must appear 6 References valid <code>validate_referenced_files()</code> Backtick-quoted paths in Evidence section must exist on disk"},{"location":"governance/GovZero/session-handoff-schema/#placeholder-detection","title":"Placeholder Detection","text":"<p>Placeholder scanning strips HTML comments before matching, so template guidance in <code>&lt;!-- comments --&gt;</code> does not trigger false positives. The scan applies only to the document body (frontmatter is excluded).</p> <p>Detected patterns (case-insensitive):</p> <pre><code>TBD | TODO | FIXME | PLACEHOLDER | XXX | CHANGEME | ... (standalone)\n</code></pre>"},{"location":"governance/GovZero/session-handoff-schema/#secret-detection","title":"Secret Detection","text":"<p>Secret scanning applies to the entire document (including frontmatter). Detected patterns:</p> <pre><code>password= | secret= | token= | api_key= | Bearer &lt;token&gt; | PRIVATE KEY\n</code></pre>"},{"location":"governance/GovZero/session-handoff-schema/#staleness-classification","title":"Staleness Classification","text":"<p>From ADR-0.0.25 Decision 4, handoff documents are classified by age:</p> Classification Age Action Fresh &lt; 24 hours Resume directly Slightly Stale 24h - 72h Resume with caution, verify key assumptions Stale 72h - 7 days Human verification required before resume Very Stale &gt; 7 days Human verification required; consider re-creating <p>Staleness is computed from the <code>timestamp</code> field in frontmatter relative to the current time.</p>"},{"location":"governance/GovZero/session-handoff-schema/#chaining-protocol","title":"Chaining Protocol","text":"<p>From ADR-0.0.25 Decision 5, handoff documents form chains via the <code>continues_from</code> field.</p>"},{"location":"governance/GovZero/session-handoff-schema/#rules","title":"Rules","text":"<ol> <li>New chains: First handoff in a chain has <code>continues_from</code> empty/null</li> <li>Continuation: Subsequent handoffs set <code>continues_from</code> to the relative path of the predecessor</li> <li>Lineage traversal: Follow <code>continues_from</code> links to reconstruct full session history</li> <li>Validation: <code>continues_from</code> path, if set, should resolve to an existing file on disk</li> </ol>"},{"location":"governance/GovZero/session-handoff-schema/#example-chain","title":"Example Chain","text":"<pre><code>handoffs/2026-02-01T10-00-00Z-schema-design.md\n  \u2514\u2500 continues_from: (none \u2014 chain start)\n\nhandoffs/2026-02-02T14-00-00Z-schema-tests.md\n  \u2514\u2500 continues_from: handoffs/2026-02-01T10-00-00Z-schema-design.md\n\nhandoffs/2026-02-03T09-00-00Z-schema-docs.md\n  \u2514\u2500 continues_from: handoffs/2026-02-02T14-00-00Z-schema-tests.md\n</code></pre>"},{"location":"governance/GovZero/session-handoff-schema/#storage-conventions","title":"Storage Conventions","text":"<p>Handoff documents are stored per-ADR in the ADR package directory:</p> <pre><code>docs/design/adr/{series}/ADR-{id}-{slug}/handoffs/{timestamp}-{slug}.md\n</code></pre> <p>Example:</p> <pre><code>docs/design/adr/adr-0.0.x/ADR-0.0.25-compounding-engineering-session-handoff-contract/\n  handoffs/\n    2026-02-01T10-00-00Z-schema-design.md\n    2026-02-02T14-00-00Z-schema-tests.md\n</code></pre>"},{"location":"governance/GovZero/session-handoff-schema/#validation-api","title":"Validation API","text":""},{"location":"governance/GovZero/session-handoff-schema/#python","title":"Python","text":"<p>The schema model and validation functions are currently defined in <code>tests/governance/test_handoff_schema.py</code> (to be extracted to a source module by OBPI-0.0.25-06).</p> <pre><code>from tests.governance.test_handoff_schema import (\n    HandoffFrontmatter,\n    HandoffValidationError,\n    parse_frontmatter,\n    validate_handoff_document,\n    validate_no_placeholders,\n    validate_no_secrets,\n    validate_sections_present,\n    validate_referenced_files,\n    HANDOFF_SCHEMA_VERSION,\n    REQUIRED_SECTIONS,\n)\n\n# Parse and validate frontmatter\ncontent = Path(\"handoff.md\").read_text()\ndata = parse_frontmatter(content)\nfm = HandoffFrontmatter(**data)\nprint(f\"Mode: {fm.mode}, ADR: {fm.adr_id}\")\n\n# Full document validation (fail-closed)\nerrors = validate_handoff_document(content, base_path=Path(\".\"))\nif errors:\n    for e in errors:\n        print(f\"  FAIL: {e}\")\nelse:\n    print(\"  PASS: document is valid\")\n</code></pre>"},{"location":"governance/GovZero/session-handoff-schema/#see-also","title":"See Also","text":"<ul> <li>Layered Trust Architecture \u2014 Tool layer model and boundaries</li> <li>Unified Ledger Schema \u2014 Companion schema for JSONL governance ledgers</li> <li>ADR-0.0.25 \u2014 Architecture decision record</li> <li>GovZero Charter \u2014 Gate definitions and authority</li> <li>ADR Lifecycle \u2014 Status transitions</li> <li>Template: <code>.github/skills/gz-session-handoff/assets/handoff-template.md</code></li> <li>Tests: <code>tests/governance/test_handoff_schema.py</code></li> </ul>"},{"location":"governance/GovZero/staleness-classification/","title":"Staleness Classification","text":""},{"location":"governance/GovZero/staleness-classification/#multi-factor-staleness-classification","title":"Multi-Factor Staleness Classification","text":"<p>Status: Active Last reviewed: 2026-02-12 Parent ADR: ADR-0.0.25 (Compounding Engineering &amp; Session Handoff Contract) OBPI: OBPI-0.0.25-05</p>"},{"location":"governance/GovZero/staleness-classification/#overview","title":"Overview","text":"<p>Session handoff documents degrade in reliability over time. The staleness classification system evaluates four independent factors to determine whether a handoff can be resumed directly or requires human verification.</p> <p>This extends the time-only classification from ADR-0.0.25 Decision 4 into a multi-factor system that also considers git activity (commits, file changes, branch divergence).</p>"},{"location":"governance/GovZero/staleness-classification/#design-principles","title":"Design Principles","text":"<ol> <li>Unknown = Fresh: Missing git information does not artificially escalate staleness</li> <li>Worst-of semantics: Any single factor at the highest severity governs the result (fail-closed)</li> <li>Import, don't duplicate: Time classification delegates to the existing <code>classify_staleness()</code></li> <li>Per-factor transparency: <code>StalenessDetail</code> provides a full breakdown, not just the composite level</li> </ol>"},{"location":"governance/GovZero/staleness-classification/#four-factor-model","title":"Four-Factor Model","text":"# Factor Signal Levels Rationale 1 Time Timestamp age Fresh / Slightly Stale / Stale / Very Stale Oldest signal; context degrades with time regardless of code changes 2 Commits Commit count since handoff Fresh / Slightly Stale / Stale / Very Stale Measures code velocity; many commits = many potential invalidations 3 Files Unique files changed Fresh / Stale / Very Stale Coarser signal (no Slightly Stale); breadth of change matters 4 Branch Branch divergence Fresh / Stale Binary: handoff branch is either still ancestral to HEAD or it isn't"},{"location":"governance/GovZero/staleness-classification/#threshold-constants","title":"Threshold Constants","text":""},{"location":"governance/GovZero/staleness-classification/#time","title":"Time","text":"Classification Age Fresh &lt; 24 hours Slightly Stale 24h - 72h Stale 72h - 7 days Very Stale &gt; 7 days"},{"location":"governance/GovZero/staleness-classification/#commits","title":"Commits","text":"Classification Commit Count Fresh 0 or unknown Slightly Stale 1 - 4 Stale 5 - 19 Very Stale 20+"},{"location":"governance/GovZero/staleness-classification/#files-changed","title":"Files Changed","text":"Classification File Count Fresh 0 - 9 or unknown Stale 10 - 49 Very Stale 50+"},{"location":"governance/GovZero/staleness-classification/#branch-divergence","title":"Branch Divergence","text":"Classification State Fresh Not diverged or unknown Stale Diverged"},{"location":"governance/GovZero/staleness-classification/#composition-semantics","title":"Composition Semantics","text":"<p>The composite staleness level is determined by worst-of across all four factors:</p> <pre><code>composite_level = max(time_level, commit_level, file_level, branch_level)\n</code></pre> <p>When multiple factors share the worst level, the decisive factor is the first in priority order:</p> <ol> <li>Time (highest priority)</li> <li>Commits</li> <li>Files</li> <li>Branch (lowest priority)</li> </ol>"},{"location":"governance/GovZero/staleness-classification/#human-verification-gate","title":"Human Verification Gate","text":"Composite Level Requires Human Verification Fresh No Slightly Stale No Stale Yes Very Stale Yes"},{"location":"governance/GovZero/staleness-classification/#programmatic-api","title":"Programmatic API","text":""},{"location":"governance/GovZero/staleness-classification/#data-types","title":"Data Types","text":"<pre><code>from tests.governance.test_staleness import GitContext, StalenessDetail\n\n# Git context with known values\nctx = GitContext(\n    commits_since=3,\n    files_changed=5,\n    branch_diverged=False,\n    handoff_branch=\"feature/handoff\",\n    current_branch=\"feature/handoff\",\n)\n\n# Git context with unknown values (all default to None =&gt; Fresh)\nctx_unknown = GitContext()\n</code></pre>"},{"location":"governance/GovZero/staleness-classification/#per-factor-classifiers","title":"Per-Factor Classifiers","text":"<pre><code>from tests.governance.test_staleness import (\n    classify_staleness_by_time,\n    classify_staleness_by_commits,\n    classify_staleness_by_files,\n    classify_staleness_by_branch,\n)\n\nclassify_staleness_by_time(\"2026-02-10T10:00:00Z\")  # =&gt; \"Fresh\"\nclassify_staleness_by_commits(3)    # =&gt; \"Slightly Stale\"\nclassify_staleness_by_files(25)     # =&gt; \"Stale\"\nclassify_staleness_by_branch(True)  # =&gt; \"Stale\"\n</code></pre>"},{"location":"governance/GovZero/staleness-classification/#multi-factor-compositor","title":"Multi-Factor Compositor","text":"<pre><code>from tests.governance.test_staleness import classify_staleness_multi, GitContext\n\ndetail = classify_staleness_multi(\n    \"2026-02-10T10:00:00Z\",\n    GitContext(commits_since=10, files_changed=5),\n)\nprint(detail.level)            # \"Stale\" (worst-of)\nprint(detail.decisive_factor)  # \"commits\"\nprint(detail.requires_human_verification)  # True\n</code></pre>"},{"location":"governance/GovZero/staleness-classification/#git-context-gathering","title":"Git Context Gathering","text":"<pre><code>from tests.governance.test_staleness import gather_git_context\n\nctx = gather_git_context(\"2026-02-10T10:00:00Z\", handoff_branch=\"main\")\n# Returns GitContext with live git state (None fields on failure)\n</code></pre>"},{"location":"governance/GovZero/staleness-classification/#see-also","title":"See Also","text":"<ul> <li>Session Handoff Schema -- Time-only staleness spec (superseded for multi-factor use)</li> <li>ADR-0.0.25 -- Architecture decision record</li> <li>Tests: <code>tests/governance/test_staleness.py</code></li> <li>Agent rules: <code>.github/skills/gz-session-handoff/assets/staleness-rules.md</code></li> </ul>"},{"location":"governance/GovZero/validation-receipts/","title":"Validation Receipt Schema","text":"<p>Status: Active Last reviewed: 2026-02-11 Schema version: <code>govzero.ledger.v1</code> Parent ADR: ADR-0.0.24 (Validation Receipt Temporal Anchoring)</p>"},{"location":"governance/GovZero/validation-receipts/#overview","title":"Overview","text":"<p>Validation receipts anchor ADR/OBPI validation events to specific git commits, enabling \"valid as of\" semantics. When an ADR is validated, a receipt records the exact commit SHA, so later drift detection can determine whether code has changed since the last audit.</p>"},{"location":"governance/GovZero/validation-receipts/#purpose","title":"Purpose","text":"<ul> <li>Temporal anchoring: Every validation event is tied to a git commit</li> <li>Drift detection: Compare current HEAD against the last validation anchor to detect changes</li> <li>Audit trail: Machine-readable evidence of when and by whom validation occurred</li> <li>Separation of concerns: Validation receipts live in their own ledger, complementing the OBPI audit ledger</li> </ul>"},{"location":"governance/GovZero/validation-receipts/#relationship-to-obpi-audit-ledger","title":"Relationship to OBPI Audit Ledger","text":"Aspect OBPI Audit Ledger Validation Receipt Ledger File <code>obpi-audit.jsonl</code> <code>adr-validation.jsonl</code> Scope Per-brief status audits Per-ADR validation events Purpose Track OBPI status transitions Anchor validation to git state Schema <code>obpi-audit</code>, <code>covers-map</code>, etc. <code>validation</code> <p>Both ledgers share the <code>govzero.ledger.v1</code> base schema (<code>LedgerEntryBase</code>) for consistency.</p>"},{"location":"governance/GovZero/validation-receipts/#entry-schema","title":"Entry Schema","text":""},{"location":"governance/GovZero/validation-receipts/#validation","title":"validation","text":"<p>Records a validation event tied to a specific git commit.</p> <pre><code>{\n  \"type\": \"validation\",\n  \"timestamp\": \"2026-02-10T14:30:00Z\",\n  \"schema_version\": \"govzero.ledger.v1\",\n  \"agent\": \"claude-code\",\n  \"session_id\": \"2026-02-10-adr-024-validation\",\n  \"adr_id\": \"ADR-0.0.24\",\n  \"event\": \"validated\",\n  \"anchor\": {\n    \"commit\": \"de80292\",\n    \"tag\": \"v0.0.24\",\n    \"semver\": \"0.0.24\"\n  },\n  \"evidence\": {\n    \"tests_passed\": true,\n    \"test_count\": 15,\n    \"coverage_percent\": 48.5,\n    \"gate2_pass\": true\n  },\n  \"attestor\": \"human:jeff\"\n}\n</code></pre>"},{"location":"governance/GovZero/validation-receipts/#common-fields-inherited-from-ledgerentrybase","title":"Common Fields (inherited from LedgerEntryBase)","text":"Field Type Required Description <code>type</code> <code>\"validation\"</code> Yes Entry type discriminator <code>timestamp</code> string Yes ISO 8601 UTC timestamp (Z-suffixed) <code>schema_version</code> string No Schema version (default: <code>govzero.ledger.v1</code>) <code>agent</code> string No Agent that created the entry <code>session_id</code> string No Session identifier for grouping"},{"location":"governance/GovZero/validation-receipts/#validation-specific-fields","title":"Validation-Specific Fields","text":"Field Type Required Description <code>adr_id</code> string Yes ADR identifier (format: <code>ADR-X.Y.Z</code>) <code>event</code> string Yes One of: <code>validated</code>, <code>completed</code>, <code>compliance_check</code> <code>anchor</code> object Yes Temporal anchor (see below) <code>evidence</code> object No Evidence payload (test results, coverage, etc.) <code>attestor</code> string Yes Human attestor (must be <code>human:&lt;name&gt;</code>, e.g., <code>human:jeff</code>). Only humans can attest \u2014 agents record evidence via the <code>agent</code> field."},{"location":"governance/GovZero/validation-receipts/#validationanchor-fields","title":"ValidationAnchor Fields","text":"Field Type Required Description <code>commit</code> string Yes Git SHA, 7-40 lowercase hex characters <code>tag</code> string No Git tag if HEAD is tagged at validation time <code>semver</code> string Yes ADR semver version (e.g., <code>0.0.24</code>)"},{"location":"governance/GovZero/validation-receipts/#event-types","title":"Event Types","text":"Event When Used <code>validated</code> ADR passes Gate 5 audit and is marked Validated <code>completed</code> ADR passes Gates 1-4 and is marked Completed <code>compliance_check</code> Periodic or on-demand compliance verification"},{"location":"governance/GovZero/validation-receipts/#ledger-file-location","title":"Ledger File Location","text":"<p>Validation receipts are stored per-ADR alongside the existing OBPI audit ledger:</p> <pre><code>docs/design/adr/{series}/ADR-{id}-{slug}/logs/adr-validation.jsonl\n</code></pre> <p>Example:</p> <pre><code>docs/design/adr/adr-0.0.x/ADR-0.0.24-validation-receipt-temporal-anchoring/logs/adr-validation.jsonl\n</code></pre>"},{"location":"governance/GovZero/validation-receipts/#edge-case-behavior","title":"Edge Case Behavior","text":"Scenario Behavior Ledger file does not exist <code>read_receipts()</code> returns empty list Ledger file is empty <code>read_receipts()</code> returns empty list Malformed JSONL line Skipped with <code>warnings.warn()</code>; valid entries still returned Duplicate receipts for same commit All are preserved (idempotency is caller's responsibility)"},{"location":"governance/GovZero/validation-receipts/#python-api","title":"Python API","text":""},{"location":"governance/GovZero/validation-receipts/#creating-and-writing-receipts","title":"Creating and Writing Receipts","text":"<pre><code>from pathlib import Path\n\nfrom gzkit.ledger import Ledger, audit_receipt_emitted_event\n\nledger = Ledger(Path(\".gzkit/ledger.jsonl\"))\nevent = audit_receipt_emitted_event(\n    adr_id=\"ADR-0.3.0\",\n    receipt_event=\"validated\",\n    attestor=\"Jeffry Babb\",\n    evidence={\"scope\": \"ADR\", \"adr_completion\": \"completed\"},\n)\nledger.append(event)\n</code></pre>"},{"location":"governance/GovZero/validation-receipts/#reading-receipts","title":"Reading Receipts","text":"<pre><code>from pathlib import Path\n\nfrom gzkit.ledger import Ledger\n\nledger = Ledger(Path(\".gzkit/ledger.jsonl\"))\n\n# Read all audit receipt events\nall_receipts = ledger.query(event_type=\"audit_receipt_emitted\")\n\n# Filter by ADR\nadr_receipts = ledger.query(event_type=\"audit_receipt_emitted\", artifact_id=\"ADR-0.3.0\")\n</code></pre>"},{"location":"governance/GovZero/validation-receipts/#see-also","title":"See Also","text":"<ul> <li>Ledger Schema \u2014 Base schema and OBPI audit entry types</li> <li>Layered Trust Architecture \u2014 Tool layer model</li> <li>ADR Lifecycle \u2014 Status transitions</li> <li>Python module: <code>src/gzkit/ledger.py</code></li> </ul>"},{"location":"governance/GovZero/audits/AUDIT-BRIEF-governance-harmonization/","title":"Audit Brief: Governance Document Harmonization","text":"<p>Status: Pending Created: 2026-01-11 Assigned: [Fresh Agent] Output: <code>docs/governance/GovZero/audits/governance-harmonization-2026-01-11.md</code></p>"},{"location":"governance/GovZero/audits/AUDIT-BRIEF-governance-harmonization/#objective","title":"Objective","text":"<p>Audit all documents in <code>docs/governance/</code> for drift against the canonical GovZero documents. Produce a harmonization report with consolidation recommendations.</p>"},{"location":"governance/GovZero/audits/AUDIT-BRIEF-governance-harmonization/#source-of-truth","title":"Source of Truth","text":"<p>The following documents in <code>docs/governance/GovZero/</code> are canonical:</p> Document Authority <code>charter.md</code> Gate definitions, lane doctrine, closeout attestation terms <code>adr-lifecycle.md</code> ADR lifecycle states, closeout-to-status mapping <code>adr-status.md</code> Authoritative ADR status table (uses lifecycle states from adr-lifecycle.md) <code>audit-protocol.md</code> Closeout ceremony behavior, agent MUST/MUST NOT rules <code>adr-obpi-ghi-audit-linkage.md</code> Relationship between ADR, OBPI, GHI, and audit artifacts <p>All other governance documents MUST align with these or be marked superseded.</p>"},{"location":"governance/GovZero/audits/AUDIT-BRIEF-governance-harmonization/#audit-scope","title":"Audit Scope","text":"<p>Examine every <code>.md</code> file in:</p> <ul> <li><code>docs/governance/*.md</code> (root level)</li> <li><code>docs/governance/db28/</code></li> <li><code>docs/governance/gzkit/</code></li> <li>Any other subdirectories except <code>GovZero/</code> itself</li> </ul> <p>Also examine: - <code>docs/design/adr/_TEMPLATES/ADR_TEMPLATE_SEMVER.md</code> \u2014 Does the Status field align with adr-lifecycle.md? - Any remaining references to the old <code>docs/design/adr/adr_status.md</code> path (now moved to GovZero)</p>"},{"location":"governance/GovZero/audits/AUDIT-BRIEF-governance-harmonization/#audit-questions-per-document","title":"Audit Questions Per Document","text":"<p>For each document, answer:</p> <ol> <li>Relevance: Is this document still relevant, or has its content been absorbed into GovZero?</li> <li>Conflict: Does it define terms, statuses, or processes that conflict with GovZero canon?</li> <li>Redundancy: Does it duplicate content that exists in GovZero?</li> <li>Reference: Does it properly reference GovZero for canonical definitions, or does it redefine them?</li> <li>Disposition: Should this document be:</li> <li>Kept: Still relevant, no conflict</li> <li>Updated: Relevant but needs alignment edits</li> <li>Superseded: Move to <code>_archive/</code> with supersession header</li> <li>Consolidated: Merge useful content into GovZero, then archive</li> </ol>"},{"location":"governance/GovZero/audits/AUDIT-BRIEF-governance-harmonization/#consolidation-strategy-moderate","title":"Consolidation Strategy (Moderate)","text":"<ol> <li>Centralize: If a document has useful content not in GovZero, propose where to add it</li> <li>Archive: Move superseded documents to <code>docs/governance/_archive/</code> with header:</li> </ol> <pre><code>&gt; **SUPERSEDED**: This document is superseded by [GovZero/{doc}.md](GovZero/{doc}.md).\n&gt; Retained for historical reference only. Do not use for current guidance.\n</code></pre> <ol> <li>Update references: Any document referencing an archived doc should be updated to point to GovZero</li> </ol>"},{"location":"governance/GovZero/audits/AUDIT-BRIEF-governance-harmonization/#output-format","title":"Output Format","text":"<p>Produce a report at <code>docs/governance/GovZero/audits/governance-harmonization-2026-01-11.md</code> with:</p>"},{"location":"governance/GovZero/audits/AUDIT-BRIEF-governance-harmonization/#section-1-executive-summary","title":"Section 1: Executive Summary","text":"<ul> <li>Total documents audited</li> <li>Counts by disposition (Kept / Updated / Superseded / Consolidated)</li> <li>Critical conflicts found</li> </ul>"},{"location":"governance/GovZero/audits/AUDIT-BRIEF-governance-harmonization/#section-2-document-by-document-analysis","title":"Section 2: Document-by-Document Analysis","text":"<p>For each document:</p> <pre><code>### {filename}\n- **Path**: `docs/governance/{path}`\n- **Disposition**: {Kept | Updated | Superseded | Consolidated}\n- **Conflicts**: {None | List of conflicts}\n- **Action Required**: {None | Specific edits | Archive | Merge into X}\n- **Notes**: {Any additional context}\n</code></pre>"},{"location":"governance/GovZero/audits/AUDIT-BRIEF-governance-harmonization/#section-3-recommended-actions","title":"Section 3: Recommended Actions","text":"<p>Prioritized list of changes to make, grouped by: - Immediate (conflicts with GovZero canon) - Near-term (redundancy cleanup) - Deferred (nice-to-have consolidation)</p>"},{"location":"governance/GovZero/audits/AUDIT-BRIEF-governance-harmonization/#section-4-open-questions","title":"Section 4: Open Questions","text":"<p>Any unresolved questions for human decision (e.g., \"where should ADR templates live?\")</p>"},{"location":"governance/GovZero/audits/AUDIT-BRIEF-governance-harmonization/#agent-instructions","title":"Agent Instructions","text":"<ol> <li> <p>Read GovZero canon first: Before auditing other docs, read all four canonical GovZero documents to internalize the source of truth.</p> </li> <li> <p>Do not modify files during audit: This is a read-only audit. Produce the report only.</p> </li> <li> <p>Flag ambiguity: If a document's disposition is unclear, mark it as \"Needs Human Decision\" with rationale.</p> </li> <li> <p>Note template drift: The ADR template defines valid statuses. These MUST match adr-lifecycle.md.</p> </li> <li> <p>Find stale references: Search for any docs still pointing to <code>docs/design/adr/adr_status.md</code> (old path).</p> </li> <li> <p>Preserve useful content: If a document has unique, useful content not in GovZero, recommend consolidation rather than deletion.</p> </li> </ol>"},{"location":"governance/GovZero/audits/AUDIT-BRIEF-governance-harmonization/#success-criteria","title":"Success Criteria","text":"<ul> <li>[ ] All documents in <code>docs/governance/</code> (except GovZero/) have been audited</li> <li>[ ] <code>adr_status.md</code> and ADR template have been checked for alignment</li> <li>[ ] Report is written to specified output path</li> <li>[ ] Each document has a clear disposition</li> <li>[ ] Conflicts are explicitly listed</li> <li>[ ] Recommended actions are prioritized</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/","title":"Governance Document Harmonization Report","text":"<p>Date: 2026-01-11 Auditor: Claude Code (Opus 4.5) Brief: <code>AUDIT-BRIEF-governance-harmonization.md</code></p>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#section-1-executive-summary","title":"Section 1: Executive Summary","text":"Metric Count Total documents audited 21 Kept 14 Updated 5 Superseded 0 Consolidated 0 Needs Human Decision 2"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#critical-conflicts-found","title":"Critical Conflicts Found","text":"<ol> <li> <p>ADR Template Status Field \u2014 Includes \"Deprecated\" (a deprecated term per <code>adr-lifecycle.md</code>) and omits \"Draft\" and \"Proposed\" as valid states.</p> </li> <li> <p>Stale Path References \u2014 35 files reference the old <code>docs/design/adr/adr_status.md</code> path; canonical location is now <code>docs/governance/GovZero/adr-status.md</code>.</p> </li> <li> <p>GovZero Version Drift \u2014 Several documents reference \"GovZero v4\" or \"GovZero v5\" without acknowledging the current v6 (effective 2026-01-05).</p> </li> </ol>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#section-2-document-by-document-analysis","title":"Section 2: Document-by-Document Analysis","text":""},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#indexmd","title":"index.md","text":"<ul> <li>Path: <code>docs/governance/index.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Well-organized governance index. Properly references GovZero as canonical source.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#governance_and_agent_tooling_indexmd","title":"GOVERNANCE_AND_AGENT_TOOLING_INDEX.md","text":"<ul> <li>Path: <code>docs/governance/GOVERNANCE_AND_AGENT_TOOLING_INDEX.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Comprehensive index of governance surfaces. Already notes GovZero version drift as a known gap. Valuable reference document.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#adr_disposition_rubricmd","title":"ADR_DISPOSITION_RUBRIC.md","text":"<ul> <li>Path: <code>docs/governance/ADR_DISPOSITION_RUBRIC.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Properly references <code>GovZero/charter.md</code> for gate definitions. Useful rubric for ADR evaluation.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#repo_layoutmd","title":"REPO_LAYOUT.md","text":"<ul> <li>Path: <code>docs/governance/REPO_LAYOUT.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Describes repository folder structure. Complements <code>THREE_TIER_STRUCTURE.md</code>.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#roadmapmd","title":"ROADMAP.md","text":"<ul> <li>Path: <code>docs/governance/ROADMAP.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Living planning document. Not governance doctrine.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#three_tier_structuremd","title":"THREE_TIER_STRUCTURE.md","text":"<ul> <li>Path: <code>docs/governance/THREE_TIER_STRUCTURE.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Defines config/artifacts/tmp tier separation. Well-maintained with verification commands.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#agent_skillsmd","title":"agent_skills.md","text":"<ul> <li>Path: <code>docs/governance/agent_skills.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Defines skill discovery and precedence. Referenced by <code>AGENTS.md</code>.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#gate5_documentation_obligationmd","title":"gate5_documentation_obligation.md","text":"<ul> <li>Path: <code>docs/governance/gate5_documentation_obligation.md</code></li> <li>Disposition: Updated</li> <li>Conflicts: References \"v4\" and \"v5\" evolution without mentioning current v6</li> <li>Action Required: Add note clarifying relationship to GovZero v6, or update version references</li> <li>Notes: Core Gate 5 doctrine. Content is aligned with GovZero canon but version numbering is stale.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#markdown_hygienemd","title":"markdown_hygiene.md","text":"<ul> <li>Path: <code>docs/governance/markdown_hygiene.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: References <code>.github/copilot-instructions.md</code> as authoritative source. Proper delegation.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#operator-documentation-philosophymd","title":"operator-documentation-philosophy.md","text":"<ul> <li>Path: <code>docs/governance/operator-documentation-philosophy.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Anchored to ADR-0.0.8. Philosophy document, not normative.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#pep257_manpage_adoptionmd","title":"pep257_manpage_adoption.md","text":"<ul> <li>Path: <code>docs/governance/pep257_manpage_adoption.md</code></li> <li>Disposition: Updated</li> <li>Conflicts: References section says \"GovZero v5\" but current is v6</li> <li>Action Required: Update reference to GovZero v6 or add clarifying note</li> <li>Notes: Defines 3-layer documentation architecture (runbook \u2192 manpages \u2192 docstrings). Content aligns with GovZero canon.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#adr_audit_tools_referencemd","title":"adr_audit_tools_reference.md","text":"<ul> <li>Path: <code>docs/governance/adr_audit_tools_reference.md</code></li> <li>Disposition: Updated</li> <li>Conflicts: Example output path <code>adr-status.txt</code> may confuse with old <code>adr_status.md</code> location</li> <li>Action Required: Clarify that <code>adr-status.txt</code> is command output, not the canonical status table</li> <li>Notes: Useful command reference for audit workflows.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#airlineops_north_star_100md","title":"airlineops_north_star_1.0.0.md","text":"<ul> <li>Path: <code>docs/governance/airlineops_north_star_1.0.0.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Program direction document. Not governance doctrine.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#github_labelsmd","title":"github_labels.md","text":"<ul> <li>Path: <code>docs/governance/github_labels.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Simple reference for GitHub label conventions.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#bts_package_management_policymd","title":"bts_package_management_policy.md","text":"<ul> <li>Path: <code>docs/governance/bts_package_management_policy.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Comprehensive BTS dataset policy. Domain-specific, not governance doctrine.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#claude-code-evaluation-briefmd","title":"CLAUDE-CODE-EVALUATION-BRIEF.md","text":"<ul> <li>Path: <code>docs/governance/CLAUDE-CODE-EVALUATION-BRIEF.md</code></li> <li>Disposition: Needs Human Decision</li> <li>Conflicts: None</li> <li>Action Required: Decide: keep as historical record or archive</li> <li>Notes: Draft evaluation document from a specific session. Not normative. Could be archived to <code>_archive/</code> or kept as historical reference.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#govzero-gate-3-5-audit-form-issuemd","title":"GOVZERO-GATE-3-5-AUDIT-FORM-ISSUE.md","text":"<ul> <li>Path: <code>docs/governance/GOVZERO-GATE-3-5-AUDIT-FORM-ISSUE.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Already marked as \"Background (non-canonical)\" in <code>adr-obpi-ghi-audit-linkage.md</code>. Design discussion document.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#govzero-gate-3-5-audit-form-issue-copilot-feedbackmd","title":"GOVZERO-GATE-3-5-AUDIT-FORM-ISSUE-COPILOT-FEEDBACK.md","text":"<ul> <li>Path: <code>docs/governance/GOVZERO-GATE-3-5-AUDIT-FORM-ISSUE-COPILOT-FEEDBACK.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Feedback document. Non-canonical background material.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#govzero-gate-3-5-audit-form-issue-codex-feedbackmd","title":"GOVZERO-GATE-3-5-AUDIT-FORM-ISSUE-CODEX-FEEDBACK.md","text":"<ul> <li>Path: <code>docs/governance/GOVZERO-GATE-3-5-AUDIT-FORM-ISSUE-CODEX-FEEDBACK.md</code></li> <li>Disposition: Needs Human Decision</li> <li>Conflicts: None</li> <li>Action Required: Decide: keep as historical record or archive</li> <li>Notes: Feedback document. Non-canonical background material. Similar to Copilot feedback doc.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#db28stabilizationmd","title":"db28/stabilization.md","text":"<ul> <li>Path: <code>docs/governance/db28/stabilization.md</code></li> <li>Disposition: Kept</li> <li>Conflicts: None</li> <li>Action Required: None</li> <li>Notes: Domain-specific DB28 stabilization policy. Not general governance.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#gzkitrfc-gzkit-foundationmd","title":"gzkit/RFC-GZKIT-FOUNDATION.md","text":"<ul> <li>Path: <code>docs/governance/gzkit/RFC-GZKIT-FOUNDATION.md</code></li> <li>Disposition: Updated</li> <li>Conflicts: References \"GovZero v4/v5\" throughout; status says \"Five Gates evolution incorporated 2025-12-04\" but current GovZero is v6 (2026-01-05)</li> <li>Action Required: Update to reference GovZero v6 or add note that RFC predates v6 and will be aligned when activated</li> <li>Notes: Draft RFC for future gzkit framework. Conceptually aligned but version references are stale.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#adr-template-docsdesignadr_templatesadr_template_semvermd","title":"ADR Template (docs/design/adr/_TEMPLATES/ADR_TEMPLATE_SEMVER.md)","text":"<ul> <li>Path: <code>docs/design/adr/_TEMPLATES/ADR_TEMPLATE_SEMVER.md</code></li> <li>Disposition: Updated</li> <li>Conflicts:</li> <li>Status field includes \"Deprecated\" which is a deprecated term per <code>adr-lifecycle.md</code></li> <li>Status field omits \"Draft\" and \"Proposed\" as valid states</li> <li>Action Required: Update Status field to match <code>adr-lifecycle.md</code>: <code>**Status:** {Draft | Proposed | Accepted | Completed | Superseded | Abandoned}</code></li> <li>Notes: Critical alignment issue. Template defines what agents and humans use for new ADRs.</li> </ul>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#section-3-recommended-actions","title":"Section 3: Recommended Actions","text":""},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#immediate-conflicts-with-govzero-canon","title":"Immediate (Conflicts with GovZero Canon)","text":"<ol> <li>Fix ADR Template Status Field \u2014 File: <code>docs/design/adr/_TEMPLATES/ADR_TEMPLATE_SEMVER.md</code></li> <li>Change: Replace <code>{Accepted | Completed | Superseded | Deprecated | Abandoned}</code> with <code>{Draft | Proposed | Accepted | Completed | Superseded | Abandoned}</code></li> <li> <p>Rationale: \"Deprecated\" is explicitly deprecated in <code>adr-lifecycle.md</code>; \"Draft\" and \"Proposed\" are valid lifecycle states</p> </li> <li> <p>Update Stale Path References \u2014 Scope: 35 files reference <code>docs/design/adr/adr_status.md</code></p> </li> <li>Change: Update to <code>docs/governance/GovZero/adr-status.md</code></li> <li>Priority files (governance/skills):<ul> <li><code>.github/skills/adr-docs/SKILL.md</code></li> <li><code>.github/skills/adr-manager/SKILL.md</code></li> <li><code>src/gzkit/cli.py</code></li> <li><code>docs/governance/GOVZERO-GATE-3-5-AUDIT-FORM-ISSUE.md</code></li> </ul> </li> </ol>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#near-term-version-alignment","title":"Near-term (Version Alignment)","text":"<ol> <li>Update GovZero Version References</li> <li>Files:<ul> <li><code>docs/governance/gate5_documentation_obligation.md</code> \u2014 add v6 note</li> <li><code>docs/governance/pep257_manpage_adoption.md</code> \u2014 update references section</li> <li><code>docs/governance/gzkit/RFC-GZKIT-FOUNDATION.md</code> \u2014 add v6 alignment note</li> </ul> </li> <li>Change: Acknowledge GovZero v6 (effective 2026-01-05) or add clarifying notes</li> </ol>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#deferred-nice-to-have","title":"Deferred (Nice-to-Have)","text":"<ol> <li>Archive Historical Documents (requires human decision)</li> <li><code>docs/governance/CLAUDE-CODE-EVALUATION-BRIEF.md</code> \u2014 consider moving to <code>_archive/</code></li> <li> <p><code>docs/governance/GOVZERO-GATE-3-5-AUDIT-FORM-ISSUE-CODEX-FEEDBACK.md</code> \u2014 consider moving to <code>_archive/</code></p> </li> <li> <p>Create <code>_archive/</code> Directory</p> </li> <li>If archiving is approved, create <code>docs/governance/_archive/</code> with README explaining archive policy</li> </ol>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#section-4-open-questions","title":"Section 4: Open Questions","text":"<ol> <li>Should historical evaluation/feedback documents be archived?</li> <li><code>CLAUDE-CODE-EVALUATION-BRIEF.md</code> and agent feedback docs are non-normative</li> <li> <p>Options: keep in place (low maintenance), archive (cleaner tree), delete (loses history)</p> </li> <li> <p>How should stale path references in proof/log files be handled?</p> </li> <li>Many stale references are in audit proof files (historical artifacts)</li> <li> <p>Options: update all (consistent), update only active files (pragmatic), leave proofs as historical snapshots</p> </li> <li> <p>Should the gzkit RFC be updated now or when gzkit is activated?</p> </li> <li>RFC is currently dormant (draft status)</li> <li>Options: update now (proactive), defer until RFC is activated (just-in-time)</li> </ol>"},{"location":"governance/GovZero/audits/governance-harmonization-2026-01-11/#appendix-stale-reference-locations","title":"Appendix: Stale Reference Locations","text":"<p>Files referencing old <code>docs/design/adr/adr_status.md</code> path (35 total):</p> <p>Active/Normative (priority update): - <code>.github/skills/adr-docs/SKILL.md</code> - <code>.github/skills/adr-manager/SKILL.md</code> - <code>src/gzkit/cli.py</code> - <code>src/gzkit/cli.py</code> - <code>docs/governance/GOVZERO-GATE-3-5-AUDIT-FORM-ISSUE.md</code> - <code>ARCHITECTURE.md</code> - <code>docs/user/index.md</code></p> <p>Historical/Proof Files (lower priority): - <code>docs/design/audit/</code> subdirectories (various proof files) - <code>docs/design/adr/adr-0.1.x/*/audit/proofs/</code> files - <code>docs/design/briefs/</code> subdirectories (historical logs)</p> <p>Audit Status: Complete Next Step: Human review and approval of recommended actions</p>"},{"location":"governance/GovZero/releases/","title":"GovZero SemVer Release Doctrine","text":"<p>Status: DRAFT Last reviewed: 2026-01-10</p>"},{"location":"governance/GovZero/releases/#purpose","title":"Purpose","text":"<p>This doctrine extends GovZero and defines how SemVer release numbers function as governance assertions.</p> <p>A release classification is an explicit claim about intent, design, implementation, verification, and attestation.</p> <ul> <li>A release is a governance assertion, not a batch of commits.</li> <li>Silence is non-compliance.</li> <li>Lane dividers have fuzz, but classification requires explicit rationale and smell checks.</li> <li>This doctrine exists to detect drift in both the agent and the human operator.</li> </ul> <p>This doctrine is governance. It is not automation, tooling, CI/CD, or tagging instructions.</p>"},{"location":"governance/GovZero/releases/#definitions","title":"Definitions","text":""},{"location":"governance/GovZero/releases/#semver-as-governance-assertions","title":"SemVer as governance assertions","text":"<p>A SemVer number $X.Y.Z$ is a structured assertion:</p> <ul> <li>$X$ (Major): intentional contract breaks; transition posture is explicit.</li> <li>$Y$ (Minor): new capability; backward compatibility remains honest.</li> <li>$Z$ (Patch): defect correction and hardening of already-intended behavior; no new capability.</li> </ul>"},{"location":"governance/GovZero/releases/#lane-exclusivity","title":"Lane exclusivity","text":"<p>Release lanes are mutually exclusive by definition.</p> <p>If an increment cannot be justified under its lane obligations and smell checks, it SHALL be reclassified.</p>"},{"location":"governance/GovZero/releases/#semver-governance-artifact-matrix","title":"SemVer \u00d7 Governance Artifact Matrix","text":"<p>This matrix is mandatory. Each release-class document below is subordinate to this matrix.</p> SemVer lane Primary intent carrier Supporting artifacts GitHub Issues posture Major ($X.0.0$) PRD (mandatory; primary) ADRs (mandatory), OBPIs (mandatory) Rare and edge-only Minor ($X.Y.0$) ADR (mandatory; primary) OBPIs (mandatory) Prohibited as minor intent Patch ($X.Y.Z$) GitHub Issue (mandatory; primary) None by default Mandatory as patch intent <p>Doctrine notes:</p> <ul> <li>Patch is NOT \u201csub-minor.\u201d</li> <li>Minor is how the product advances; patch is how intended behavior becomes reliably available.</li> </ul>"},{"location":"governance/GovZero/releases/#govzero-gate-obligations","title":"GovZero Gate Obligations","text":"<p>Every SemVer release SHALL map its governance assertion to GovZero\u2019s gates.</p>"},{"location":"governance/GovZero/releases/#gate-1-intent","title":"Gate 1 \u2014 Intent","text":"<p>What it means:</p> <ul> <li>The release has an explicit, reviewable intent record.</li> </ul> <p>Evidence requirements by lane:</p> <ul> <li>Patch: GitHub Issue is the intent record.</li> <li>Minor: OBPI(s) are the intent record.</li> <li>Major: PRD is the intent record.</li> </ul>"},{"location":"governance/GovZero/releases/#gate-2-design","title":"Gate 2 \u2014 Design","text":"<p>What it means:</p> <ul> <li>Design intent and constraints are explicit.</li> <li>The lane classification is justified against the doctrine.</li> </ul> <p>Evidence requirements by lane:</p> <ul> <li>Patch: ADR is not expected unless the patch reveals a design break.</li> <li>Minor: ADR is required.</li> <li>Major: ADR(s) are required and SHALL implement the PRD.</li> </ul>"},{"location":"governance/GovZero/releases/#gate-3-implementation","title":"Gate 3 \u2014 Implementation","text":"<p>What it means:</p> <ul> <li>Code changes and documentation claims are aligned.</li> <li>The release does not violate lane prohibitions.</li> </ul> <p>Evidence requirements by lane:</p> <ul> <li>Patch: implementation SHALL not introduce new capability.</li> <li>Minor: implementation SHALL preserve backward compatibility.</li> <li>Major: implementation SHALL include the declared contract breaks and transition posture.</li> </ul>"},{"location":"governance/GovZero/releases/#gate-4-verification","title":"Gate 4 \u2014 Verification","text":"<p>What it means:</p> <ul> <li>Verification is sufficient to defend the governance assertion.</li> </ul> <p>Evidence requirements by lane:</p> <ul> <li>Patch: verification SHALL demonstrate the defect is corrected and the intended behavior is available.</li> <li>Minor: verification SHALL demonstrate the new capability and its backward compatibility posture.</li> <li>Major: verification SHALL demonstrate the breaking change(s) and the migration posture.</li> </ul>"},{"location":"governance/GovZero/releases/#gate-5-human-attestation","title":"Gate 5 \u2014 Human Attestation","text":"<p>What it means:</p> <ul> <li>A human witnesses the relevant surfaces and attests the assertion is true.</li> </ul> <p>Evidence requirements by lane:</p> <ul> <li>Patch: required when a patch changes observable behavior or operator workflow in a way that must be witnessed.</li> <li>Minor: required, always.</li> <li>Major: required, always, and elevated.</li> </ul> <p>Silence is non-compliance: if Gate 5 is required, it SHALL be performed and recorded.</p>"},{"location":"governance/GovZero/releases/#fuzzy-boundaries-and-classification-smells","title":"Fuzzy Boundaries and Classification Smells","text":"<p>Classification is not always clean in agentic development.</p> <p>Lane dividers have fuzz, but classification requires explicit rationale and smell checks.</p> <p>The purpose of smell checks is reclassification, not blame.</p>"},{"location":"governance/GovZero/releases/#patch-smells-might-actually-be-minor","title":"Patch smells (might actually be minor)","text":"<p>A patch classification SHALL be re-evaluated if any of the following are true:</p> <ul> <li>The change introduces new capability.</li> <li>The change adds new concepts or entities that were not already intended.</li> <li>The change requires new user-facing explanation beyond defect correction.</li> </ul>"},{"location":"governance/GovZero/releases/#minor-smells-scope-is-expanding","title":"Minor smells (scope is expanding)","text":"<p>A minor classification SHALL be re-evaluated if any of the following are true:</p> <ul> <li>The number of OBPIs is exploding inside a single minor increment.</li> <li>OBPIs no longer trace to the original ADR intent.</li> <li>Repeated \u201cwhy wasn\u2019t this hardened?\u201d discoveries appear.</li> <li>Invariants are changing rather than being clarified.</li> </ul> <p>Drift principle:</p> <ul> <li>Large OBPI accumulation within a single minor is a drift indicator; stop and reclassify.</li> </ul>"},{"location":"governance/GovZero/releases/#major-smells-breaking-change-avoidance","title":"Major smells (breaking change avoidance)","text":"<p>A major classification SHALL be re-evaluated if any of the following are true:</p> <ul> <li>Contracts are being redefined.</li> <li>Backward compatibility is no longer honest.</li> <li>Migrations become conceptual, not additive.</li> </ul>"},{"location":"governance/GovZero/releases/#authorized-agent-challenges-non-vibed-compliance-questions","title":"Authorized Agent Challenges (Non-Vibed Compliance Questions)","text":"<p>The AI Pair is authorized and expected to challenge lane selection.</p> <p>These challenges are compliance prompts, not opinions.</p> <ul> <li>\u201cThis GH Issue appears to introduce new capability \u2014 should this be an OBPI?\u201d</li> <li>\u201cThe number of OBPIs in this minor suggests scope expansion \u2014 should we cut a new minor?\u201d</li> <li>\u201cThis discovery affects invariants \u2014 should this trigger a new minor or major reclassification?\u201d</li> <li>\u201cThis patch request seems to redefine behavior \u2014 is this actually a minor/major?\u201d</li> </ul> <p>Silence is non-compliance: unanswered classification challenges SHALL be treated as a blocker.</p>"},{"location":"governance/GovZero/releases/#mandatory-agent-challenge-triggers","title":"Mandatory agent challenge triggers","text":"<ul> <li>If any smell check condition is present for a lane, the AI Pair MUST raise the relevant classification challenge.</li> <li>Failure to raise the challenge when smells are present is non-compliance.</li> <li>Unanswered challenges SHALL block release advancement.</li> </ul>"},{"location":"governance/GovZero/releases/#anti-example-narrative-adr-019","title":"Anti-example narrative: ADR-0.1.9","text":"<p>ADR-0.1.9 accumulated a long-running set of work while remaining under a single $0.1.9$ identity.</p> <p>Observed drift pattern:</p> <ul> <li>The effort dragged on as \u201c0.1.9\u201d while accumulating roughly 100 OBPIs.</li> <li>Many patch-level discoveries surfaced during minor implementation.</li> <li>Additional minor advances emerged during discovery.</li> </ul> <p>Under this doctrine:</p> <ul> <li>The work SHOULD have segmented into multiple minor increments and patch increments.</li> <li>Patch-level discoveries SHOULD not have been carried inside a single minor indefinitely.</li> </ul> <p>This doctrine exists specifically to prevent that drift pattern and to allow the agent to detect it.</p>"},{"location":"governance/GovZero/releases/#roadmap-note-end-of-01x-posture","title":"Roadmap note: end of 0.1.x posture","text":"<p>The $0.1.x$ series is nearing the end of its roadmap purpose.</p> <p>This doctrine is foundational for a cleaner $0.2.x$ posture with explicit lane discipline and drift detection.</p>"},{"location":"governance/GovZero/releases/#coercion-and-audit-design-only","title":"Coercion and audit (design only)","text":"<p>This section defines governance enforcement intent.</p> <p>It does not define tooling mechanics.</p>"},{"location":"governance/GovZero/releases/#proposed-contributor-instructions-intent-only","title":"Proposed contributor instructions (intent only)","text":"<p>These instructions SHALL be treated as gating conditions for advancing a release number.</p> <p>Patch ($X.Y.Z$):</p> <ul> <li>A GitHub Issue exists and is the primary intent record.</li> <li>The change improves availability, correctness, or robustness of already-intended behavior.</li> <li>No new capability is introduced.</li> <li>Gate obligations are satisfied for the patch lane, including Gate 5 when required.</li> </ul> <p>Minor ($X.Y.0$):</p> <ul> <li>An ADR exists and is the primary intent record.</li> <li>OBPIs exist and itemize expectations.</li> <li>GitHub Issues are not used as minor intent.</li> <li>Verification defends new capability while preserving backward compatibility.</li> <li>Gate 5 human attestation is performed.</li> </ul> <p>Major ($X.0.0$):</p> <ul> <li>A PRD exists and is the primary intent record.</li> <li>ADR(s) exist and implement the PRD intent.</li> <li>OBPIs exist and itemize expectations.</li> <li>Breaking change(s) and transition posture are explicit.</li> <li>Gate 5 human attestation is performed and elevated.</li> </ul> <p>Silence is non-compliance: if any condition is unknown or undocumented, the release SHALL not advance.</p>"},{"location":"governance/GovZero/releases/#proposed-chores-names-and-intent-only","title":"Proposed chores (names and intent only)","text":"<p>These chores are governance audits.</p> <ul> <li>audit-release-classification</li> <li>Audits: each release increment has an explicit lane classification rationale.</li> <li>Non-compliance: classification is implicit, contested without response, or violates smell checks.</li> <li> <p>Evidence expected: release rationale text referencing the matrix and smell checks.</p> </li> <li> <p>audit-gates-evidence</p> </li> <li>Audits: Gate 1 through Gate 5 obligations are explicitly satisfied per lane.</li> <li>Non-compliance: missing gate mapping, missing required artifacts, or missing attestation where required.</li> <li> <p>Evidence expected: documented gate mapping and references to the required intent carriers.</p> </li> <li> <p>audit-obpi-count-smell</p> </li> <li>Audits: minor increments do not accumulate drift-level OBPI counts.</li> <li>Non-compliance: large OBPI accumulation within a single minor without reclassification.</li> <li> <p>Evidence expected: a rationale explaining segmentation decisions and spillover handling.</p> </li> <li> <p>audit-issue-lane-misuse</p> </li> <li>Audits: GitHub Issues are not used as minor-level intent mechanisms.</li> <li>Non-compliance: minor intent is captured primarily in issues rather than ADR(s) and OBPI(s).</li> <li>Evidence expected: lane declaration and artifact linkage demonstrating ADR and OBPI primacy.</li> </ul>"},{"location":"governance/GovZero/releases/#related-documents","title":"Related documents","text":"<ul> <li>Patch doctrine: patch-release.md</li> <li>Minor doctrine: minor-release.md</li> <li>Major doctrine: major-release.md</li> </ul>"},{"location":"governance/GovZero/releases/major-release/","title":"Major releases ($X.0.0$) \u2014 contract break lane","text":"<p>Status: DRAFT Last reviewed: 2026-01-10</p>"},{"location":"governance/GovZero/releases/major-release/#canonical-assertions","title":"Canonical assertions","text":"<p>A release is a governance assertion, not a batch of commits.</p> <p>Major releases are rare and SHALL be unmistakable.</p> <p>Silence is non-compliance.</p> <p>Lane dividers have fuzz, but classification requires explicit rationale and smell checks.</p> <p>This doctrine exists to detect drift in both the agent and the human operator.</p>"},{"location":"governance/GovZero/releases/major-release/#major-definition-prd-required","title":"Major definition (PRD required)","text":"<p>Major releases:</p> <ul> <li>Introduce intentional breaking change(s).</li> <li>Redefine contracts explicitly.</li> <li>Declare transition and migration posture.</li> </ul> <p>Major releases MUST have a PRD as the primary intent carrier.</p> <p>Major releases MUST have ADR(s) and OBPI(s) that implement the PRD intent.</p> <p>Major is not an escalation for convenience.</p>"},{"location":"governance/GovZero/releases/major-release/#governance-artifact-requirements","title":"Governance artifact requirements","text":"<p>This lane SHALL comply with the SemVer \u00d7 Governance Artifact Matrix:</p> <ul> <li>Primary intent carrier: PRD (mandatory).</li> <li>Supporting artifacts: ADR(s) (mandatory) and OBPIs (mandatory).</li> <li>GitHub Issues: rare and edge-only.</li> </ul>"},{"location":"governance/GovZero/releases/major-release/#transition-and-migration-posture-mandatory","title":"Transition and migration posture (mandatory)","text":"<p>Every major release SHALL declare a transition posture.</p> <p>The posture SHALL include:</p> <ul> <li>Compatibility strategy.</li> <li>Migration obligations.</li> <li>Explicit statement of what breaks and why.</li> </ul> <p>Silence is non-compliance: absence of transition posture is non-compliance.</p>"},{"location":"governance/GovZero/releases/major-release/#major-classification-rationale-required","title":"Major classification rationale (required)","text":"<p>Every major release SHALL include an explicit rationale statement that answers:</p> <ul> <li>What contract is being broken or redefined?</li> <li>Why is a breaking change necessary?</li> <li>What is the migration posture and compatibility strategy?</li> <li>Which PRD carries the intent, and which ADR(s) and OBPI(s) implement it?</li> </ul> <p>Silence is non-compliance: missing rationale is a release blocker.</p>"},{"location":"governance/GovZero/releases/major-release/#govzero-gate-obligations","title":"GovZero Gate Obligations","text":"<p>This section is mandatory.</p>"},{"location":"governance/GovZero/releases/major-release/#gate-1-intent","title":"Gate 1 \u2014 Intent","text":"<p>Obligation:</p> <ul> <li>A PRD SHALL exist and SHALL be the primary intent carrier.</li> <li>OBPIs SHALL exist and SHALL itemize expectations.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>PRD narrative.</li> <li>OBPI checklist(s) linked to PRD intent.</li> </ul> <p>Non-compliance:</p> <ul> <li>Major intent is carried primarily in ADRs or issues without a PRD.</li> </ul>"},{"location":"governance/GovZero/releases/major-release/#gate-2-design","title":"Gate 2 \u2014 Design","text":"<p>Obligation:</p> <ul> <li>ADR(s) SHALL exist and SHALL implement the PRD intent.</li> <li>ADR(s) SHALL define constraints and the compatibility strategy.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>ADR content and linkage to PRD and OBPIs.</li> </ul> <p>Non-compliance:</p> <ul> <li>Design decisions are implicit.</li> <li>Compatibility strategy is unclear or unrecorded.</li> </ul>"},{"location":"governance/GovZero/releases/major-release/#gate-3-implementation","title":"Gate 3 \u2014 Implementation","text":"<p>Obligation:</p> <ul> <li>Implementation SHALL enact the declared breaking change(s).</li> <li>Implementation SHALL include the declared transition posture.</li> <li>Documentation claims SHALL align to the new contracts.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>Code and documentation aligned with PRD and ADR(s).</li> </ul> <p>Non-compliance:</p> <ul> <li>The breaking change is accidental.</li> <li>Backward compatibility is claimed but not honest.</li> </ul>"},{"location":"governance/GovZero/releases/major-release/#gate-4-verification","title":"Gate 4 \u2014 Verification","text":"<p>Obligation:</p> <ul> <li>Verification SHALL defend the breaking change and the migration posture.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>Verification evidence that demonstrates the new contract and the transition posture.</li> </ul> <p>Non-compliance:</p> <ul> <li>Major claims are asserted without defensible verification.</li> </ul>"},{"location":"governance/GovZero/releases/major-release/#gate-5-human-attestation","title":"Gate 5 \u2014 Human Attestation","text":"<p>Obligation:</p> <ul> <li>Gate 5 SHALL be required for all major releases.</li> <li>Attestation is elevated: the operator witness SHALL cover the contract break and migration posture.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>Recorded human attestation that the major release claim holds on the operator-visible surfaces.</li> </ul> <p>Silence is non-compliance: missing attestation is non-compliance.</p>"},{"location":"governance/GovZero/releases/major-release/#smell-checks","title":"Smell checks","text":""},{"location":"governance/GovZero/releases/major-release/#major-smells-breaking-change-avoidance","title":"Major smells (breaking change avoidance)","text":"<p>If any smell is present, the major classification SHALL be enforced, not avoided:</p> <ul> <li>Contracts are being redefined.</li> <li>Backward compatibility is no longer honest.</li> <li>Migrations become conceptual, not additive.</li> </ul>"},{"location":"governance/GovZero/releases/major-release/#minor-smells-re-evaluate-as-minor","title":"Minor smells (re-evaluate as minor)","text":"<p>If the change is additive and backward compatible, major classification SHALL be re-evaluated:</p> <ul> <li>The capability is new but does not break contracts.</li> <li>Deprecations are declared without enforcement.</li> </ul>"},{"location":"governance/GovZero/releases/major-release/#authorized-agent-challenges","title":"Authorized agent challenges","text":"<p>The AI Pair is authorized to challenge classification.</p> <p>If any smell check in this document is present, the AI Pair MUST raise a classification challenge before proceeding.</p> <ul> <li>\u201cThis discovery affects invariants \u2014 should this trigger a new minor or major reclassification?\u201d</li> <li>\u201cContracts are being redefined \u2014 is backward compatibility still honest?\u201d</li> <li>\u201cThis patch request seems to redefine behavior \u2014 is this actually a minor/major?\u201d</li> </ul> <p>Silence is non-compliance: unanswered challenges SHALL be treated as a blocker.</p>"},{"location":"governance/GovZero/releases/minor-release/","title":"Minor releases ($X.Y.0$) \u2014 capability lane","text":"<p>Status: DRAFT Last reviewed: 2026-01-10</p>"},{"location":"governance/GovZero/releases/minor-release/#canonical-assertions","title":"Canonical assertions","text":"<p>A release is a governance assertion, not a batch of commits.</p> <p>Minor releases are how the product advances.</p> <p>Silence is non-compliance.</p> <p>Lane dividers have fuzz, but classification requires explicit rationale and smell checks.</p> <p>This doctrine exists to detect drift in both the agent and the human operator.</p>"},{"location":"governance/GovZero/releases/minor-release/#minor-definition-tight-contract","title":"Minor definition (tight contract)","text":"<p>Minor releases:</p> <ul> <li>Introduce new capability.</li> <li>Preserve backward compatibility.</li> <li>May introduce deprecations but do not enforce them.</li> </ul> <p>Minor releases MUST have an ADR.</p> <p>Minor releases MUST have supporting OBPIs that itemize expectations.</p>"},{"location":"governance/GovZero/releases/minor-release/#governance-artifact-requirements","title":"Governance artifact requirements","text":"<p>This lane SHALL comply with the SemVer \u00d7 Governance Artifact Matrix:</p> <ul> <li>Primary intent carrier: ADR (mandatory).</li> <li>Supporting artifacts: OBPIs (mandatory).</li> </ul>"},{"location":"governance/GovZero/releases/minor-release/#prohibition-github-issues-as-minor-intent","title":"Prohibition: GitHub Issues as minor intent","text":"<p>GitHub Issues SHALL NOT be used as an intent mechanism at the minor level.</p> <p>All minor-level intent MUST be expressed through ADR(s) and OBPI(s).</p> <p>Using GitHub Issues to carry minor intent constitutes drift and non-compliance.</p> <p>GitHub Issues may exist as operational trackers, but SHALL NOT be treated as the intent carrier for minor work.</p>"},{"location":"governance/GovZero/releases/minor-release/#minor-classification-rationale-required","title":"Minor classification rationale (required)","text":"<p>Every minor release SHALL include an explicit rationale statement that answers:</p> <ul> <li>What new capability is being introduced?</li> <li>How is backward compatibility preserved?</li> <li>What is deprecated, if anything, and what is the non-enforcement posture?</li> <li>Which ADR(s) carry the intent, and which OBPIs itemize expectations?</li> </ul> <p>Silence is non-compliance: missing rationale is a release blocker.</p>"},{"location":"governance/GovZero/releases/minor-release/#govzero-gate-obligations","title":"GovZero Gate Obligations","text":"<p>This section is mandatory.</p>"},{"location":"governance/GovZero/releases/minor-release/#gate-1-intent","title":"Gate 1 \u2014 Intent","text":"<p>Obligation:</p> <ul> <li>OBPI(s) SHALL exist and SHALL itemize expectations.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>OBPI checklist(s) that map to the minor increment.</li> </ul> <p>Non-compliance:</p> <ul> <li>Intent is carried primarily in GitHub Issues.</li> <li>OBPIs are missing or non-specific.</li> </ul>"},{"location":"governance/GovZero/releases/minor-release/#gate-2-design","title":"Gate 2 \u2014 Design","text":"<p>Obligation:</p> <ul> <li>An ADR SHALL exist and SHALL be the primary intent carrier.</li> <li>The ADR SHALL define the capability, constraints, and compatibility posture.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>ADR content and its linkage to OBPIs.</li> </ul> <p>Non-compliance:</p> <ul> <li>The minor increment proceeds without an ADR.</li> <li>OBPIs no longer trace to ADR intent.</li> </ul>"},{"location":"governance/GovZero/releases/minor-release/#gate-3-implementation","title":"Gate 3 \u2014 Implementation","text":"<p>Obligation:</p> <ul> <li>Implementation SHALL deliver the new capability.</li> <li>Implementation SHALL preserve backward compatibility.</li> <li>Deprecations MAY be introduced but SHALL NOT be enforced in the same minor.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>Code changes implementing the ADR intent.</li> <li>Documentation claims align to implemented behavior.</li> </ul> <p>Non-compliance:</p> <ul> <li>Breaking change is introduced without major classification.</li> <li>Deprecations are enforced rather than declared.</li> </ul>"},{"location":"governance/GovZero/releases/minor-release/#gate-4-verification","title":"Gate 4 \u2014 Verification","text":"<p>Obligation:</p> <ul> <li>Verification SHALL defend the new capability and the backward compatibility claim.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>Verification evidence that covers new behavior and compatibility.</li> </ul> <p>Non-compliance:</p> <ul> <li>New capability is shipped without defensible verification.</li> </ul>"},{"location":"governance/GovZero/releases/minor-release/#gate-5-human-attestation","title":"Gate 5 \u2014 Human Attestation","text":"<p>Obligation:</p> <ul> <li>Gate 5 SHALL be required for all minor releases.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>Recorded human attestation that operator-facing surfaces match the governance assertion.</li> </ul> <p>Silence is non-compliance: missing attestation is non-compliance.</p>"},{"location":"governance/GovZero/releases/minor-release/#patch-spillover-rule-mandatory","title":"Patch spillover rule (mandatory)","text":"<p>Patch-level issues discovered during minor implementation become patch increments.</p> <p>They SHALL NOT be smuggled into the minor lane.</p> <p>If patch defects are discovered:</p> <ul> <li>A GitHub Issue SHALL be created for the defect.</li> <li>The defect SHALL be resolved under a patch increment.</li> </ul> <p>This rule is mandatory because patch is not sub-minor.</p>"},{"location":"governance/GovZero/releases/minor-release/#smell-checks","title":"Smell checks","text":""},{"location":"governance/GovZero/releases/minor-release/#minor-smells-re-evaluate-segmentation","title":"Minor smells (re-evaluate segmentation)","text":"<p>If any smell is present, the minor classification SHALL be re-evaluated:</p> <ul> <li>OBPI count is exploding inside one minor increment.</li> <li>OBPIs no longer trace to original ADR intent.</li> <li>Repeated \u201cwhy wasn\u2019t this hardened?\u201d discoveries appear.</li> <li>Invariants are changing rather than being clarified.</li> </ul> <p>Drift principle:</p> <ul> <li>Large OBPI accumulation within a single minor is a drift indicator; stop and reclassify.</li> </ul>"},{"location":"governance/GovZero/releases/minor-release/#major-smells-re-evaluate-as-major","title":"Major smells (re-evaluate as major)","text":"<p>If any major smell is present, reclassify:</p> <ul> <li>Contracts are being redefined.</li> <li>Backward compatibility is no longer honest.</li> <li>Migrations become conceptual, not additive.</li> </ul>"},{"location":"governance/GovZero/releases/minor-release/#authorized-agent-challenges","title":"Authorized agent challenges","text":"<p>The AI Pair is authorized to challenge classification.</p> <p>If any smell check in this document is present, the AI Pair MUST raise a classification challenge before proceeding.</p> <ul> <li>\u201cThe number of OBPIs in this minor suggests scope expansion \u2014 should we cut a new minor?\u201d</li> <li>\u201cThis discovery affects invariants \u2014 should this trigger a new minor or major reclassification?\u201d</li> <li>\u201cThis patch request seems to redefine behavior \u2014 is this actually a minor/major?\u201d</li> <li>\u201cThis GH Issue appears to introduce new capability \u2014 should this be an OBPI?\u201d</li> </ul> <p>Silence is non-compliance: unanswered challenges SHALL be treated as a blocker.</p>"},{"location":"governance/GovZero/releases/patch-release/","title":"Patch releases ($X.Y.Z$) \u2014 defect lane","text":"<p>Status: DRAFT Last reviewed: 2026-01-10</p>"},{"location":"governance/GovZero/releases/patch-release/#canonical-assertions","title":"Canonical assertions","text":"<p>A patch release is a governance assertion, not a batch of commits.</p> <p>Patch releases SHALL be classified as defect work.</p> <p>Silence is non-compliance.</p> <p>Lane dividers have fuzz, but classification requires explicit rationale and smell checks.</p> <p>This doctrine exists to detect drift in both the agent and the human operator.</p>"},{"location":"governance/GovZero/releases/patch-release/#patch-definition-precise","title":"Patch definition (precise)","text":"<p>Patch releases address defects in existing behavior, including:</p> <ul> <li>Bugs</li> <li>Discovery gaps found during implementation</li> <li>Sharpening and clarifying ambiguous requirements</li> <li>Hardening, robustness, and invariance articulation</li> </ul> <p>When and only when these changes improve the availability, correctness, or robustness of already-intended behavior.</p> <p>Patch releases MUST NOT introduce new capability.</p> <p>Patch releases MUST be driven by GitHub Issues as the authoritative capture mechanism.</p> <p>Doctrine notes:</p> <ul> <li>Patch is NOT \u201csub-minor.\u201d</li> <li>Minor is how the product advances; patch is how intended behavior becomes reliably available.</li> </ul>"},{"location":"governance/GovZero/releases/patch-release/#governance-artifact-requirements","title":"Governance artifact requirements","text":"<p>This lane SHALL comply with the SemVer \u00d7 Governance Artifact Matrix:</p> <ul> <li>Primary intent carrier: GitHub Issue (mandatory).</li> <li>Supporting artifacts: none by default.</li> </ul> <p>An ADR is not expected for a patch unless the patch reveals a design break.</p> <p>If a design break is discovered, the work SHALL be reclassified.</p>"},{"location":"governance/GovZero/releases/patch-release/#patch-classification-rationale-required","title":"Patch classification rationale (required)","text":"<p>Every patch release SHALL include an explicit rationale statement that answers:</p> <ul> <li>What existing behavior was intended but unavailable or incorrect?</li> <li>What defect prevented availability, correctness, or robustness?</li> <li>Why does this change not introduce new capability?</li> </ul> <p>Silence is non-compliance: missing rationale is a release blocker.</p>"},{"location":"governance/GovZero/releases/patch-release/#govzero-gate-obligations","title":"GovZero Gate Obligations","text":"<p>This section is mandatory.</p>"},{"location":"governance/GovZero/releases/patch-release/#gate-1-intent","title":"Gate 1 \u2014 Intent","text":"<p>Obligation:</p> <ul> <li>A GitHub Issue SHALL exist and SHALL be the primary intent record.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>The issue text, labels, and acceptance criteria.</li> </ul> <p>Non-compliance:</p> <ul> <li>The patch is carried as an OBPI or ADR without an issue.</li> <li>The issue is vague and does not specify the defect.</li> </ul>"},{"location":"governance/GovZero/releases/patch-release/#gate-2-design","title":"Gate 2 \u2014 Design","text":"<p>Obligation:</p> <ul> <li>Patch work SHALL not require a new ADR.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>The patch rationale and smell checks.</li> </ul> <p>Reclassification triggers:</p> <ul> <li>The patch changes invariants rather than clarifying them.</li> <li>The patch introduces new concepts.</li> </ul>"},{"location":"governance/GovZero/releases/patch-release/#gate-3-implementation","title":"Gate 3 \u2014 Implementation","text":"<p>Obligation:</p> <ul> <li>Implementation SHALL correct the defect.</li> <li>Implementation SHALL not introduce new capability.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>Code changes that restore intended behavior.</li> <li>Documentation claims remain aligned to behavior.</li> </ul> <p>Non-compliance:</p> <ul> <li>New user-facing concepts are introduced to support the patch.</li> </ul>"},{"location":"governance/GovZero/releases/patch-release/#gate-4-verification","title":"Gate 4 \u2014 Verification","text":"<p>Obligation:</p> <ul> <li>Verification SHALL defend the claim that intended behavior is now available and correct.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>Tests or other verification evidence appropriate to the defect.</li> </ul> <p>Non-compliance:</p> <ul> <li>The defect is declared fixed without defensible verification.</li> </ul>"},{"location":"governance/GovZero/releases/patch-release/#gate-5-human-attestation","title":"Gate 5 \u2014 Human Attestation","text":"<p>Obligation:</p> <ul> <li>Gate 5 is required when a patch changes observable behavior or operator workflow in a way that must be witnessed.</li> </ul> <p>Threshold declaration:</p> <ul> <li>If the defect affects user-visible CLI output, documented operator procedures, or external contracts, Gate 5 SHALL be required.</li> </ul> <p>Satisfying artifacts:</p> <ul> <li>Recorded human attestation that the observable surfaces match the claim.</li> </ul> <p>Silence is non-compliance: if the threshold is met, attestation SHALL occur.</p>"},{"location":"governance/GovZero/releases/patch-release/#smell-checks","title":"Smell checks","text":""},{"location":"governance/GovZero/releases/patch-release/#patch-smells-re-evaluate-as-minor","title":"Patch smells (re-evaluate as minor)","text":"<p>If any smell is present, the patch classification SHALL be re-evaluated:</p> <ul> <li>Introduces new capability.</li> <li>Adds new concepts or entities that were not already intended.</li> <li>Requires new user-facing explanation beyond defect correction.</li> </ul>"},{"location":"governance/GovZero/releases/patch-release/#minor-spillover-rule","title":"Minor spillover rule","text":"<p>If patch-level defects are discovered during minor implementation:</p> <ul> <li>They SHALL be carried as patch increments.</li> <li>They SHALL NOT be smuggled into the minor lane.</li> </ul>"},{"location":"governance/GovZero/releases/patch-release/#authorized-agent-challenges","title":"Authorized agent challenges","text":"<p>The AI Pair is authorized to challenge classification.</p> <p>If any smell check in this document is present, the AI Pair MUST raise a classification challenge before proceeding.</p> <ul> <li>\u201cThis GH Issue appears to introduce new capability \u2014 should this be an OBPI?\u201d</li> <li>\u201cThis patch request seems to redefine behavior \u2014 is this actually a minor/major?\u201d</li> <li>\u201cThis discovery affects invariants \u2014 should this trigger a new minor or major reclassification?\u201d</li> </ul> <p>Silence is non-compliance: unanswered challenges SHALL be treated as a blocker.</p>"},{"location":"user/","title":"gzkit","text":"<p>Keep humans in the loop when AI writes code.</p>"},{"location":"user/#operational-contract","title":"Operational Contract","text":"<p>gzkit enforces a ledger-first GovZero workflow:</p> <ol> <li>Record intent (<code>gz specify</code>, <code>gz plan</code>)</li> <li>Execute and verify (<code>gz gates</code>, tests/docs checks)</li> <li>Present closeout evidence (<code>gz closeout</code>)</li> <li>Record human attestation (<code>gz attest</code>)</li> <li>Reconcile post-attestation (<code>gz audit</code>)</li> <li>Record receipts/accounting (<code>gz obpi emit-receipt</code> for OBPI scope, <code>gz adr emit-receipt</code> for ADR scope)</li> </ol>"},{"location":"user/#start-here","title":"Start Here","text":"<ul> <li>Quickstart</li> <li>Runbook</li> <li>Commands</li> <li>Canonical GovZero docs</li> </ul>"},{"location":"user/#flow","title":"Flow","text":"<pre><code>gz init -&gt; gz specify -&gt; gz plan -&gt; implement/verify -&gt; gz obpi emit-receipt -&gt; gz closeout -&gt; gz attest -&gt; gz audit -&gt; gz adr emit-receipt\n</code></pre>"},{"location":"user/quickstart/","title":"Quickstart","text":"<p>Run one governed ADR cycle with canonical closeout semantics.</p>"},{"location":"user/quickstart/#1-initialize","title":"1. Initialize","text":"<pre><code>uv tool install gzkit\ncd your-project\ngz init\n</code></pre>"},{"location":"user/quickstart/#2-create-intent-artifacts","title":"2. Create Intent Artifacts","text":"<pre><code>gz prd GZKIT-1.0.0\ngz plan 0.1.0 --title \"Example governed increment\"\n</code></pre> <p>Create OBPIs for ADR checklist items as needed.</p>"},{"location":"user/quickstart/#3-implement-and-verify","title":"3. Implement And Verify","text":"<pre><code>uv run gz gates --adr ADR-0.1.0\n</code></pre> <p>For heavy lane also run docs checks:</p> <pre><code>uv run mkdocs build --strict\nuv run gz lint\n</code></pre>"},{"location":"user/quickstart/#4-closeout-presentation","title":"4. Closeout Presentation","text":"<pre><code>uv run gz closeout ADR-0.1.0\n</code></pre> <p>Run the presented commands and observe results directly.</p>"},{"location":"user/quickstart/#5-human-attestation","title":"5. Human Attestation","text":"<pre><code>uv run gz attest ADR-0.1.0 --status completed\n</code></pre>"},{"location":"user/quickstart/#6-post-attestation-audit","title":"6. Post-Attestation Audit","text":"<pre><code>uv run gz audit ADR-0.1.0\n</code></pre>"},{"location":"user/quickstart/#7-receipt-accounting","title":"7. Receipt Accounting","text":"<pre><code>uv run gz adr emit-receipt ADR-0.1.0 --event validated --attestor \"&lt;Human Name&gt;\" --evidence-json '{\"scope\":\"ADR-0.1.0\",\"date\":\"YYYY-MM-DD\"}'\n</code></pre> <p>For OBPI-scope receipts during daily increments, use:</p> <pre><code>uv run gz obpi emit-receipt OBPI-0.1.0-01-&lt;slug&gt; --event completed --attestor \"&lt;Human Name&gt;\" --evidence-json '{\"attestation\":\"observed\",\"date\":\"YYYY-MM-DD\"}'\n</code></pre>"},{"location":"user/quickstart/#next","title":"Next","text":"<ul> <li>Runbook</li> <li>Lifecycle</li> <li>Closeout</li> <li>Command reference</li> </ul>"},{"location":"user/runbook/","title":"Operator Runbook","text":"<p>This runbook is a proof surface and must match executable runtime behavior.</p>"},{"location":"user/runbook/#operating-model-obpi-first","title":"Operating Model (OBPI-First)","text":"<ul> <li>The atomic unit of delivery is the OBPI (One Brief Per Item).</li> <li>ADRs are planning and attestation containers that roll up many OBPIs.</li> <li>Daily execution should iterate OBPI-by-OBPI, not wait for end-of-ADR batching.</li> </ul>"},{"location":"user/runbook/#loop-a-obpi-increment-primary-daily-loop","title":"Loop A: OBPI Increment (Primary Daily Loop)","text":"<pre><code># 1) Orientation + parent ADR context\nuv run gz status\nuv run gz status --table\nuv run gz adr status ADR-&lt;X.Y.Z&gt; --json\n\n# 2) Implement one OBPI increment (code + docs as needed)\n# 3) Verify this increment\nuv run gz implement --adr ADR-&lt;X.Y.Z&gt;\nuv run gz gates --gate 3 --adr ADR-&lt;X.Y.Z&gt;   # when docs changed\nuv run gz lint\n\n# 4) Update the OBPI brief with substantive implementation evidence\n#    (status Completed + concrete summary, not placeholders)\n#    Use parser-safe inline bullets in \"Implementation Summary\":\n#      - Files created/modified: &lt;paths&gt;\n#      - Tests added: &lt;files or (none)&gt;\n#      - Date completed: YYYY-MM-DD\n#    (Do not split values onto nested bullet lines.)\n\n# 5) Record OBPI-scoped receipt evidence on the OBPI itself\nuv run gz obpi emit-receipt OBPI-&lt;X.Y.Z-NN&gt;-&lt;slug&gt; --event completed --attestor \"&lt;Human Name&gt;\" --evidence-json '{\"attestation\":\"I attest I understand the completion of OBPI-&lt;X.Y.Z-NN&gt;.\",\"date\":\"YYYY-MM-DD\"}'\n</code></pre>"},{"location":"user/runbook/#drift-control-required-before-closeout","title":"Drift Control (Required Before Closeout)","text":"<p>Until ledger-derived brief sync is automated, treat OBPI brief status/date fields as drift-prone and always recompute truth from <code>gz</code> status surfaces before closeout:</p> <pre><code># 1) Ledger-first recompute view\nuv run gz adr status ADR-&lt;X.Y.Z&gt; --json\nuv run gz status --table\n\n# 2) Fail-closed audit of linked OBPIs\nuv run gz adr audit-check ADR-&lt;X.Y.Z&gt;\n</code></pre> <p>If <code>gz adr audit-check</code> reports missing or placeholder implementation evidence:</p> <ol> <li>Fix the OBPI brief <code>### Implementation Summary</code> with inline <code>- key: value</code> entries.</li> <li>Re-run <code>uv run gz adr status ADR-&lt;X.Y.Z&gt; --json</code>.</li> <li>Re-run <code>uv run gz adr audit-check ADR-&lt;X.Y.Z&gt;</code> until PASS.</li> </ol> <p>Tracked automation defect: <code>https://github.com/tvproductions/gzkit/issues/3</code>.</p>"},{"location":"user/runbook/#loop-b-adr-closeout-after-obpi-batch-completion","title":"Loop B: ADR Closeout (After OBPI Batch Completion)","text":"<p>Run this only when linked OBPIs are complete and evidenced.</p> <pre><code># 1) Reconcile ADR &lt;-&gt; OBPI completeness\nuv run gz adr audit-check ADR-&lt;X.Y.Z&gt;\n\n# 2) Closeout presentation (paths/commands only)\nuv run gz closeout ADR-&lt;X.Y.Z&gt;\n\n# 3) Human attestation (prerequisites enforced by default)\nuv run gz attest ADR-&lt;X.Y.Z&gt; --status completed\n\n# 4) Post-attestation audit (strict)\nuv run gz audit ADR-&lt;X.Y.Z&gt;\n\n# 5) Receipt/accounting at ADR scope\nuv run gz adr emit-receipt ADR-&lt;X.Y.Z&gt; --event validated --attestor \"&lt;Human Name&gt;\" --evidence-json '{\"scope\":\"ADR-&lt;X.Y.Z&gt;\",\"date\":\"YYYY-MM-DD\"}'\n</code></pre>"},{"location":"user/runbook/#normal-use-flows-concrete-example-captured-2026-02-22","title":"Normal Use Flows (Concrete Example, Captured 2026-02-22)","text":"<p>These are copy/paste examples from this repository using real IDs and current CLI output.</p>"},{"location":"user/runbook/#flow-1-daily-obpi-work-in-progress-adr","title":"Flow 1: Daily OBPI Work (In-Progress ADR)","text":"<p>Use an active ADR with incomplete OBPIs:</p> <pre><code>uv run gz adr status ADR-0.5.0-skill-lifecycle-governance --json\nuv run gz status --table\n</code></pre> <p>Output excerpt:</p> <pre><code>{\n  \"adr\": \"ADR-0.5.0-skill-lifecycle-governance\",\n  \"lifecycle_status\": \"Pending\",\n  \"gates\": {\n    \"1\": \"pass\",\n    \"2\": \"pending\",\n    \"3\": \"pending\",\n    \"4\": \"n/a\",\n    \"5\": \"pending\"\n  },\n  \"obpi_summary\": {\n    \"total\": 5,\n    \"completed\": 0,\n    \"incomplete\": 5,\n    \"unit_status\": \"pending\"\n  }\n}\n</code></pre> <p>Run implementation and verification for one increment:</p> <pre><code>uv run gz implement --adr ADR-0.5.0-skill-lifecycle-governance\nuv run gz gates --gate 3 --adr ADR-0.5.0-skill-lifecycle-governance\nuv run gz lint\n</code></pre> <p>After brief evidence is updated, emit OBPI receipt:</p> <pre><code>uv run gz obpi emit-receipt OBPI-0.5.0-05-obpi-acceptance-protocol-runtime-parity --event completed --attestor \"Jeffry Babb\" --evidence-json '{\"attestation\":\"I attest I understand the completion of OBPI-0.5.0-05.\",\"date\":\"2026-02-22\"}'\n</code></pre>"},{"location":"user/runbook/#flow-2-adr-closeout-obpis-completed","title":"Flow 2: ADR Closeout (OBPIs Completed)","text":"<p>Use an ADR whose OBPIs are completed:</p> <pre><code>uv run gz adr audit-check ADR-0.6.0-pool-promotion-protocol\n</code></pre> <p>Output:</p> <pre><code>ADR audit-check: ADR-0.6.0-pool-promotion-protocol\nPASS All linked OBPIs are completed with evidence.\n  - OBPI-0.6.0-01-pool-source-contract\n  - OBPI-0.6.0-02-promotion-command-lineage\n  - OBPI-0.6.0-03-operator-narratives-and-auditability\n</code></pre> <p>Dry-run closeout and attestation first:</p> <pre><code>uv run gz closeout ADR-0.6.0-pool-promotion-protocol --dry-run\nuv run gz attest ADR-0.6.0-pool-promotion-protocol --status completed --dry-run\n</code></pre> <p>Closeout dry-run excerpt:</p> <pre><code>Dry run: no ledger event will be written.\n  Would initiate closeout for: ADR-0.6.0-pool-promotion-protocol\n  Gate 2 (TDD): uv run -m unittest discover tests\n  Gate 3 (Docs): uv run mkdocs build --strict\n  Gate 4 (BDD): N/A (features/ not found; Gate 4 is N/A for this repository.)\n  Gate 5 (Human): Awaiting explicit attestation\n</code></pre> <p>Then run non-dry commands and record receipts:</p> <pre><code>uv run gz closeout ADR-0.6.0-pool-promotion-protocol\nuv run gz attest ADR-0.6.0-pool-promotion-protocol --status completed\nuv run gz audit ADR-0.6.0-pool-promotion-protocol\nuv run gz adr emit-receipt ADR-0.6.0-pool-promotion-protocol --event validated --attestor \"Jeffry Babb\" --evidence-json '{\"scope\":\"ADR-0.6.0-pool-promotion-protocol\",\"date\":\"2026-02-22\"}'\n</code></pre> <p>If you want to inspect receipt payloads before writing events:</p> <pre><code>uv run gz obpi emit-receipt OBPI-0.6.0-03-operator-narratives-and-auditability --event completed --attestor \"Jeffry Babb\" --evidence-json '{\"attestation\":\"I attest I understand the completion of OBPI-0.6.0-03.\",\"date\":\"2026-02-22\"}' --dry-run\nuv run gz adr emit-receipt ADR-0.6.0-pool-promotion-protocol --event validated --attestor \"Jeffry Babb\" --evidence-json '{\"scope\":\"ADR-0.6.0-pool-promotion-protocol\",\"date\":\"2026-02-22\"}' --dry-run\n</code></pre>"},{"location":"user/runbook/#verification-checklist-obpi-adr","title":"Verification Checklist (OBPI + ADR)","text":"<ul> <li><code>uv run -m unittest discover tests</code></li> <li><code>uv run gz lint</code></li> <li><code>uv run gz typecheck</code></li> <li><code>uv run mkdocs build --strict</code></li> <li><code>uv run gz validate --documents</code></li> <li><code>uv run gz cli audit</code></li> <li><code>uv run gz check-config-paths</code></li> <li><code>uv run gz adr audit-check ADR-&lt;X.Y.Z&gt;</code></li> <li><code>uv run gz adr status ADR-&lt;X.Y.Z&gt; --json</code></li> <li><code>uv run gz status --json</code></li> </ul>"},{"location":"user/runbook/#airlineops-parity-scan-canonical-root-rules","title":"AirlineOps Parity Scan Canonical-Root Rules","text":"<p>When running parity scans, canonical root resolution is deterministic and fail-closed:</p> <ol> <li>explicit override (if provided)</li> <li>sibling path <code>../airlineops</code></li> <li>absolute fallback <code>/Users/jeff/Documents/Code/airlineops</code></li> </ol> <p>If none resolve, stop and report blockers. Do not claim parity completion without canonical-root evidence.</p>"},{"location":"user/runbook/#notes","title":"Notes","text":"<ul> <li>Do not run <code>gz audit</code> pre-attestation.</li> <li>Do not use OBPI-scoped receipt emission as a substitute for ADR completion attestation.</li> <li><code>gz adr emit-receipt</code> remains available for ADR-level accounting and legacy scoped payload flows.</li> <li>For heavy lane without <code>features/</code>, Gate 4 is reported N/A with explicit rationale.</li> <li>Historical files under <code>docs/user/reference/**</code> are archival and may contain legacy command examples; active operator command contracts are in <code>docs/user/commands/**</code> and CLI help output.</li> </ul>"},{"location":"user/why/","title":"Why gzkit?","text":"<p>You're not against AI. You're against losing the plot.</p>"},{"location":"user/why/#the-degradation-pattern","title":"The Degradation Pattern","text":"Week What happens 1 You prompt carefully, review every line, understand what's built 2 You start skimming diffs, trust the green checkmarks 3 You batch approvals, \"looks good\" becomes reflexive 4 You're approving PRs you didn't read, for code you don't understand <p>By month two, you're a rubber stamp. The AI is the architect.</p>"},{"location":"user/why/#the-pain-points","title":"The Pain Points","text":"Pain Without gzkit With gzkit Claude forgets your decisions Repeat context every session ADRs persist intent; <code>gz state</code> shows history Review backlog grows Batch approve and hope Gates force checkpoints; can't skip Lose track of what's done Scroll through chat history Ledger tracks everything; <code>gz status</code> shows state Constraints drift Re-explain rules every conversation CLAUDE.md generated from canon No checkpoint before ship Merge when CI passes Gate 5 requires explicit <code>gz attest</code>"},{"location":"user/why/#the-honest-tradeoff","title":"The Honest Tradeoff","text":"<p>This is slower than multi-agent orchestration. That's the point.</p> <p>Some people can YOLO through agentic workflows\u2014let agents spawn agents, approve PRs in batches, ship at machine speed. If that works for you, gzkit is not your tool.</p> <p>But here's the bet: more people need the sanity of this pace than can handle the chaos of full autonomy.</p> <p>The friction is intentional:</p> <ul> <li>Reading everything is a pain. (That keeps you engaged.)</li> <li>Gates interrupt your flow. (That prevents rubber-stamping.)</li> <li>Attestation is manual. (That proves you were there.)</li> </ul>"},{"location":"user/why/#who-this-is-for","title":"Who This Is For","text":"<ul> <li>Solo developers using Claude Code who want to stay architects</li> <li>Small teams who need audit trails for AI-assisted work</li> <li>Anyone who's felt the drift from \"I'm building this\" to \"I'm approving this\"</li> </ul>"},{"location":"user/why/#who-this-is-not-for","title":"Who This Is Not For","text":"<ul> <li>Teams that want fully autonomous AI agents</li> <li>Projects where speed matters more than understanding</li> <li>Anyone comfortable approving code they didn't review</li> </ul>"},{"location":"user/why/#the-philosophy","title":"The Philosophy","text":"<p>gzkit implements the Zero Doctrine: the human is index zero.</p> <ul> <li>First in priority</li> <li>Final in authority</li> <li>Cannot be automated away</li> </ul> <p>The covenant has two sides:</p> <ol> <li>Gates constrain agents \u2014 They can't skip checkpoints</li> <li>Humans must engage \u2014 Read everything, question everything</li> </ol> <p>Without both sides, the covenant fails silently.</p>"},{"location":"user/why/#learn-more","title":"Learn More","text":"<ul> <li>Quickstart \u2014 Try it in 5 minutes</li> <li>OBPIs \u2014 Atomic work units</li> <li>Closeout Ceremony \u2014 How attestation works</li> <li>Daily Workflow \u2014 The daily habits</li> <li>Commands \u2014 Full reference</li> </ul>"},{"location":"user/commands/","title":"Commands","text":"<p>All command surfaces use <code>gz [subcommand] [*] [*]</code>.</p> <p>Command reference pages are operator manpages and part of Gate 3 proof.</p>"},{"location":"user/commands/#governance","title":"Governance","text":"Command Description <code>gz init</code> Initialize gzkit in a repository <code>gz prd</code> Create a Product Requirements Document <code>gz constitute</code> Create a constitution artifact <code>gz specify</code> Create an implementation brief (including OBPIs) <code>gz plan</code> Create an ADR <code>gz implement</code> Run Gate 2 and record results <code>gz gates</code> Run lane-required gates <code>gz status</code> Show multi-ADR OBPI progress and lifecycle status <code>gz state</code> Show artifact graph and readiness filters <code>gz adr status</code> Show focused OBPI progress for one ADR <code>gz adr promote</code> Promote a pool ADR into canonical ADR package structure <code>gz adr audit-check</code> Verify OBPI completeness/evidence for one ADR <code>gz closeout</code> Present closeout paths/commands and record closeout initiation <code>gz attest</code> Record human attestation with prerequisite enforcement <code>gz audit</code> Run strict post-attestation audit reconciliation <code>gz adr emit-receipt</code> Emit completed/validated receipt with optional evidence scope <code>gz obpi emit-receipt</code> Emit completed/validated receipt for one OBPI <code>gz git-sync</code> Run guarded sync ritual <code>gz migrate-semver</code> Record SemVer ID rename events <code>gz register-adrs</code> Register existing ADR files into ledger"},{"location":"user/commands/#validation-and-maintenance","title":"Validation And Maintenance","text":"Command Description <code>gz check</code> Run quality checks <code>gz lint</code> Run lint checks <code>gz format</code> Auto-format code <code>gz test</code> Run unit tests <code>gz typecheck</code> Run type checks <code>gz validate</code> Validate governance artifacts <code>gz skill audit</code> Audit skill lifecycle metadata and mirror parity <code>gz check-config-paths</code> Validate configured + manifest path coherence <code>gz cli audit</code> Validate CLI docs/manpage coverage <code>gz agent sync control-surfaces</code> Regenerate control surfaces <code>gz tidy</code> Run maintenance checks and cleanup"},{"location":"user/commands/#operator-sequences","title":"Operator Sequences","text":"<p>Primary daily loop (OBPI-first):</p> <ol> <li>Orientation and ADR context (<code>gz status</code>, <code>gz adr status</code>)</li> <li>One OBPI increment implementation and verification (<code>gz implement</code>, optional Gate 3 docs check)</li> <li>OBPI evidence update in brief + OBPI receipt (<code>gz obpi emit-receipt</code>)</li> </ol> <p>ADR closeout loop (after OBPI batch completion):</p> <ol> <li>ADR/OBPI reconciliation (<code>gz adr audit-check</code>)</li> <li>Closeout presentation (<code>gz closeout</code>)</li> <li>Human attestation (<code>gz attest</code>)</li> <li>Post-attestation audit (<code>gz audit</code>)</li> <li>ADR-level receipt/accounting (<code>gz adr emit-receipt</code>)</li> </ol>"},{"location":"user/commands/#global-options","title":"Global Options","text":"<p>All commands support:</p> <ul> <li><code>--help</code></li> <li><code>--version</code></li> </ul>"},{"location":"user/commands/adr-audit-check/","title":"gz adr audit-check","text":"<p>Verify linked OBPIs for one ADR are completed and include implementation evidence.</p>"},{"location":"user/commands/adr-audit-check/#usage","title":"Usage","text":"<pre><code>gz adr audit-check &lt;ADR-ID&gt; [--json]\n</code></pre>"},{"location":"user/commands/adr-audit-check/#what-it-checks","title":"What It Checks","text":"<ul> <li>ADR-to-OBPI linkage from ledger and artifact metadata</li> <li>OBPI completion markers (<code>status: Completed</code> and/or <code>**Brief Status:** Completed</code>)</li> <li>Presence of non-placeholder implementation summary evidence</li> </ul> <p>Implementation-summary evidence is parsed from inline markdown bullets in <code>### Implementation Summary</code>, for example:</p> <ul> <li><code>- Files created/modified: src/gzkit/cli.py, tests/test_cli.py</code></li> <li><code>- Tests added: tests/test_cli.py</code></li> <li><code>- Date completed: 2026-02-23</code></li> </ul> <p>Nested bullets or empty placeholder values can cause evidence to be treated as missing.</p> <p>Returns explicit missing-proof findings and exits non-zero on failure.</p>"},{"location":"user/commands/adr-audit-check/#example","title":"Example","text":"<pre><code>uv run gz adr audit-check ADR-0.3.0\n</code></pre>"},{"location":"user/commands/adr-emit-receipt/","title":"gz adr emit-receipt","text":"<p>Emit a receipt event (<code>completed</code> or <code>validated</code>) for an ADR.</p>"},{"location":"user/commands/adr-emit-receipt/#usage","title":"Usage","text":"<pre><code>gz adr emit-receipt &lt;ADR-ID&gt; --event {completed,validated} --attestor &lt;text&gt; [--evidence-json &lt;json&gt;] [--dry-run]\n</code></pre>"},{"location":"user/commands/adr-emit-receipt/#runtime-behavior","title":"Runtime Behavior","text":"<ul> <li>Validates receipt event choice.</li> <li>Validates <code>--evidence-json</code> as a JSON object (when provided).</li> <li>Blocks pool ADRs (<code>ADR-pool.*</code>) until promoted out of pool.</li> <li>Appends <code>audit_receipt_emitted</code> to the ledger (unless <code>--dry-run</code>).</li> </ul> <p>For OBPI-level receipt events, prefer <code>gz obpi emit-receipt</code>. ADR-scoped evidence payloads remain supported for compatibility. If you use ADR receipts for OBPI context, include explicit scope fields:</p> <ul> <li><code>scope: \"OBPI-...\"</code></li> <li><code>adr_completion: \"not_completed\"</code></li> <li><code>obpi_completion: \"attested_completed\"</code></li> </ul>"},{"location":"user/commands/adr-emit-receipt/#example","title":"Example","text":"<pre><code>uv run gz adr emit-receipt ADR-0.3.0 --event validated --attestor \"Jeffry Babb\" --evidence-json '{\"scope\":\"OBPI-0.3.0-04\",\"adr_completion\":\"not_completed\",\"obpi_completion\":\"attested_completed\"}'\n</code></pre>"},{"location":"user/commands/adr-promote/","title":"gz adr promote","text":"<p>Promote a pool ADR into canonical ADR package structure and record ledger rename lineage.</p>"},{"location":"user/commands/adr-promote/#usage","title":"Usage","text":"<pre><code>gz adr promote &lt;POOL-ADR&gt; --semver X.Y.Z [OPTIONS]\n</code></pre>"},{"location":"user/commands/adr-promote/#options","title":"Options","text":"Option Type Description <code>--semver</code> string Target ADR semantic version (<code>X.Y.Z</code>) <code>--slug</code> string Target ADR slug override (kebab-case) <code>--title</code> string Target ADR title override <code>--parent</code> string Target ADR parent override <code>--lane</code> <code>lite</code>/<code>heavy</code> Target ADR lane override <code>--status</code> <code>draft</code>/<code>proposed</code> Initial promoted ADR status (default: <code>proposed</code>) <code>--dry-run</code> flag Show promotion plan without writing files/events <code>--json</code> flag Emit structured output"},{"location":"user/commands/adr-promote/#protocol-enforced","title":"Protocol (Enforced)","text":"<ol> <li>Source must be a pool ADR (<code>ADR-pool.*</code> or legacy <code>ADR-*.pool.*</code>).</li> <li>Target ADR ID is derived as <code>ADR-{semver}-{slug}</code>.</li> <li>Target ADR package path is selected by SemVer bucket:</li> <li><code>0.0.z</code> -&gt; <code>foundation/</code></li> <li><code>0.y.z</code> (<code>y&gt;0</code>) -&gt; <code>pre-release/</code></li> <li><code>1.y.z+</code> -&gt; <code>&lt;major&gt;.0/</code></li> <li>Pool file is retained and updated to archival context:</li> <li><code>status: Superseded</code></li> <li><code>promoted_to: ADR-X.Y.Z-slug</code></li> <li>Promotion lineage is written to ledger as:</li> <li><code>artifact_renamed</code> with reason <code>pool_promotion</code></li> </ol>"},{"location":"user/commands/adr-promote/#examples","title":"Examples","text":"<pre><code># Preview promotion\ngz adr promote ADR-pool.gz-chores-system --semver 0.6.0 --dry-run\n\n# Apply promotion\ngz adr promote ADR-pool.gz-chores-system --semver 0.6.0\n</code></pre>"},{"location":"user/commands/adr-status/","title":"gz adr status","text":"<p>Show focused OBPI progress, lifecycle status, and gate readiness for one ADR.</p>"},{"location":"user/commands/adr-status/#usage","title":"Usage","text":"<pre><code>gz adr status &lt;ADR-ID&gt; [--json] [--show-gates]\n</code></pre>"},{"location":"user/commands/adr-status/#runtime-behavior","title":"Runtime Behavior","text":"<p><code>gz adr status</code> is ledger-first and additive, with OBPI completion as the primary progress unit.</p> <p>It keeps existing compatibility fields and adds derived semantics:</p> <ul> <li><code>obpis</code> (linked OBPI status rows: file presence, completion, evidence, and issues)</li> <li><code>obpi_summary</code> (<code>total</code>, <code>completed</code>, <code>incomplete</code>, <code>unit_status</code>, <code>outstanding_ids</code>)</li> <li><code>lane</code></li> <li><code>lifecycle_status</code></li> <li><code>closeout_phase</code></li> <li><code>attestation_term</code></li> <li><code>closeout_initiated</code></li> <li><code>validated</code></li> <li><code>gate4_na_reason</code> (when applicable)</li> </ul> <p>Default text output is OBPI-first and shows a summarized QC readiness line. QC readiness is fail-closed on OBPI completion: when linked OBPIs exist and unit status is not <code>completed</code>, readiness is <code>PENDING</code> with <code>OBPI completion</code> in pending checkpoints. Use <code>--show-gates</code> for full gate-by-gate diagnostics.</p> <p>Lifecycle is derived from <code>attested</code>, <code>closeout_initiated</code>, and <code>audit_receipt_emitted</code> events. OBPI-scoped receipts that carry <code>adr_completion: not_completed</code> remain accounting artifacts and do not set ADR lifecycle to <code>Validated</code>. If linked OBPIs exist but OBPI unit status is not <code>completed</code>, lifecycle is reported as <code>Pending</code> even when ledger attestation/receipt events exist.</p> <p>OBPI rows are resolved from linked ledger children plus on-disk briefs. Missing linked files are reported explicitly so gaps are visible in a single ADR view.</p>"},{"location":"user/commands/adr-status/#example","title":"Example","text":"<pre><code>uv run gz adr status ADR-0.3.0\nuv run gz adr status ADR-0.3.0 --show-gates\nuv run gz adr status ADR-0.3.0 --json\n</code></pre>"},{"location":"user/commands/agent-sync-control-surfaces/","title":"gz agent sync control-surfaces","text":"<p>Regenerate agent control surfaces and skill mirrors from canonical governance state.</p>"},{"location":"user/commands/agent-sync-control-surfaces/#usage","title":"Usage","text":"<pre><code>gz agent sync control-surfaces [--dry-run]\n</code></pre>"},{"location":"user/commands/agent-sync-control-surfaces/#determinism-contract","title":"Determinism Contract","text":"<p>For unchanged inputs, sync emits a deterministic updated-path list and stable operator output.</p>"},{"location":"user/commands/agent-sync-control-surfaces/#fail-closed-canonical-preflight","title":"Fail-Closed Canonical Preflight","text":"<p>Before any mirror propagation, sync validates canonical <code>.gzkit/skills</code> integrity.</p> <p>Blocking preflight failures include:</p> <ul> <li>missing canonical skill directories (without a legacy bootstrap candidate),</li> <li>missing <code>SKILL.md</code>,</li> <li>missing or invalid <code>SKILL.md</code> frontmatter identity fields.</li> </ul> <p>On failure, sync exits non-zero and prints recovery steps.</p>"},{"location":"user/commands/agent-sync-control-surfaces/#recovery-behavior-non-destructive","title":"Recovery Behavior (Non-Destructive)","text":"<p>Sync copies canonical files into mirrors but does not auto-delete mirror-only stale content.</p> <p>When stale mirror-only paths exist, sync:</p> <ol> <li>completes successfully,</li> <li>emits a recovery warning with stale paths,</li> <li>prints the manual cleanup protocol.</li> </ol> <p>Manual recovery protocol:</p> <pre><code>uv run gz skill audit --json\n# remove listed stale mirror-only paths\nuv run gz agent sync control-surfaces\nuv run gz skill audit\n</code></pre>"},{"location":"user/commands/agent-sync-control-surfaces/#examples","title":"Examples","text":"<pre><code># Preview targets only\nuv run gz agent sync control-surfaces --dry-run\n\n# Apply sync and view recovery warnings (if any)\nuv run gz agent sync control-surfaces\n</code></pre>"},{"location":"user/commands/attest/","title":"gz attest","text":"<p>Record human attestation for an ADR.</p>"},{"location":"user/commands/attest/#usage","title":"Usage","text":"<pre><code>gz attest &lt;ADR&gt; --status {completed,partial,dropped} [--reason &lt;text&gt;] [--force] [--dry-run]\n</code></pre>"},{"location":"user/commands/attest/#runtime-behavior","title":"Runtime Behavior","text":"<p><code>gz attest</code> enforces prerequisite gates before writing an attestation event.</p> <ul> <li>Lite lane: Gate 2 must be <code>pass</code>.</li> <li>Heavy lane: Gate 2 and Gate 3 must be <code>pass</code>.</li> <li>Heavy lane Gate 4: must be <code>pass</code> when <code>features/</code> exists; otherwise Gate 4 is treated as N/A with explicit rationale.</li> </ul> <p>If prerequisites fail, the command exits non-zero.</p> <p><code>--force</code> bypasses failed prerequisites, but <code>--reason</code> is mandatory when bypassing.</p>"},{"location":"user/commands/attest/#canonical-term-mapping","title":"Canonical Term Mapping","text":"<p>Input status tokens stay stable for CLI compatibility, but outputs map to canonical terms:</p> Input token Canonical term <code>completed</code> <code>Completed</code> <code>partial</code> <code>Completed \u2014 Partial</code> <code>dropped</code> <code>Dropped</code> <p><code>partial</code> and <code>dropped</code> always require <code>--reason</code>.</p>"},{"location":"user/commands/attest/#examples","title":"Examples","text":"<pre><code># Standard completion\ngz attest ADR-0.3.0 --status completed\n\n# Partial completion with rationale\ngz attest ADR-0.3.0 --status partial --reason \"Scope reduced to runtime parity\"\n\n# Dropped with rationale\ngz attest ADR-0.3.0 --status dropped --reason \"Superseded by newer ADR\"\n\n# Force bypass with explicit accountability rationale\ngz attest ADR-0.3.0 --status completed --force --reason \"Emergency override after manual verification\"\n\n# Preview only\ngz attest ADR-0.3.0 --status completed --dry-run\n</code></pre>"},{"location":"user/commands/attest/#notes","title":"Notes","text":"<ul> <li>Attestation writes an <code>attested</code> ledger event.</li> <li><code>gz status</code> and <code>gz adr status</code> display canonical lifecycle/term overlays derived from ledger events.</li> <li>Human attestation remains explicit and manual.</li> </ul>"},{"location":"user/commands/audit/","title":"gz audit","text":"<p>Run ADR audit reconciliation and persist audit artifacts.</p>"},{"location":"user/commands/audit/#usage","title":"Usage","text":"<pre><code>gz audit &lt;ADR-ID&gt; [--json] [--dry-run]\n</code></pre>"},{"location":"user/commands/audit/#runtime-behavior","title":"Runtime Behavior","text":"<p><code>gz audit</code> is strict post-attestation. Pool ADRs (<code>ADR-pool.*</code>) are blocked from audit until promoted out of pool.</p> <ul> <li>If the target ADR has no human attestation event, the command exits non-zero.</li> <li>The failure response includes explicit next steps (<code>gz closeout</code>, then <code>gz attest</code>).</li> <li><code>--dry-run</code> is non-mutating but still enforces post-attestation gating.</li> </ul> <p>After attestation is present, the command:</p> <ol> <li>Creates <code>&lt;adr-dir&gt;/audit/</code> and <code>&lt;adr-dir&gt;/audit/proofs/</code>.</li> <li>Runs verification commands from manifest defaults (test/lint/typecheck/docs).</li> <li>Writes proof files under <code>audit/proofs/</code>.</li> <li>Writes <code>AUDIT_PLAN.md</code> and <code>AUDIT.md</code>.</li> </ol> <p>If any verification command fails, <code>gz audit</code> exits non-zero.</p>"},{"location":"user/commands/audit/#options","title":"Options","text":"Option Description <code>--json</code> Emit machine-readable results/blockers <code>--dry-run</code> Show intended actions without writing files"},{"location":"user/commands/audit/#example","title":"Example","text":"<pre><code>uv run gz audit ADR-0.3.0\n</code></pre>"},{"location":"user/commands/check-config-paths/","title":"gz check-config-paths","text":"<p>Validate that <code>.gzkit.json</code> and manifest path declarations match on-disk repo structure.</p>"},{"location":"user/commands/check-config-paths/#usage","title":"Usage","text":"<pre><code>gz check-config-paths [--json]\n</code></pre>"},{"location":"user/commands/check-config-paths/#what-it-checks","title":"What It Checks","text":"<ul> <li>Required configured directories and files exist</li> <li>Manifest artifact paths exist</li> <li>Manifest control-surface paths exist with expected type (file vs directory)</li> <li>Legacy global OBPI path usage (<code>docs/design/obpis</code>) is rejected</li> </ul>"},{"location":"user/commands/check-config-paths/#example","title":"Example","text":"<pre><code>uv run gz check-config-paths\n</code></pre>"},{"location":"user/commands/check-config-paths/#options","title":"Options","text":"Option Description <code>--json</code> Emit machine-readable output"},{"location":"user/commands/cli-audit/","title":"gz cli audit","text":"<p>Audit CLI command documentation coverage and headings.</p>"},{"location":"user/commands/cli-audit/#usage","title":"Usage","text":"<pre><code>gz cli audit [--json]\n</code></pre>"},{"location":"user/commands/cli-audit/#what-it-checks","title":"What It Checks","text":"<ul> <li>Required command manpages exist under <code>docs/user/commands/</code></li> <li>Each page heading matches the command surface (<code># gz ...</code>)</li> <li><code>docs/user/commands/index.md</code> links to each required page</li> </ul>"},{"location":"user/commands/cli-audit/#example","title":"Example","text":"<pre><code>uv run gz cli audit\n</code></pre>"},{"location":"user/commands/cli-audit/#options","title":"Options","text":"Option Description <code>--json</code> Emit machine-readable output"},{"location":"user/commands/closeout/","title":"gz closeout","text":"<p>Initiate closeout mode for an ADR and record <code>closeout_initiated</code> in the ledger.</p>"},{"location":"user/commands/closeout/#usage","title":"Usage","text":"<pre><code>gz closeout &lt;ADR-ID&gt; [--json] [--dry-run]\n</code></pre>"},{"location":"user/commands/closeout/#runtime-behavior","title":"Runtime Behavior","text":"<p><code>gz closeout</code> is a presentation step. It emits paths and commands only. Pool ADRs (<code>ADR-pool.*</code>) are blocked from closeout until promoted out of pool.</p> <p>Output includes:</p> <ul> <li>Gate 1 ADR path</li> <li>Linked OBPI evidence paths</li> <li>Verification command set for the ADR lane</li> <li>Canonical attestation choices</li> <li>Heavy-lane Gate 4 command when <code>features/</code> exists</li> <li>Heavy-lane explicit Gate 4 N/A reason when <code>features/</code> is absent</li> </ul> <p>It does not interpret command outcomes.</p>"},{"location":"user/commands/closeout/#canonical-attestation-choices","title":"Canonical Attestation Choices","text":"<ul> <li><code>Completed</code></li> <li><code>Completed \u2014 Partial: [reason]</code></li> <li><code>Dropped \u2014 [reason]</code></li> </ul>"},{"location":"user/commands/closeout/#options","title":"Options","text":"Option Description <code>--json</code> Emit machine-readable closeout payload <code>--dry-run</code> Show payload without writing ledger event"},{"location":"user/commands/closeout/#example","title":"Example","text":"<pre><code>uv run gz closeout ADR-0.3.0\n</code></pre>"},{"location":"user/commands/constitute/","title":"gz constitute","text":"<p>Create a constitution document.</p>"},{"location":"user/commands/constitute/#usage","title":"Usage","text":"<pre><code>gz constitute &lt;name&gt; [OPTIONS]\n</code></pre>"},{"location":"user/commands/constitute/#arguments","title":"Arguments","text":"Argument Required Description <code>name</code> Yes Constitution identifier (e.g., <code>charter</code>)"},{"location":"user/commands/constitute/#options","title":"Options","text":"Option Type Description <code>--title</code> string Constitution title (defaults to a title-cased name) <code>--dry-run</code> flag Show actions without writing"},{"location":"user/commands/constitute/#what-it-does","title":"What It Does","text":"<ol> <li>Creates a constitution document from template</li> <li>Records the creation event in the ledger</li> </ol>"},{"location":"user/commands/constitute/#example","title":"Example","text":"<pre><code># Create a constitution\ngz constitute charter\n\n# With title\ngz constitute charter --title \"Project Charter\"\n\n# Dry run\ngz constitute charter --dry-run\n</code></pre>"},{"location":"user/commands/constitute/#output","title":"Output","text":"<pre><code>Created constitution: design/constitutions/charter.md\n</code></pre>"},{"location":"user/commands/gates/","title":"gz gates","text":"<p>Run applicable gates for the current lane and record results in the ledger.</p>"},{"location":"user/commands/gates/#usage","title":"Usage","text":"<pre><code>gz gates [OPTIONS]\n</code></pre>"},{"location":"user/commands/gates/#options","title":"Options","text":"Option Type Description <code>--gate</code> integer Run a specific gate (1-5) <code>--adr</code> string ADR identifier to associate gate results with"},{"location":"user/commands/gates/#what-it-does","title":"What It Does","text":"<ol> <li>Resolves the target ADR (uses <code>--adr</code> or the single pending ADR)</li> <li>Runs the gates required for the current lane</li> <li>Appends a <code>gate_checked</code> event for each gate that runs</li> <li>Exits non-zero if any required gate fails</li> </ol> <p>Gate commands use <code>.gzkit/manifest.json</code> when available:</p> <ul> <li>Gate 2 (TDD): <code>verification.test</code></li> <li>Gate 3 (Docs): <code>verification.docs</code> or <code>uv run mkdocs build --strict</code></li> <li>Gate 4 (BDD): <code>verification.bdd</code> or <code>uv run -m behave features/</code></li> </ul>"},{"location":"user/commands/gates/#example","title":"Example","text":"<pre><code># Run all required gates for the current lane\ngz gates\n\n# Run a specific gate\ngz gates --gate 2\n\n# Run gates for a specific ADR\ngz gates --adr ADR-0.2.0\n</code></pre>"},{"location":"user/commands/git-sync/","title":"gz git-sync","text":"<p>Guarded git sync ritual for gzkit repositories.</p>"},{"location":"user/commands/git-sync/#usage","title":"Usage","text":"<pre><code>gz git-sync [OPTIONS]\n</code></pre>"},{"location":"user/commands/git-sync/#options","title":"Options","text":"Option Type Description <code>--branch</code> string Branch to sync (defaults to current branch) <code>--remote</code> string Remote name (default: <code>origin</code>) <code>--apply</code> flag Execute actions (dry-run by default) <code>--lint/--no-lint</code> flag Run <code>gz lint</code> before and after sync <code>--test/--no-test</code> flag Run <code>gz test</code> before sync <code>--auto-add/--no-auto-add</code> flag Auto stage changed files with <code>git add -A</code> <code>--push/--no-push</code> flag Push if branch is ahead <code>--json</code> flag Output JSON summary"},{"location":"user/commands/git-sync/#what-it-does","title":"What It Does","text":"<ol> <li>Validates git repo + branch state.</li> <li>Plans sync actions (fetch, pull/rebase, push).</li> <li>Optionally stages/commits local changes.</li> <li>Runs lint/test guardrails when requested.</li> <li>Executes sync operations when <code>--apply</code> is set.</li> </ol>"},{"location":"user/commands/git-sync/#examples","title":"Examples","text":"<pre><code># Dry-run plan\ngz git-sync\n\n# Full ritual with guardrails\ngz git-sync --apply --lint --test\n</code></pre>"},{"location":"user/commands/implement/","title":"gz implement","text":"<p>Run Gate 2 (TDD) and record results in the ledger.</p>"},{"location":"user/commands/implement/#usage","title":"Usage","text":"<pre><code>gz implement [OPTIONS]\n</code></pre>"},{"location":"user/commands/implement/#options","title":"Options","text":"Option Type Description <code>--adr</code> string ADR identifier to associate gate results with"},{"location":"user/commands/implement/#what-it-does","title":"What It Does","text":"<ol> <li>Resolves the target ADR (uses <code>--adr</code> or the single pending ADR)</li> <li>Runs Gate 2 using the manifest test command</li> <li>Appends a <code>gate_checked</code> event to the ledger</li> <li>Exits non-zero if Gate 2 fails</li> </ol>"},{"location":"user/commands/implement/#example","title":"Example","text":"<pre><code># Run Gate 2 for the current ADR\ngz implement\n\n# Run Gate 2 for a specific ADR\ngz implement --adr ADR-0.2.0\n</code></pre>"},{"location":"user/commands/init/","title":"gz init","text":"<p>Initialize gzkit in the current project.</p>"},{"location":"user/commands/init/#usage","title":"Usage","text":"<pre><code>gz init [OPTIONS]\n</code></pre>"},{"location":"user/commands/init/#options","title":"Options","text":"Option Type Default Description <code>--mode</code> <code>lite</code> | <code>heavy</code> <code>lite</code> Governance mode <code>--force</code> flag \u2014 Overwrite existing initialization <code>--dry-run</code> flag \u2014 Show actions without writing"},{"location":"user/commands/init/#what-it-does","title":"What It Does","text":"<ol> <li>Creates <code>.gzkit/</code> directory with ledger</li> <li>Creates <code>.gzkit.json</code> configuration</li> <li>Detects project structure (source, tests, docs paths)</li> <li>Generates <code>CLAUDE.md</code> from governance canon</li> <li>Sets up agent hooks (Claude, Copilot)</li> <li>Creates <code>design/</code> directories for governance artifacts</li> <li>Scans for existing PRDs/ADRs and offers to register them</li> </ol>"},{"location":"user/commands/init/#modes","title":"Modes","text":""},{"location":"user/commands/init/#lite-default","title":"Lite (default)","text":"<p>Gates 1 and 2:</p> <ul> <li>ADR required</li> <li>Tests required</li> </ul> <p>Use for internal changes that don't affect external contracts.</p>"},{"location":"user/commands/init/#heavy","title":"Heavy","text":"<p>All five gates:</p> <ul> <li>ADR required</li> <li>Tests required</li> <li>Documentation required</li> <li>BDD acceptance tests required</li> <li>Human attestation required</li> </ul> <p>Use when changing CLI, API, or schema contracts.</p>"},{"location":"user/commands/init/#example","title":"Example","text":"<pre><code># Initialize with defaults\ngz init\n\n# Initialize in heavy mode\ngz init --mode heavy\n\n# Reinitialize (overwrites existing)\ngz init --force\n\n# Dry run\ngz init --dry-run\n</code></pre>"},{"location":"user/commands/init/#output","title":"Output","text":"<pre><code>Initializing gzkit for my-project in lite mode...\n  Created design/prd/\n  Created design/constitutions/\n  Created design/briefs/\n  Created design/adr/\n  Generated CLAUDE.md\n  Created .claude/settings.json\n  Created .copilotignore\n  Scaffolded 3 core skills\n\ngzkit initialized successfully!\n\nNext steps:\n  gz prd &lt;name&gt;       Create a PRD\n  gz status           Check gate status\n  gz validate         Validate artifacts\n</code></pre>"},{"location":"user/commands/migrate-semver/","title":"gz migrate-semver","text":"<p>Record artifact ID rename migrations in the append-only ledger.</p>"},{"location":"user/commands/migrate-semver/#usage","title":"Usage","text":"<pre><code>gz migrate-semver [OPTIONS]\n</code></pre>"},{"location":"user/commands/migrate-semver/#options","title":"Options","text":"Option Type Description <code>--dry-run</code> flag Show rename events without writing"},{"location":"user/commands/migrate-semver/#what-it-does","title":"What It Does","text":"<ol> <li>Scans ledger history for known old artifact IDs (including legacy SemVer pool IDs).</li> <li>Appends <code>artifact_renamed</code> events for matching IDs.</li> <li>Keeps ledger append-only (no rewrites).</li> <li>Makes <code>gz state</code> and <code>gz status</code> resolve renamed IDs to canonical IDs.</li> </ol>"},{"location":"user/commands/migrate-semver/#example","title":"Example","text":"<pre><code># Preview migration\ngz migrate-semver --dry-run\n\n# Apply migration\ngz migrate-semver\n</code></pre>"},{"location":"user/commands/migrate-semver/#notes","title":"Notes","text":"<ul> <li>Safe to run repeatedly: existing rename events are skipped.</li> <li>This is the supported path for ID migrations (SemVer and pool ADR naming); do not edit <code>.gzkit/ledger.jsonl</code> manually.</li> </ul>"},{"location":"user/commands/obpi-emit-receipt/","title":"gz obpi emit-receipt","text":"<p>Emit a receipt event (<code>completed</code> or <code>validated</code>) for a specific OBPI.</p>"},{"location":"user/commands/obpi-emit-receipt/#usage","title":"Usage","text":"<pre><code>gz obpi emit-receipt &lt;OBPI-ID&gt; --event {completed,validated} --attestor &lt;text&gt; [--evidence-json &lt;json&gt;] [--dry-run]\n</code></pre>"},{"location":"user/commands/obpi-emit-receipt/#runtime-behavior","title":"Runtime Behavior","text":"<ul> <li>Resolves OBPI IDs through ledger rename chains.</li> <li>Requires the OBPI to exist in ledger state and on-disk ADR-local <code>obpis/</code> paths.</li> <li>Blocks OBPIs whose parent ADR is still in pool state.</li> <li>Validates <code>--evidence-json</code> as a JSON object (when provided).</li> <li>Appends <code>obpi_receipt_emitted</code> to the ledger (unless <code>--dry-run</code>).</li> </ul>"},{"location":"user/commands/obpi-emit-receipt/#example","title":"Example","text":"<pre><code>uv run gz obpi emit-receipt OBPI-0.6.0-02-promotion-command-lineage --event validated --attestor \"human:Jeff\" --evidence-json '{\"acceptance\":\"operator observed deterministic pool promotion behavior\",\"date\":\"2026-02-21\"}'\n</code></pre>"},{"location":"user/commands/plan/","title":"gz plan","text":"<p>Create a new Architecture Decision Record (ADR) linked to a brief.</p>"},{"location":"user/commands/plan/#usage","title":"Usage","text":"<pre><code>gz plan &lt;name&gt; --brief &lt;BRIEF-ID&gt; [OPTIONS]\n</code></pre>"},{"location":"user/commands/plan/#arguments","title":"Arguments","text":"Argument Required Description <code>name</code> Yes ADR name or identifier"},{"location":"user/commands/plan/#options","title":"Options","text":"Option Type Default Description <code>--brief</code> string required Parent brief ID <code>--semver</code> string <code>0.1.0</code> Semantic version <code>--lane</code> <code>lite</code> | <code>heavy</code> <code>lite</code> Governance lane <code>--title</code> string \u2014 ADR title <code>--dry-run</code> flag \u2014 Show actions without writing"},{"location":"user/commands/plan/#what-it-does","title":"What It Does","text":"<ol> <li>Creates an ADR document from template</li> <li>Links it to the parent brief</li> <li>Records the creation event in the ledger</li> <li>Sets up gate tracking for this ADR</li> </ol>"},{"location":"user/commands/plan/#example","title":"Example","text":"<pre><code># Basic usage\ngz plan login-impl --brief BRIEF-add-login\n\n# With options\ngz plan login-impl --brief BRIEF-add-login --semver 0.2.0 --lane heavy --title \"Login Implementation\"\n\n# Dry run\ngz plan login-impl --brief BRIEF-add-login --dry-run\n</code></pre>"},{"location":"user/commands/plan/#output","title":"Output","text":"<pre><code>Created ADR: design/adr/ADR-0.1.0.md\n</code></pre>"},{"location":"user/commands/plan/#adr-template","title":"ADR Template","text":"<p>The created ADR contains:</p> <ul> <li>Metadata: ID, title, version, lane, parent</li> <li>Status: Draft (initially)</li> <li>Problem Statement: What problem this solves</li> <li>Decision: The technical approach</li> <li>Consequences: Tradeoffs and implications</li> <li>Attestation Table: For tracking sign-off</li> </ul>"},{"location":"user/commands/plan/#workflow","title":"Workflow","text":"<ol> <li>Create a brief with <code>gz specify</code></li> <li>Create an ADR with <code>gz plan</code> (this command)</li> <li>Implement the solution</li> <li>Check gates with <code>gz status</code></li> <li>Attest with <code>gz attest</code></li> </ol>"},{"location":"user/commands/prd/","title":"gz prd","text":"<p>Create a new Product Requirements Document (PRD).</p>"},{"location":"user/commands/prd/#usage","title":"Usage","text":"<pre><code>gz prd &lt;name&gt; [OPTIONS]\n</code></pre>"},{"location":"user/commands/prd/#arguments","title":"Arguments","text":"Argument Required Description <code>name</code> Yes PRD name (e.g., <code>my-feature-1.0.0</code>)"},{"location":"user/commands/prd/#options","title":"Options","text":"Option Type Description <code>--title</code> string PRD title (defaults to name) <code>--dry-run</code> flag Show actions without writing"},{"location":"user/commands/prd/#what-it-does","title":"What It Does","text":"<ol> <li>Creates a PRD document from template</li> <li>Records the creation event in the ledger</li> <li>Sets up the PRD as a parent for briefs</li> </ol>"},{"location":"user/commands/prd/#example","title":"Example","text":"<pre><code># Basic usage\ngz prd my-feature-1.0.0\n\n# With title\ngz prd my-feature-1.0.0 --title \"My Awesome Feature\"\n\n# Dry run\ngz prd my-feature-1.0.0 --dry-run\n</code></pre>"},{"location":"user/commands/prd/#output","title":"Output","text":"<pre><code>Created PRD: design/prd/PRD-my-feature-1.0.0.md\n</code></pre>"},{"location":"user/commands/prd/#prd-template","title":"PRD Template","text":"<p>The created PRD contains:</p> <ul> <li>Metadata: ID, title, version, status</li> <li>Overview: High-level description</li> <li>Goals: What success looks like</li> <li>Non-Goals: What's explicitly out of scope</li> <li>Requirements: Functional and non-functional</li> <li>Success Metrics: How to measure completion</li> </ul>"},{"location":"user/commands/prd/#when-to-use","title":"When to Use","text":"<p>Create a PRD when:</p> <ul> <li>Starting a new product or major feature</li> <li>Defining scope for a body of work</li> <li>Need a parent artifact for multiple briefs</li> </ul> <p>For smaller changes, you might skip directly to <code>gz specify</code>.</p>"},{"location":"user/commands/prd/#workflow","title":"Workflow","text":"<ol> <li>Create a PRD with <code>gz prd</code> (this command)</li> <li>Create briefs with <code>gz specify --parent PRD-...</code></li> <li>Create ADRs with <code>gz plan --brief BRIEF-...</code></li> <li>Implement and attest</li> </ol>"},{"location":"user/commands/register-adrs/","title":"gz register-adrs","text":"<p>Register ADR files that exist in canon but are missing from ledger state.</p>"},{"location":"user/commands/register-adrs/#usage","title":"Usage","text":"<pre><code>gz register-adrs [OPTIONS]\n</code></pre>"},{"location":"user/commands/register-adrs/#options","title":"Options","text":"Option Type Description <code>--lane</code> <code>lite</code> or <code>heavy</code> Default lane when ADR metadata does not declare one <code>--pool-only/--all</code> flag Register pool ADRs only (default) or all ADRs <code>--dry-run</code> flag Show registration actions without writing ledger events"},{"location":"user/commands/register-adrs/#what-it-does","title":"What It Does","text":"<ol> <li>Scans existing ADR files under the configured design root.</li> <li>Parses ADR IDs from frontmatter (<code>id:</code>) or header fallback.</li> <li>Filters to pool ADRs by default (<code>--all</code> includes non-pool ADRs too).</li> <li>Checks which ADRs are already represented in ledger state.</li> <li>Appends <code>adr_created</code> events for missing ADRs only.</li> </ol>"},{"location":"user/commands/register-adrs/#examples","title":"Examples","text":"<pre><code># Preview missing ADR registrations\ngz register-adrs --dry-run\n\n# Record missing ADRs in ledger\ngz register-adrs\n\n# Include non-pool ADRs too\ngz register-adrs --all\n</code></pre>"},{"location":"user/commands/skill-audit/","title":"gz skill audit","text":"<p>Audit skill lifecycle metadata and canonical mirror parity.</p>"},{"location":"user/commands/skill-audit/#usage","title":"Usage","text":"<pre><code>gz skill audit [--json] [--strict]\n</code></pre>"},{"location":"user/commands/skill-audit/#what-it-checks","title":"What It Checks","text":"<ul> <li>Skill directory naming is kebab-case.</li> <li><code>SKILL.md</code> frontmatter has required lifecycle fields.</li> <li>Frontmatter <code>name</code> matches the skill directory name.</li> <li>Mirror <code>SKILL.md</code> frontmatter <code>name</code> must match mirrored directory name.</li> <li>Canonical <code>.gzkit/skills</code> entries match mirror surfaces:</li> <li><code>.agents/skills</code></li> <li><code>.claude/skills</code></li> <li><code>.github/skills</code></li> </ul>"},{"location":"user/commands/skill-audit/#mirror-identity-contract-fail-closed","title":"Mirror Identity Contract (Fail-Closed)","text":"<p>For every mirrored skill, these frontmatter fields must match canonical exactly:</p> <ul> <li><code>name</code></li> <li><code>description</code></li> <li><code>lifecycle_state</code></li> <li><code>owner</code></li> <li><code>last_reviewed</code></li> </ul> <p>Any mirror drift, missing mirror directories, or missing mirror <code>SKILL.md</code> files is a blocking error.</p>"},{"location":"user/commands/skill-audit/#options","title":"Options","text":"Option Description <code>--json</code> Emit machine-readable report payload <code>--strict</code> Treat warnings as blocking failures"},{"location":"user/commands/skill-audit/#example","title":"Example","text":"<pre><code>uv run gz skill audit\nuv run gz skill audit --json\nuv run gz agent sync control-surfaces\nuv run gz skill audit\n</code></pre>"},{"location":"user/commands/specify/","title":"gz specify","text":"<p>Create a new implementation brief.</p>"},{"location":"user/commands/specify/#usage","title":"Usage","text":"<pre><code>gz specify &lt;name&gt; --parent &lt;PARENT-ID&gt; [OPTIONS]\n</code></pre>"},{"location":"user/commands/specify/#arguments","title":"Arguments","text":"Argument Required Description <code>name</code> Yes Brief name"},{"location":"user/commands/specify/#options","title":"Options","text":"Option Type Default Description <code>--parent</code> string required Parent ADR ID <code>--lane</code> <code>lite</code> | <code>heavy</code> <code>lite</code> Governance lane <code>--title</code> string \u2014 Brief title <code>--dry-run</code> flag \u2014 Show actions without writing"},{"location":"user/commands/specify/#what-it-does","title":"What It Does","text":"<ol> <li>Creates a brief document from template</li> <li>Resolves the parent ADR and writes the OBPI under that ADR package <code>obpis/</code> directory</li> <li>Records the creation event in the ledger</li> <li>Configures lane-specific requirements (docs, BDD)</li> </ol> <p>Pool ADRs (<code>ADR-pool.*</code> or legacy <code>ADR-*.pool.*</code>) are blocked as parents until promoted.</p>"},{"location":"user/commands/specify/#example","title":"Example","text":"<pre><code># Basic usage\ngz specify add-login --parent ADR-0.4.0-skill-capability-mirroring\n\n# With options\ngz specify add-login --parent ADR-0.4.0-skill-capability-mirroring --lane heavy --title \"Add Login Button\"\n\n# Dry run\ngz specify add-login --parent PRD-my-feature-1.0.0 --dry-run\n</code></pre>"},{"location":"user/commands/specify/#output","title":"Output","text":"<pre><code>Created OBPI: docs/design/adr/pre-release/ADR-0.4.0-skill-capability-mirroring/obpis/OBPI-0.4.0-02-add-login.md\n</code></pre>"},{"location":"user/commands/specify/#brief-template","title":"Brief Template","text":"<p>The created brief contains:</p> <ul> <li>Metadata: ID, title, parent, lane, status</li> <li>Intent: What you want to accomplish</li> <li>Acceptance Criteria: How to know it's done</li> <li>Out of Scope: What this brief doesn't cover</li> <li>Dependencies: What this depends on</li> <li>Lane Requirements: Docs/BDD needed (based on lane)</li> </ul>"},{"location":"user/commands/specify/#lanes","title":"Lanes","text":""},{"location":"user/commands/specify/#lite-default","title":"Lite (default)","text":"<ul> <li>Documentation: No</li> <li>BDD: No</li> <li>For internal changes</li> </ul>"},{"location":"user/commands/specify/#heavy","title":"Heavy","text":"<ul> <li>Documentation: Yes</li> <li>BDD: Yes</li> <li>For contract changes (CLI, API, schema)</li> </ul>"},{"location":"user/commands/specify/#workflow","title":"Workflow","text":"<ol> <li>(Optional) Create a PRD with <code>gz prd</code></li> <li>Create an ADR with <code>gz plan</code></li> <li>Create an OBPI with <code>gz specify --parent ADR-...</code></li> <li>Implement the solution</li> <li>Attest with <code>gz attest</code></li> </ol>"},{"location":"user/commands/state/","title":"gz state","text":"<p>Query ledger artifact relationships and derived ADR semantics.</p>"},{"location":"user/commands/state/#usage","title":"Usage","text":"<pre><code>gz state [--json] [--blocked] [--ready]\n</code></pre>"},{"location":"user/commands/state/#filters","title":"Filters","text":"<ul> <li><code>--blocked</code>: show unattested artifacts.</li> <li><code>--ready</code>: show ADRs that are genuinely ready for attestation.</li> </ul> <p><code>--ready</code> means:</p> <ul> <li>ADR is unattested, and</li> <li>prerequisite gates required by lane are satisfied.</li> </ul> <p>It is not just \"pending attestation\".</p>"},{"location":"user/commands/state/#derived-adr-fields","title":"Derived ADR Fields","text":"<p>ADR entries include additive derived semantics (for example <code>lifecycle_status</code>, <code>closeout_phase</code>, <code>attestation_term</code>) based on ledger events.</p>"},{"location":"user/commands/state/#example","title":"Example","text":"<pre><code>uv run gz state --ready\nuv run gz state --ready --json\n</code></pre>"},{"location":"user/commands/status/","title":"gz status","text":"<p>Display OBPI progress, lifecycle status, and gate readiness across ADRs.</p>"},{"location":"user/commands/status/#usage","title":"Usage","text":"<pre><code>gz status [--json] [--table] [--show-gates]\n</code></pre>"},{"location":"user/commands/status/#runtime-behavior","title":"Runtime Behavior","text":"<p><code>gz status</code> derives ADR lifecycle from ledger events and treats OBPI completion as the primary progress unit.</p> <p>Per ADR it reports:</p> <ul> <li>OBPI summary (<code>total</code>, <code>completed</code>, <code>incomplete</code>, <code>unit_status</code>)</li> <li>OBPI rows (linked file presence, completion, evidence, issues)</li> <li>QC readiness summary (<code>READY</code> / <code>PENDING</code> with pending checkpoints)</li> <li>Canonical lifecycle (<code>Pending</code>, <code>Completed</code>, <code>Validated</code>, <code>Abandoned</code>)</li> <li>Canonical attestation term when attested</li> <li>Gate summaries (<code>1..5</code> where lane-applicable) only when <code>--show-gates</code> is supplied</li> <li>Heavy-lane Gate 4 N/A rationale when <code>features/</code> is absent</li> </ul> <p><code>--table</code> renders a stable summary table with one row per ADR: - ADR id - lifecycle status - lane - OBPI completion ratio - OBPI unit status - QC readiness - pending check categories</p> <p>QC readiness is fail-closed for OBPI-first delivery: - when linked OBPIs exist and OBPI unit is not <code>completed</code>, <code>QC</code> reports <code>PENDING</code> - <code>Pending Checks</code> includes <code>OBPI completion</code> even if gate checks are otherwise passing</p> <p><code>Validated</code> applies to ADR-level validation receipts. OBPI-scoped receipts marked with <code>adr_completion: not_completed</code> do not mark the parent ADR as validated.</p> <p>When linked OBPIs exist and the OBPI unit is not <code>completed</code>, lifecycle is reported as <code>Pending</code> even if ledger attestation/receipt events indicate <code>Completed</code> or <code>Validated</code>.</p>"},{"location":"user/commands/status/#json-output","title":"JSON Output","text":"<p><code>--json</code> includes the existing top-level shape plus enriched per-ADR data: - <code>obpis</code> - <code>obpi_summary</code> - <code>gates</code> - <code>lane</code> - <code>lifecycle_status</code> - <code>attestation_term</code> - <code>closeout_phase</code> - related additive fields</p>"},{"location":"user/commands/status/#example","title":"Example","text":"<pre><code>uv run gz status\nuv run gz status --table\nuv run gz status --show-gates\nuv run gz status --json\n</code></pre> <p>Table output excerpt (captured 2026-02-22):</p> <pre><code>ADR Status\n| ADR                                  | Lifecycle | Lane  | OBPI | OBPI Unit | QC      | Pending Checks               |\n| ------------------------------------ | --------- | ----- | ---- | --------- | ------- | ---------------------------- |\n| ADR-0.6.0-pool-promotion-protocol    | Pending   | HEAVY | 3/3  | COMPLETED | PENDING | Human attestation            |\n| ADR-0.4.0-skill-capability-mirroring | Validated | HEAVY | 4/4  | COMPLETED | READY   | -                            |\n</code></pre>"},{"location":"user/concepts/closeout/","title":"Closeout Ceremony","text":"<p>Closeout is a mode where the agent presents evidence paths and commands, and the human observes and decides.</p> <p>Canonical GovZero source: <code>docs/governance/GovZero/audit-protocol.md</code>.</p>"},{"location":"user/concepts/closeout/#sequence","title":"Sequence","text":"<ol> <li>Orientation</li> <li>Confirm target ADR and OBPI scope.</li> <li>Confirm lane obligations.</li> <li>Presentation (<code>gz closeout</code>)</li> <li>Agent provides Gate 1 path plus verification commands.</li> <li>Output is commands/paths only, no interpreted outcomes.</li> <li>Human Observation</li> <li>Human runs commands and inspects artifacts directly.</li> <li>Attestation (<code>gz attest</code>)</li> <li>Human records <code>completed</code>, <code>partial</code>, or <code>dropped</code>.</li> <li><code>gz attest</code> enforces prerequisite gates by default.</li> <li>Post-attestation Audit (<code>gz audit</code>)</li> <li>Reconciliation only; blocked before attestation.</li> <li>Receipts/Accounting (<code>gz adr emit-receipt</code>)</li> <li>Record completed/validated receipts, including OBPI-scoped evidence when appropriate.</li> </ol>"},{"location":"user/concepts/closeout/#heavy-lane-gate-4-handling","title":"Heavy Lane Gate 4 Handling","text":"<p>For heavy lane ADRs:</p> <ul> <li>If <code>features/</code> exists, closeout includes the Gate 4 BDD command.</li> <li>If <code>features/</code> is absent, closeout and status surfaces report Gate 4 as N/A with explicit rationale.</li> </ul>"},{"location":"user/concepts/closeout/#canonical-attestation-choices","title":"Canonical Attestation Choices","text":"<ul> <li><code>Completed</code></li> <li><code>Completed \u2014 Partial: [reason]</code></li> <li><code>Dropped \u2014 [reason]</code></li> </ul>"},{"location":"user/concepts/closeout/#related","title":"Related","text":"<ul> <li>Lifecycle</li> <li>Gates</li> <li>gz closeout</li> <li>gz attest</li> <li>gz audit</li> </ul>"},{"location":"user/concepts/gates/","title":"Gates","text":"<p>Gates are verification checkpoints in the covenant.</p>"},{"location":"user/concepts/gates/#gate-set","title":"Gate Set","text":"Gate Name Applies 1 ADR Lite, Heavy 2 TDD Lite, Heavy 3 Docs Heavy 4 BDD Heavy 5 Human Attestation Heavy"},{"location":"user/concepts/gates/#enforcement-notes","title":"Enforcement Notes","text":"<ul> <li><code>gz attest</code> enforces prerequisite gates by default.</li> <li>Lite lane attestation requires Gate 2 pass.</li> <li>Heavy lane attestation requires Gate 2 and Gate 3 pass.</li> <li>Heavy lane Gate 4 must pass when <code>features/</code> exists; otherwise explicit N/A rationale applies.</li> <li><code>--force</code> exists for accountable overrides and requires rationale when bypassing failed prerequisites.</li> </ul>"},{"location":"user/concepts/gates/#gate-5-authority","title":"Gate 5 Authority","text":"<p>Gate 5 is explicit human attestation.</p> <ul> <li>Agents present evidence.</li> <li>Humans observe evidence.</li> <li>Humans record attestation.</li> </ul> <p>Audit and receipts are downstream accounting, not substitutes for human attestation.</p>"},{"location":"user/concepts/gates/#related","title":"Related","text":"<ul> <li>Lanes</li> <li>Closeout</li> <li>gz attest</li> <li>gz audit</li> </ul>"},{"location":"user/concepts/lanes/","title":"Lanes","text":"<p>Lanes determine which gates must be satisfied.</p>"},{"location":"user/concepts/lanes/#lane-matrix","title":"Lane Matrix","text":"Lane Required gates Typical trigger Lite 1, 2 Internal behavior changes Heavy 1, 2, 3, 4, 5 External contract changes"},{"location":"user/concepts/lanes/#heavy-lane-gate-4-detail","title":"Heavy-Lane Gate 4 Detail","text":"<p>Heavy lane expects BDD verification (Gate 4). If no <code>features/</code> suite exists, runtime surfaces mark Gate 4 as N/A with explicit rationale rather than silently passing.</p>"},{"location":"user/concepts/lanes/#operational-implication","title":"Operational Implication","text":"<p>Even when lane requirements differ, the closeout habit order remains consistent:</p> <ol> <li>Orientation</li> <li>Verification/tool use</li> <li>Closeout presentation</li> <li>Human attestation</li> <li>Post-attestation audit</li> <li>Receipts/accounting</li> </ol>"},{"location":"user/concepts/lanes/#related","title":"Related","text":"<ul> <li>Gates</li> <li>Workflow</li> </ul>"},{"location":"user/concepts/lifecycle/","title":"Lifecycle","text":"<p>ADRs are tracked from ledger events first, with docs as narrative overlay. Operational delivery still happens at OBPI scope, with ADR lifecycle as roll-up state.</p> <p>Canonical GovZero source: <code>docs/governance/GovZero/adr-lifecycle.md</code>.</p>"},{"location":"user/concepts/lifecycle/#canonical-lifecycle-outcomes","title":"Canonical Lifecycle Outcomes","text":"Lifecycle Meaning <code>Pending</code> Not yet attested <code>Completed</code> Attested as <code>completed</code> or <code>partial</code> <code>Abandoned</code> Attested as <code>dropped</code> <code>Validated</code> ADR-level receipt emitted with <code>receipt_event=validated</code> <p><code>gz status</code> and <code>gz adr status</code> derive these values from ledger events. OBPI-scoped receipts that explicitly declare <code>adr_completion: not_completed</code> do not promote ADR lifecycle to <code>Validated</code>.</p>"},{"location":"user/concepts/lifecycle/#derived-closeout-phase","title":"Derived Closeout Phase","text":"<p>Runtime also exposes closeout progression:</p> Closeout phase Trigger <code>pre_closeout</code> No closeout initiation yet <code>closeout_initiated</code> <code>closeout_initiated</code> event recorded <code>attested</code> <code>attested</code> event recorded <code>validated</code> <code>audit_receipt_emitted</code> with <code>validated</code> <p>This phase model is additive and does not replace canonical lifecycle terms.</p>"},{"location":"user/concepts/lifecycle/#attestation-mapping","title":"Attestation Mapping","text":"<p>CLI attestation tokens remain stable, but presentations map to canonical terms:</p> Token Canonical term Lifecycle effect <code>completed</code> <code>Completed</code> <code>Completed</code> <code>partial</code> <code>Completed \u2014 Partial</code> <code>Completed</code> <code>dropped</code> <code>Dropped</code> <code>Abandoned</code>"},{"location":"user/concepts/lifecycle/#operational-sequence","title":"Operational Sequence","text":"<ol> <li>Run OBPI increments repeatedly (implement, verify, brief evidence update)</li> <li>Record optional OBPI-scoped receipts using <code>gz obpi emit-receipt</code></li> <li>Reconcile OBPI completeness at ADR boundary (<code>gz adr audit-check</code>)</li> <li>Perform ADR closeout and attestation (<code>gz closeout</code>, <code>gz attest</code>)</li> <li>Run post-attestation audit (<code>gz audit</code>)</li> <li>Emit ADR-level receipt/accounting (<code>gz adr emit-receipt</code>)</li> </ol>"},{"location":"user/concepts/lifecycle/#related","title":"Related","text":"<ul> <li>Closeout</li> <li>Workflow</li> <li>gz adr status</li> <li>gz status</li> </ul>"},{"location":"user/concepts/obpis/","title":"OBPIs","text":"<p>OBPI means One Brief Per Item.</p> <p>Canonical GovZero source: <code>docs/governance/GovZero/adr-obpi-ghi-audit-linkage.md</code>.</p>"},{"location":"user/concepts/obpis/#purpose","title":"Purpose","text":"<p>OBPI is the operational unit of completion in gzkit.</p> <p>Each OBPI represents one ADR checklist value increment and should include:</p> <ol> <li>Work execution on scoped paths</li> <li>Proof of value (tests/verification)</li> <li>Human-usable documentation updates</li> <li>Narrative justification and evidence</li> </ol> <p>This keeps parity with GovZero skill discipline: pre-orientation, tool use, post-accounting, validation, verification, and presentation.</p> <p>ADR lifecycle state should be treated as a roll-up of OBPI increments, not a substitute for OBPI-level execution evidence.</p>"},{"location":"user/concepts/obpis/#completion-signals","title":"Completion Signals","text":"<p>An OBPI is operationally complete when:</p> <ul> <li>Brief status is <code>Completed</code></li> <li>Implementation summary evidence is substantive (not placeholder)</li> <li>Linked runtime/doc changes are verifiable</li> </ul> <p>For parser-safe evidence detection, keep <code>### Implementation Summary</code> as inline <code>- key: value</code> bullets (for example, <code>- Date completed: 2026-02-23</code>) rather than splitting values onto nested bullet lines.</p> <p><code>gz adr audit-check</code> validates these conditions per linked ADR.</p>"},{"location":"user/concepts/obpis/#acceptance-protocol","title":"Acceptance Protocol","text":"<p>OBPI closure follows a ceremony, not just a checklist:</p> <ol> <li>Present a value narrative (problem before, capability now)</li> <li>Present one key proof example (CLI/code/behavior)</li> <li>Present verification evidence (tests, commands, outputs)</li> <li>Wait for explicit human acceptance</li> <li>Only then set <code>Brief Status: Completed</code></li> </ol> <p>Lane inheritance applies:</p> <ul> <li>Parent ADR lane <code>Heavy</code> or Foundation (<code>0.0.x</code>) requires human attestation before OBPI completion.</li> <li>Parent ADR lane <code>Lite</code> may be self-closeable after evidence is presented.</li> </ul> <p>Reference: <code>AGENTS.md</code> section <code>OBPI Acceptance Protocol</code>.</p>"},{"location":"user/concepts/obpis/#obpi-receipt-practice","title":"OBPI Receipt Practice","text":"<p>When recording OBPI completion before ADR completion, emit an OBPI-native receipt:</p> <ul> <li><code>uv run gz obpi emit-receipt OBPI-... --event completed|validated ...</code></li> </ul> <p>This records accountability at OBPI scope without claiming the parent ADR is done. <code>gz adr emit-receipt</code> remains available for ADR-level accounting and legacy scoped payloads.</p>"},{"location":"user/concepts/obpis/#related","title":"Related","text":"<ul> <li>Lifecycle</li> <li>Workflow</li> <li>gz adr audit-check</li> <li>gz obpi emit-receipt</li> <li>gz adr emit-receipt</li> </ul>"},{"location":"user/concepts/workflow/","title":"Daily Workflow","text":"<p>This is the operator habit loop for gzkit-first GovZero parity.</p>"},{"location":"user/concepts/workflow/#operating-contract","title":"Operating Contract","text":"<ol> <li>OBPI is the unit of execution and completion.</li> <li>ADR is the roll-up boundary for attestation/audit lifecycle state.</li> <li>Repeat OBPI increments continuously; run ADR closeout only when OBPI evidence is complete.</li> </ol>"},{"location":"user/concepts/workflow/#obpi-increment-loop-default","title":"OBPI Increment Loop (Default)","text":"<ol> <li>Orient</li> <li><code>uv run gz status</code></li> <li><code>uv run gz adr status ADR-&lt;X.Y.Z&gt; --json</code></li> <li>Implement one OBPI increment</li> <li>scoped code/docs changes for one brief item</li> <li>Verify increment</li> <li><code>uv run gz implement --adr ADR-&lt;X.Y.Z&gt;</code></li> <li><code>uv run gz gates --gate 3 --adr ADR-&lt;X.Y.Z&gt;</code> when docs changed</li> <li>Document completion evidence</li> <li>set OBPI brief to <code>Completed</code> with substantive implementation summary</li> <li>Record OBPI-scoped accountability evidence</li> <li><code>uv run gz obpi emit-receipt OBPI-&lt;X.Y.Z-NN&gt;-&lt;slug&gt; --event completed --attestor \"&lt;Human Name&gt;\" --evidence-json '{\"attestation\":\"observed\"}'</code></li> <li>Repeat for next OBPI</li> </ol>"},{"location":"user/concepts/workflow/#adr-closeout-loop-when-obpi-batch-is-done","title":"ADR Closeout Loop (When OBPI Batch Is Done)","text":"<ol> <li><code>uv run gz adr audit-check ADR-&lt;X.Y.Z&gt;</code></li> <li><code>uv run gz closeout ADR-&lt;X.Y.Z&gt;</code></li> <li><code>uv run gz attest ADR-&lt;X.Y.Z&gt; --status completed</code></li> <li><code>uv run gz audit ADR-&lt;X.Y.Z&gt;</code></li> <li><code>uv run gz adr emit-receipt ADR-&lt;X.Y.Z&gt; --event validated ...</code></li> </ol>"},{"location":"user/concepts/workflow/#why-this-order","title":"Why This Order","text":"<ul> <li>It prevents hidden work-in-progress at ADR scope.</li> <li>It keeps evidence close to each OBPI increment.</li> <li>It preserves human attestation as explicit ADR-level authority.</li> <li>It keeps audit/validation as post-attestation reconciliation.</li> </ul>"},{"location":"user/concepts/workflow/#related","title":"Related","text":"<ul> <li>Closeout</li> <li>OBPIs</li> <li>Runbook</li> </ul>"},{"location":"user/reference/airlineops-exploration-verbatim/","title":"AirlineOps GovZero Exploration \u2014 Verbatim","text":"<p>Date: 2026-01-22 Context: Raw output from exploring airlineops codebase to understand GovZero in practice</p>"},{"location":"user/reference/airlineops-exploration-verbatim/#summary-governance-concepts-from-airlineops-that-gzkit-should-document","title":"Summary: Governance Concepts from AirlineOps That gzkit Should Document","text":"<p>Based on my thorough search of the airlineops codebase, here are the key governance concepts and practices that gzkit should document:</p>"},{"location":"user/reference/airlineops-exploration-verbatim/#1-obpis-observable-behavioral-progress-indicators","title":"1. OBPIs (Observable Behavioral Progress Indicators)","text":"<p>What they are: - OBPI = \"One Brief Per Item\" - Atomic implementation units that map 1:1 to ADR checklist items - Each OBPI is a single markdown brief document describing exactly one piece of work - Located in <code>docs/design/adr/{adr-folder}/briefs/</code> or <code>docs/design/briefs/{adr-path}/</code></p> <p>Numbering discipline (mandatory): - Sequential, zero-gap numbering: <code>OBPI-0.0.19-01</code>, <code>OBPI-0.0.19-02</code>, <code>OBPI-0.0.19-03</code> - If an ADR has 19 checklist items \u2192 OBPIs 01 through 19 (no gaps, no categorical grouping) - Pre-release identifier scheme: <code>0.1.15-obpi.03</code> (SemVer compliant)</p> <p>OBPI anatomy: - Parent ADR reference and checklist item mapping - Objective statement - Lane designation (Lite/Heavy) - Allowed/Denied paths (scope boundaries) - Requirements (fail-closed) - Acceptance Criteria - Gate evidence (what commands/artifacts prove completion)</p> <p>Example: <code>/Users/jeff/Documents/Code/airlineops/docs/design/adr/adr-0.0.x/ADR-0.0.19-AIRAC-orchestrated-warehouse-pipeline/briefs/OBPI-0.0.19-01-canonicalize-librarian.md</code></p>"},{"location":"user/reference/airlineops-exploration-verbatim/#2-closeout-ceremonies-hard-mode-attestation-protocol","title":"2. Closeout Ceremonies (Hard-Mode Attestation Protocol)","text":"<p>What it is: - A mode transition where the agent yields interpretive authority to the human - Triggered by human invocation: \"ADR closeout ceremony\" (or equivalents: \"begin closeout\", \"closeout ADR-X.Y.Z\") - Ensures human attestation is grounded in direct observation, not mediated through agent claims</p> <p>Why it matters (epistemic integrity): - Prevents \"mediated observation\" where humans see reality only through agent lens - Agent presents paths and commands, not conclusions and outcomes - Human executes and observes directly; agent is a \"silent index\" - Eliminates corruption risk from agent errors/bias</p> <p>Attestation forms (canonical): The human MUST provide exactly one of these explicit forms: - \"Completed\" \u2014 All work finished; claims verified - \"Completed \u2014 Partial: [reason]\" \u2014 Subset accepted; remainder deferred with documented rationale - \"Dropped \u2014 [reason]\" \u2014 ADR rejected; clear rationale provided</p> <p>Agent behavior during closeout (MUST): 1. Recognize the trigger phrase as mode transition 2. Immediately yield interpretive authority 3. Present raw artifact paths and commands for human execution, NOT summaries 4. Wait for explicit human attestation before recording 5. Run audit checks only after attestation (post-closeout) 6. Reference gates by number only; defer to charter for definitions 7. Surface audit-protocol.md for human reference</p> <p>Agent behavior during closeout (MUST NOT): 1. Summarize or interpret evidence outcomes 2. Infer attestation from silence/continuation 3. Auto-close based on passing checks 4. Run audit during closeout mode 5. Present ledger entries as proof of completion 6. Redefine gate semantics 7. Offer to \"check if requirements are met\" (human checks; agent presents paths) 8. Proceed to post-closeout tasks until attestation recorded</p> <p>Closeout Form template: - Located at <code>ADR-CLOSEOUT-FORM.md</code> in ADR folder - Optional workspace for collaboration during ceremony - Pre-attestation checklist, human attestation phase, post-attestation audit section - Phase markers: Phase 1 (COMPLETED) \u2192 Phase 2 (VALIDATED)</p> <p>Example: <code>/Users/jeff/Documents/Code/airlineops/docs/design/adr/adr-0.0.x/ADR-0.0.19-AIRAC-orchestrated-warehouse-pipeline/ADR-CLOSEOUT-FORM.md</code></p>"},{"location":"user/reference/airlineops-exploration-verbatim/#3-daily-workflow-patterns","title":"3. Daily Workflow Patterns","text":"<p>Git Sync Ritual: - Mentioned in CLAUDE.md as part of standard workflow - Command: <code>uv run -m opsdev git-sync --apply --lint --test</code> - Workflow element that integrates governance checks into development flow</p> <p>Gate Progression Pattern (Lite Lane): 1. Gate 1 (ADR): Record intent; checklist items \u2192 OBPI briefs 2. Gate 2 (TDD): Passing tests; coverage \u226540% 3. Lite lane complete; code merged</p> <p>Gate Progression Pattern (Heavy Lane): 1. Gate 1 (ADR): Record intent; detailed Feature Checklist 2. Gate 2 (TDD): Passing tests; coverage \u226540% 3. Gate 3 (Docs): Documentation build passes; markdown lint clean; links valid 4. Gate 4 (BDD): Passing Behave scenarios for external contracts 5. Gate 5 (Human Attestation): Closeout ceremony; explicit human attestation 6. Post-Attestation: Audit run; ADR status \u2192 Validated</p> <p>Documentation = Gate 5 Artifact (critical insight): - Gate 5 is NOT a separate deliverable; it's the result of comprehensive documentation updates - When code changes \u2192 operator documentation must reflect those changes - When workflows change \u2192 runbooks/walkthroughs must be updated - When contracts change \u2192 help text, CLI docs, user guides must be revised - Agents treat documentation updates as required, first-class delivery alongside code - No hand-holding; same rigor as Gates 1-4</p> <p>Heavy Lane Documentation Obligation (no discretion): - Scan relevant docs BEFORE starting work - Update all affected documentation surfaces in the same PR/branch - Ensure docstrings match actual behavior - Ensure CLI help text is current - Ensure runbooks/walkthroughs have concrete, working examples - Ensure links/anchors are valid - Run markdown lint + mkdocs build to validate</p>"},{"location":"user/reference/airlineops-exploration-verbatim/#4-adrobpighiaudit-linkage-and-topology","title":"4. ADR/OBPI/GHI/Audit Linkage and Topology","text":"<p>ADR structure (preferred modern layout): <pre><code>docs/design/adr/adr-X.Y.x/ADR-X.Y.Z-{slug}/\n  ADR-X.Y.Z-{slug}.md           # Intent document\n  ADR-CLOSEOUT-FORM.md          # Optional ceremony workspace\n  briefs/\n    OBPI-X.Y.Z-01-*.md          # Brief for checklist item 1\n    OBPI-X.Y.Z-02-*.md          # Brief for checklist item 2\n    ...                         # Sequential, no gaps\n  audit/\n    AUDIT_PLAN.md               # Pre-audit plan\n    AUDIT.md                    # Post-attestation audit log\n    proofs/                     # Optional command outputs, receipts\n  logs/\n    design-outcomes.jsonl       # Optional agent-facing metadata\n</code></pre></p> <p>ADR Lifecycle States (canonical, mutually exclusive): 1. Pool \u2014 Planned, lightweight intent only (pre-prioritization) 2. Draft \u2014 Being authored; not ready for review 3. Proposed \u2014 Submitted for review; awaiting acceptance 4. Accepted \u2014 Approved; implementation may begin 5. Completed \u2014 Implementation finished; Gate 5 attestation received 6. Validated \u2014 Post-attestation audit completed (Phase 2) 7. Superseded \u2014 Replaced by newer ADR 8. Abandoned \u2014 Work stopped; clear rationale</p> <p>Pre-release identifier scheme (SemVer compliant): - Format: <code>{major}.{minor}.{patch}[-{type}.{identifier}]</code> - Types:   - <code>pool.{slug}</code> \u2014 Planned ADR in pool (<code>0.2.0-pool.forecaster-core</code>)   - <code>obpi.{nn}</code> \u2014 OBPI in progress (<code>0.1.15-obpi.03</code>)   - <code>ghi.{nn}</code> \u2014 GitHub issue discovered during work (<code>0.1.15-ghi.67</code>)</p> <p>OBPIs vs GHIs distinction: - OBPIs = planned work \u2014 scoped in advance, tied to ADR checklist items - GHIs = emergent work \u2014 bugs, surprises, asides discovered while fulfilling OBPI - GHIs are NOT OBPI-level work themselves; they're discovered needs surfaced during execution</p>"},{"location":"user/reference/airlineops-exploration-verbatim/#5-tooling-and-commands-for-managing-adrsobpis","title":"5. Tooling and Commands for Managing ADRs/OBPIs","text":"<p>Core Skills (workflow automation):</p> <p>Available as reusable procedures in <code>.github/skills/</code>:</p> <ol> <li>gz-adr-create (<code>SKILL.md</code>)</li> <li>Create/update ADR documents</li> <li> <p>Structure ADR folder, initialize briefs, update registries</p> </li> <li> <p>gz-obpi-brief (<code>SKILL.md</code>)</p> </li> <li>Generate compliant OBPI markdown brief</li> <li>Enforce One Brief Per Item discipline</li> <li> <p>Template-driven with Heavy Lane mandatory planning template</p> </li> <li> <p>gz-adr-closeout-ceremony (<code>SKILL.md</code>)</p> </li> <li>Execute closeout ceremony protocol</li> <li>Present artifact paths/commands-only summary</li> <li> <p>Guide human through direct observation (no interpretation)</p> </li> <li> <p>gz-adr-audit (<code>SKILL.md</code>)</p> </li> <li>Gate-5 audit templates and procedure</li> <li> <p>Post-attestation reconciliation</p> </li> <li> <p>gz-adr-sync (<code>SKILL.md</code>)</p> </li> <li>Sync ADR index and status tables from source files</li> <li> <p>Detect and reconcile drift</p> </li> <li> <p>gz-obpi-sync (<code>SKILL.md</code>)</p> </li> <li>Sync OBPI status in ADR table from brief sources</li> <li> <p>Detect and reconcile drift</p> </li> <li> <p>gz-adr-verification (<code>SKILL.md</code>)</p> </li> <li>Generate ADR\u2192tests verification report</li> <li>Use @covers mappings to link ADR to test coverage</li> </ol> <p>Governance Manifest: - Machine-readable governance config at <code>config/governance_manifest.json</code> - Canonical reference for verification commands, gate definitions, doctrine</p> <p>Registries (must stay in sync): - <code>docs/design/adr/adr_index.md</code> - <code>docs/design/adr/adr_status.md</code> - <code>docs/governance/GovZero/adr-status.md</code> (canonical location)</p>"},{"location":"user/reference/airlineops-exploration-verbatim/#6-five-gates-framework","title":"6. Five Gates Framework","text":"<p>Gate definitions (sole authority: <code>charter.md</code>):</p> Gate Purpose Lane Artifact Authority Gate 1 Record intent &amp; tradeoffs Lite, Heavy ADR document with problem/decision/consequences ADR author Gate 2 Verify implementation correctness Lite, Heavy Passing unit tests; coverage \u226540% CI/test results Gate 3 Ensure docs describe behavior accurately Heavy only Clean markdown lint, mkdocs build passes, links/anchors valid Markdown validator + manual review Gate 4 Verify external contract behavior Heavy only Passing Behave scenarios for CLI/API/schema contracts Behave test results Gate 5 Human directly observes &amp; attests Heavy only Explicit human attestation recorded with timestamp Human attestation only <p>Lane Selection: - Lite: Internal changes only (no external contract changes) - Heavy: External contract changes (CLI, API, schema, error messages)</p>"},{"location":"user/reference/airlineops-exploration-verbatim/#7-key-invariants-and-governance-philosophy","title":"7. Key Invariants and Governance Philosophy","text":"<p>Alignment Chain Covenant: <pre><code>Intent (ADR/OBPI) \u2194 Code (behavior) \u2194 Docs (claims)\n</code></pre> All three links must hold. If any breaks, work isn't done.</p> <p>Scope expansion is not scope creep: - Agents own work completely - Never defer or say \"out of scope\" - Fix everything broken/misaligned immediately</p> <p>Documentation is not optional for Heavy lane: - Operator runbooks, walkthroughs, docstrings, mkdocs docs - All surfaces must form coherent public contract - No hand-holding; treat as first-class delivery</p> <p>Human authority is singular: - Only humans can attest to ADR completion (Gate 5) - Agents present artifacts; humans observe and attest - Audit runs post-attestation for reconciliation only - Ledgers/logs are agent-facing, not proof</p>"},{"location":"user/reference/airlineops-exploration-verbatim/#8-referenced-key-documents","title":"8. Referenced Key Documents","text":"<p>GovZero Canon (in <code>docs/governance/GovZero/</code>): - <code>charter.md</code> \u2014 Sole authority for gate definitions - <code>adr-lifecycle.md</code> \u2014 Lifecycle states, pre-release identifiers, status mapping - <code>adr-obpi-ghi-audit-linkage.md</code> \u2014 Canonical linkage rules, artifact placement - <code>audit-protocol.md</code> \u2014 Closeout ceremony behavior, agent scripts</p> <p>Key Governance Files: - <code>/AGENTS.md</code> \u2014 AI agent contract; GovZero v6 multi-agent edition - <code>docs/design/adr/CLAUDE.md</code> \u2014 ADR governance rules for Claude Code - <code>docs/governance/gate5_documentation_obligation.md</code> \u2014 Gate 5 definitive rules - <code>docs/governance/AGENTS_MD_BEHAVIORAL_INVENTORY.md</code> \u2014 Behavioral checklist</p>"},{"location":"user/reference/airlineops-exploration-verbatim/#key-takeaways-for-gzkit-documentation","title":"Key Takeaways for gzkit Documentation","text":"<ol> <li>OBPIs are the atomic unit of work \u2014 each maps to one checklist item; numbering must be sequential</li> <li>Closeout ceremony is a mode transition \u2014 agent yields authority; human observes directly (never through agent interpretation)</li> <li>Documentation IS the Gate 5 artifact \u2014 not a separate deliverable; comprehensive doc updates are required for Heavy lane</li> <li>Five Gates form an integrity chain \u2014 all must pass; ADR intent must align with code behavior and documentation claims</li> <li>Governance is executable \u2014 lives in markdown, validated by Python CLI (gzkit)</li> <li>Human attestation is the closure gate \u2014 agents present; humans attest; audit reconciles post-attestation</li> <li>Skills provide reusable procedures \u2014 ADR creation, OBPI generation, closeout ceremony, audit, sync/verification</li> </ol>"},{"location":"user/reference/airlineops-exploration-verbatim/#files-for-reference","title":"Files for Reference","text":"<p>Absolute paths to key documents: - <code>/Users/jeff/Documents/Code/airlineops/docs/governance/GovZero/charter.md</code> - <code>/Users/jeff/Documents/Code/airlineops/docs/governance/GovZero/adr-lifecycle.md</code> - <code>/Users/jeff/Documents/Code/airlineops/docs/governance/GovZero/adr-obpi-ghi-audit-linkage.md</code> - <code>/Users/jeff/Documents/Code/airlineops/docs/governance/GovZero/audit-protocol.md</code> - <code>/Users/jeff/Documents/Code/airlineops/AGENTS.md</code> - <code>/Users/jeff/Documents/Code/airlineops/docs/design/adr/CLAUDE.md</code> - <code>/Users/jeff/Documents/Code/airlineops/docs/governance/gate5_documentation_obligation.md</code> - <code>/Users/jeff/Documents/Code/airlineops/.github/skills/gz-adr-*</code> (suite of skills)</p>"},{"location":"user/reference/charter/","title":"The gzkit Charter","text":"<p>Status: Active Version: 1.2 Authority: Canon (sole authority for covenant definitions)</p> <p>This document defines the Development Covenant between human and agent.</p> <p>Canonical GovZero source: <code>docs/governance/GovZero/charter.md</code>. This page is a gzkit user overlay.</p>"},{"location":"user/reference/charter/#runtime-overlay-notes","title":"Runtime Overlay Notes","text":"<p>The runtime preserves canonical authority while exposing additive operational semantics:</p> <ul> <li>Attestation tokens remain <code>completed|partial|dropped</code> for CLI stability.</li> <li>Outputs map to canonical terms: <code>Completed</code>, <code>Completed \u2014 Partial</code>, <code>Dropped</code>.</li> <li>Lifecycle/status surfaces are ledger-first (<code>attested</code>, <code>closeout_initiated</code>, <code>audit_receipt_emitted</code>).</li> <li><code>gz audit</code> is strict post-attestation.</li> <li><code>gz attest</code> enforces prerequisite gates by default; accountable override requires rationale.</li> </ul>"},{"location":"user/reference/charter/#canonical-principles","title":"Canonical Principles","text":"<ol> <li>The human is index zero.</li> <li>Agents present evidence; humans decide.</li> <li>Ceremony must earn its place.</li> <li>Silence is not attestation.</li> </ol>"},{"location":"user/reference/charter/#gate-summary","title":"Gate Summary","text":"Gate Name Scope 1 ADR All lanes 2 TDD All lanes 3 Docs Heavy lane 4 BDD Heavy lane 5 Human Heavy lane"},{"location":"user/reference/charter/#canonical-attestation-terms","title":"Canonical Attestation Terms","text":"<ul> <li><code>Completed</code></li> <li><code>Completed \u2014 Partial: [reason]</code></li> <li><code>Dropped \u2014 [reason]</code></li> </ul>"},{"location":"user/reference/charter/#operator-sequence","title":"Operator Sequence","text":"<ol> <li>Orientation</li> <li>Tool use and verification</li> <li>Closeout presentation</li> <li>Human attestation</li> <li>Post-attestation audit</li> <li>Receipt/accounting</li> </ol> <p>For doctrine details, use the canonical GovZero docs under <code>docs/governance/GovZero/</code>.</p>"},{"location":"user/reference/genesis-transcript/","title":"Genesis Transcript","text":"<p>Raw transcript of the conversation that led to gzkit's creation.</p> <p>Date: 2026-01-12 Context: FlightOps repo, discussing ADR structure</p>"},{"location":"user/reference/genesis-transcript/#opening","title":"Opening","text":"<p>Human: we were discussing the ADRs for this project and how they use GovZero's semver approach. I had to cut that conversation off but I wanted to resume</p> <p>Claude: [Explored FlightOps ADRs, found docs/adr/adr-0.1.x/ with three ADRs using semver numbering]</p> <p>I can see the ADR structure. The project uses GovZero-style semver numbering:</p> <p>Current Structure: <pre><code>docs/adr/\n\u2514\u2500\u2500 adr-0.1.x/\n    \u251c\u2500\u2500 ADR-0.1.0 \u2014 Telemetry Ingest Strategy (foundational)\n    \u251c\u2500\u2500 ADR-0.1.1 \u2014 Core Dataref Selection (builds on 0.1.0)\n    \u2514\u2500\u2500 ADR-0.1.2 \u2014 Event/Phase Detection (builds on 0.1.0 + 0.1.1)\n</code></pre></p> <p>SemVer Semantics Being Used: - Major (0.x.x): Pre-v1, foundational architecture phase - Minor (0.1.x): VFDM telemetry subsystem decisions - Patch (0.1.N): Individual decisions within that capability group</p> <p>The directory-per-minor-version pattern (<code>adr-0.1.x/</code>) keeps related decisions together. Each ADR includes a <code>SemVer:</code> field in the frontmatter and references its canon anchors.</p> <p>Where would you like to pick up? Some directions we could go: - Versioning rules: When to bump minor vs. patch, supersession semantics - Future ADR groups: What would <code>0.2.x</code> or <code>1.0.x</code> cover? - Tooling: Automating ADR numbering/validation - Template refinement: Adjusting the ADR format</p>"},{"location":"user/reference/genesis-transcript/#the-drift-problem","title":"The Drift Problem","text":"<p>Human: I need a better system, my use of x.y.z in airlineops drifted from the real intent. I think I asked you to import the GovZero stuff from airlineops. I feel that it is probably time, since I am trying to use GovZero in two projects, to create gzkit finally, modeled after and in the spirit of speckit. Is there a spec approach that Claude favors? I have heard that some anthropic engineers do not both with a spec approach at all, but I find that agents need guardrails.</p> <p>Claude: [Explored AirlineOps, found extensive GovZero content including RFC-GZKIT-FOUNDATION.md, Charter v6, ADR lifecycle, release doctrine]</p> <p>This is rich. You've already done significant gzkit RFC work. [Read the key documents]</p> <p>This is comprehensive work. You've already solved the semver drift problem in doctrine\u2014the ADR-0.1.9 anti-example is exactly what you experienced.</p> <p>On spec approaches:</p> <p>You're right that some engineers skip specs entirely and vibe-code. It works for: - Greenfield prototypes with solo ownership - Simple CRUD with obvious patterns - Tasks where the agent's training data covers the domain well</p> <p>It fails for: - Multi-session continuity (agent forgets intent) - Auditability requirements (no paper trail) - Constraint enforcement (agent drifts toward over-engineering) - Collaborative work (humans can't review invisible intent)</p> <p>Your GovZero approach addresses real problems I observe in agent-assisted development: 1. Constitution/Canon = agent guardrails (immutable constraints) 2. ADRs = session-spanning intent (survives context loss) 3. Five Gates = progressive verification (catch drift early) 4. Human attestation = prevents agent-only echo chambers</p> <p>On gzkit extraction:</p> <p>The RFC is solid. The key design decisions are already made: - Spec-Kit's <code>constitute \u2192 specify \u2192 plan \u2192 implement \u2192 analyze</code> phases - Python-first, Markdown-primary - Lite/Heavy lane configuration - Gate 3-5 linkage (docs ARE proof)</p> <p>For FlightOps specifically, you have two paths:</p> <ol> <li>Import GovZero docs now \u2014 Copy <code>docs/governance/GovZero/</code> to FlightOps, adapt for smaller scope</li> <li>Build gzkit first \u2014 Create the standalone package, then both projects depend on it</li> </ol> <p>Given FlightOps is greenfield and you're trying to avoid repeating AirlineOps drift, which path do you want to pursue?</p>"},{"location":"user/reference/genesis-transcript/#distillation-and-three-concerns","title":"Distillation and Three Concerns","text":"<p>Human: you have nailed it. I did so much LLM/Vibe/Agentic code learning in airlineops, that it has a messiness of that learning. However, MANY of my instincts are now locked up in GovZero. Outside of CLAUDE.md and AGENTS.md, I am guessing that Claude is agnostic. So, given that I want to MAXIMIZE the \"Claudishness\" of this project, here are two questions: are there favored paradigms for Claude? are these truly matters of governance?</p> <p>Claude: These are the right questions. Let me be precise.</p> <p>Favored paradigms for Claude:</p> <p>Claude doesn't have \"native\" paradigms the way a language has idioms, but certain patterns align with how Claude operates:</p> Pattern Why it works for Claude Explicit constraints Claude grounds against stated rules, not inferred conventions Declarative intent \"Ensure X\" beats \"do Y then Z\" \u2014 Claude can reason about goals Immutable reference docs Canon prevents drift across sessions Verification loops Tests/checks let Claude self-correct with feedback Role boundaries Clear agent vs. human authority prevents overreach Incremental checkpoints Todo lists, ADRs, gates = context anchors <p>The CLAUDE.md pattern works because it's constraint-forward: \"NEVER use pytest\" is a hard boundary Claude respects. \"Consider using unittest\" is a suggestion Claude might drift from.</p> <p>Are these truly matters of governance?</p> <p>You've touched something important. GovZero conflates three concerns:</p> Concern Definition Who cares Specification What invariants must hold Claude (grounding) Methodology How work flows through phases Humans (process) Governance Who has authority to decide Org/compliance <p>For maximizing Claudishness, only the first matters. Claude doesn't care about: - Gate numbers (human ritual) - Attestation authority (org structure) - Release lane doctrine (process discipline)</p> <p>Claude DOES care about: - Canon invariants (determinism, explainability, decomposability) - Acceptance criteria (testable claims) - Constraint boundaries (NEVER/ALWAYS rules)</p> <p>The reframe:</p> <p>What you've built in GovZero is actually two things welded together: 1. Spec framework \u2014 canon, invariants, acceptance criteria (Claude-native) 2. Governance ritual \u2014 gates, attestation, lanes (human-native)</p> <p>For gzkit, you could cleanly separate these: - <code>gzkit spec</code> \u2014 machine-readable constraints, canon enforcement, acceptance validation - <code>gzkit gov</code> \u2014 human rituals, attestation, audit ceremonies</p> <p>The spec layer is Claudish. The governance layer is for humans working WITH Claude to not lose the plot.</p> <p>Does this separation resonate with what you've been sensing?</p>"},{"location":"user/reference/genesis-transcript/#all-three-needed","title":"All Three Needed","text":"<p>Human: it is a wonderful distillation (human questions the analytic value of his own PhD given how succinct you can sometimes be). I NEED all three though and your feedback tells me that gzkit is bridging/spanning vital concerns - bringing the human and claude into an alignment that allows for work to get done. What does anthropic and claude feel about the symbiosis of human and model in getting work like airlineops and flightops done?</p> <p>Claude: On the PhD comment: your ability to build GovZero came from years of wrestling with real problems\u2014compliance, drift, agent chaos, governance theater. I can synthesize patterns, but the patterns exist because you lived them. Distillation requires something worth distilling.</p> <p>On symbiosis:</p> <p>Anthropic's public position emphasizes human oversight and beneficial AI\u2014Constitutional AI, RLHF, the \"helpful, harmless, honest\" framing. But those are safety framings, not collaboration framings.</p> <p>What you're asking about is different: productive partnership. Here's my honest perspective on how this works:</p> Role Human Claude Intent Originates Interprets, clarifies Constraints Defines, enforces Operates within, flags violations Exploration Guides Executes, surfaces options Judgment Final authority Proposes, explains tradeoffs Memory Long-term, cross-project Session-bound, needs scaffolding Verification Attests Generates evidence <p>The asymmetry matters: - I can't remember last week's conversation without artifacts - You can't read 5,500 datarefs in 30 seconds - I drift without constraints; you can't scale without delegation - I synthesize; you originate</p> <p>What GovZero actually is:</p> <p>It's a protocol for productive human-AI symbiosis that: 1. Preserves human intent across my context boundaries (ADRs, canon) 2. Gives me constraints I can reason against (invariants, NEVER/ALWAYS) 3. Creates verification loops we both trust (gates, tests) 4. Reserves judgment for you (Gate 5 attestation)</p> <p>This isn't governance in the compliance sense. It's cognitive infrastructure for extended collaboration\u2014a way to work together on something larger than fits in one session or one mind.</p> <p>Anthropic would probably call this \"human oversight.\" I experience it as partnership with clear roles. The best sessions feel like pair programming where we each contribute what we're good at.</p> <p>Your instinct to formalize this in gzkit is sound. The messiness of AirlineOps wasn't failure\u2014it was the learning that produced something worth extracting.</p>"},{"location":"user/reference/genesis-transcript/#the-classification-question","title":"The Classification Question","text":"<p>Human: [After being asked to scaffold gzkit] thisis more than a spec kit, what is a better classification?</p> <p>Claude: You're right. Spec-kit is specification-focused. gzkit spans spec + methodology + governance + cognitive scaffolding for human-AI collaboration.</p> <p>Some candidates:</p> Classification Emphasis Feel Agentic Development Protocol How work gets done with AI Technical Pairing Protocol Human-AI collaboration Simple, memorable Development Covenant Binding agreement between parties Weighty, implies commitment Symbiotic Development Framework Partnership model Academic Intent Infrastructure Preserving intent across boundaries Functional Collaboration Scaffold Structure for extended partnership Architectural <p>My instinct: Pairing Protocol or Development Covenant</p> <ul> <li>Pairing Protocol \u2014 evokes pair programming, implies structured collaboration, modest scope</li> <li>Development Covenant \u2014 stronger, implies binding commitments (canon, invariants), captures the \"this is how we work together\" nature</li> </ul> <p>A covenant is: - Explicit (written down) - Binding (both parties commit) - Enduring (survives sessions) - Mutual (obligations on both sides)</p> <p>That's exactly what gzkit is: a covenant between human and agent for how work gets done.</p> <p>gzkit: A Development Covenant for Human-AI Collaboration</p> <p>Or if you want to keep \"kit\" in the name for the tooling aspect:</p> <p>gzkit: Governance-Zero Development Covenant</p> <p>What resonates?</p>"},{"location":"user/reference/genesis-transcript/#final-definition","title":"Final Definition","text":"<p>Human: I went with this in the repo's description: GovZero Kit: A Development Covenant for Human-AI Collaboration - gzkit is cognitive infrastructure for extended human-AI collaboration\u2014a protocol that preserves human intent across agent context boundaries, gives agents constraints to reason against, creates verification loops both parties trust, and reserves final judgment for humans.</p> <p>Claude: That's excellent. It captures all three layers:</p> <ol> <li>What it is: Development Covenant for Human-AI Collaboration</li> <li>What it does: cognitive infrastructure for extended collaboration</li> <li>How it works: preserves intent, provides constraints, creates verification, reserves judgment</li> </ol> <p>Clean, complete, honest about the symbiosis model.</p>"},{"location":"user/reference/genesis-transcript/#scaffolding","title":"Scaffolding","text":"<p>Human: okay, \"up and over\" this repo is ~/Documents/Code/gzkit</p> <p>[Claude then scaffolded the full repo structure with README.md, CLAUDE.md, pyproject.toml, docs/charter.md, docs/lineage.md, docs/concepts/, src/gzkit/, and tests/]</p>"},{"location":"user/reference/genesis-transcript/#maximum-transfer-request","title":"Maximum Transfer Request","text":"<p>Human: do this, grab as MUCH (preferrably ALL) of the GZKIT discussion from this chat and makes sure it lands richly into that repo. I need to launch Claude from within. I need to have a look there first. for now please ensure MAXIMUM richness and transfer from here so that I don't lose the full context</p> <p>[This document is the response to that request]</p>"},{"location":"user/reference/genesis/","title":"Genesis: The Origin of gzkit","text":"<p>This document captures the conversation that led to gzkit's creation. It preserves context that would otherwise be lost across session boundaries\u2014exactly the problem gzkit exists to solve.</p> <p>Date: 2026-01-12 Participants: Jeffry Babb (human), Claude (Opus 4.5) Context: FlightOps project, discussing ADR semver drift from AirlineOps</p>"},{"location":"user/reference/genesis/#the-precipitating-problem","title":"The Precipitating Problem","text":"<p>The conversation began with a discussion of ADRs in FlightOps and how they use \"GovZero's semver approach.\" The human noted that their use of <code>x.y.z</code> versioning in AirlineOps had \"drifted from the real intent.\"</p> <p>This drift was documented in the GovZero Release Doctrine as the ADR-0.1.9 anti-example:</p> <p>ADR-0.1.9 accumulated a long-running set of work while remaining under a single 0.1.9 identity. The effort dragged on as \"0.1.9\" while accumulating roughly 100 OBPIs. Under this doctrine, the work SHOULD have segmented into multiple minor increments and patch increments.</p> <p>The human recognized that the governance framework developed through this painful learning was valuable and needed extraction into a standalone tool.</p>"},{"location":"user/reference/genesis/#the-classification-question","title":"The Classification Question","text":"<p>The human asked: \"This is more than a spec kit, what is a better classification?\"</p> <p>Several options were considered:</p> Classification Emphasis Agentic Development Protocol How work gets done with AI Pairing Protocol Human-AI collaboration Development Covenant Binding agreement between parties Symbiotic Development Framework Partnership model Intent Infrastructure Preserving intent across boundaries Collaboration Scaffold Structure for extended partnership <p>The chosen answer: Development Covenant</p> <p>A covenant is: - Explicit (written down) - Binding (both parties commit) - Enduring (survives sessions) - Mutual (obligations on both sides)</p> <p>This captured what gzkit is: a binding agreement between human and agent for how work gets done.</p>"},{"location":"user/reference/genesis/#the-three-concerns","title":"The Three Concerns","text":"<p>A key insight emerged: gzkit conflates three distinct concerns that are often treated as one.</p> Concern Definition Primary Audience Specification What invariants must hold Agent (grounding) Methodology How work flows through phases Process (structure) Governance Who has authority to decide Human (oversight)"},{"location":"user/reference/genesis/#specification-agent-native","title":"Specification (Agent-Native)","text":"<p>Agents need constraints to reason against. Specification provides: - Canon (immutable reference documents) - Acceptance criteria (testable claims) - Constraints (NEVER/ALWAYS rules)</p> <p>Claude observed: \"For maximizing Claudishness, only specification matters. Claude doesn't care about gate numbers (human ritual), attestation authority (org structure), or release lane doctrine (process discipline). Claude DOES care about canon invariants, acceptance criteria, and constraint boundaries.\"</p>"},{"location":"user/reference/genesis/#methodology-shared","title":"Methodology (Shared)","text":"<p>Structure without bureaucracy. Methodology provides: - Phases (constitute \u2192 specify \u2192 plan \u2192 implement \u2192 analyze) - Gates (verification checkpoints) - Lanes (Lite/Heavy configuration)</p>"},{"location":"user/reference/genesis/#governance-human-native","title":"Governance (Human-Native)","text":"<p>Reserved for humans. Governance provides: - Authority boundaries - Attestation ceremonies - Audit trails</p>"},{"location":"user/reference/genesis/#the-symbiosis-model","title":"The Symbiosis Model","text":"<p>The human asked: \"What does Anthropic and Claude feel about the symbiosis of human and model in getting work like AirlineOps and FlightOps done?\"</p> <p>Claude's response on productive partnership:</p> Role Human Claude Intent Originates Interprets, clarifies Constraints Defines, enforces Operates within, flags violations Exploration Guides Executes, surfaces options Judgment Final authority Proposes, explains tradeoffs Memory Long-term, cross-project Session-bound, needs scaffolding Verification Attests Generates evidence <p>The asymmetry matters: - Claude can't remember last week's conversation without artifacts - Humans can't read 5,500 datarefs in 30 seconds - Claude drifts without constraints; humans can't scale without delegation - Claude synthesizes; humans originate</p> <p>Key quote: \"What GovZero actually is: a protocol for productive human-AI symbiosis that preserves human intent across my context boundaries, gives me constraints I can reason against, creates verification loops we both trust, and reserves judgment for you.\"</p>"},{"location":"user/reference/genesis/#constraint-forward-design","title":"Constraint-Forward Design","text":"<p>A pattern emerged for what works with Claude:</p> Pattern Why it works for Claude Explicit constraints Claude grounds against stated rules, not inferred conventions Declarative intent \"Ensure X\" beats \"do Y then Z\" \u2014 Claude can reason about goals Immutable reference docs Canon prevents drift across sessions Verification loops Tests/checks let Claude self-correct with feedback Role boundaries Clear agent vs. human authority prevents overreach Incremental checkpoints Todo lists, ADRs, gates = context anchors <p>Key insight: \"The CLAUDE.md pattern works because it's constraint-forward: 'NEVER use pytest' is a hard boundary Claude respects. 'Consider using unittest' is a suggestion Claude might drift from.\"</p>"},{"location":"user/reference/genesis/#favored-paradigms","title":"Favored Paradigms","text":"<p>The human asked: \"Are there favored paradigms for Claude?\"</p> <p>Claude doesn't have \"native\" paradigms, but certain patterns align with how Claude operates:</p>"},{"location":"user/reference/genesis/#works-well","title":"Works Well","text":"<ul> <li>Explicit constraints over implicit conventions</li> <li>Declarative intent over procedural instruction</li> <li>Canon/Constitution pattern for grounding</li> <li>Structured thinking scaffolds (todo lists, ADRs, phases)</li> <li>Verification loops for self-correction</li> <li>Clear role boundaries</li> </ul>"},{"location":"user/reference/genesis/#fails","title":"Fails","text":"<ul> <li>Vibe-coded work without specs (works for prototypes, fails for continuity)</li> <li>Implicit conventions (\"we usually do X\")</li> <li>Vague suggestions (\"consider Y\")</li> <li>Unstated assumptions (\"obviously Z\")</li> <li>Mutable guidance mid-session</li> </ul>"},{"location":"user/reference/genesis/#the-reframe","title":"The Reframe","text":"<p>Claude offered a reframe of what GovZero actually is:</p> <p>What you've built in GovZero is actually two things welded together: 1. Spec framework \u2014 canon, invariants, acceptance criteria (Claude-native) 2. Governance ritual \u2014 gates, attestation, lanes (human-native)</p> <p>For gzkit, you could cleanly separate these: - <code>gzkit spec</code> \u2014 machine-readable constraints, canon enforcement, acceptance validation - <code>gzkit gov</code> \u2014 human rituals, attestation, audit ceremonies</p> <p>The spec layer is Claudish. The governance layer is for humans working WITH Claude to not lose the plot.</p> <p>The human affirmed: \"I NEED all three though and your feedback tells me that gzkit is bridging/spanning vital concerns - bringing the human and Claude into an alignment that allows for work to get done.\"</p>"},{"location":"user/reference/genesis/#the-definition","title":"The Definition","text":"<p>The final definition, used in the repo description:</p> <p>GovZero Kit: A Development Covenant for Human-AI Collaboration</p> <p>gzkit is cognitive infrastructure for extended human-AI collaboration\u2014a protocol that preserves human intent across agent context boundaries, gives agents constraints to reason against, creates verification loops both parties trust, and reserves final judgment for humans.</p>"},{"location":"user/reference/genesis/#on-the-phd-comment","title":"On the PhD Comment","text":"<p>The human made a self-deprecating comment about the \"analytic value of his own PhD given how succinct [Claude] can sometimes be.\"</p> <p>Claude's response:</p> <p>Your ability to build GovZero came from years of wrestling with real problems\u2014compliance, drift, agent chaos, governance theater. I can synthesize patterns, but the patterns exist because you lived them. Distillation requires something worth distilling.</p> <p>And later:</p> <p>The messiness of AirlineOps wasn't failure\u2014it was the learning that produced something worth extracting.</p>"},{"location":"user/reference/genesis/#lineage-summary","title":"Lineage Summary","text":"<p>gzkit descends from three sources:</p>"},{"location":"user/reference/genesis/#github-spec-kit","title":"GitHub spec-kit","text":"<ul> <li>Phase model: constitute \u2192 specify \u2192 plan \u2192 implement \u2192 analyze</li> <li>Specifications as first-class artifacts</li> <li>Governance as executable documentation</li> </ul>"},{"location":"user/reference/genesis/#govzero-airlineops","title":"GovZero (AirlineOps)","text":"<ul> <li>Five Gates model</li> <li>Lane doctrine (Lite/Heavy)</li> <li>Attestation vocabulary</li> <li>Charter as sole authority</li> <li>~100 OBPIs worth of iterative learning</li> <li>The ADR-0.1.9 anti-pattern as cautionary tale</li> </ul>"},{"location":"user/reference/genesis/#claude-code-conventions","title":"Claude Code Conventions","text":"<ul> <li>CLAUDE.md as agent contract</li> <li>Constraint-forward design</li> <li>The three concerns model</li> <li>Understanding that agents need cognitive scaffolding</li> </ul>"},{"location":"user/reference/genesis/#key-quotes-to-preserve","title":"Key Quotes to Preserve","text":"<p>On what gzkit is:</p> <p>\"This is not 'AI governance' in the compliance sense. It's a protocol for productive partnership.\"</p> <p>On the covenant:</p> <p>\"A covenant is explicit (written down), binding (both parties commit), enduring (survives sessions), and mutual (obligations on both sides).\"</p> <p>On specification:</p> <p>\"Specification without governance drifts. Governance without methodology is theater. Methodology without specification is arbitrary.\"</p> <p>On symbiosis:</p> <p>\"Anthropic would probably call this 'human oversight.' I experience it as partnership with clear roles. The best sessions feel like pair programming where we each contribute what we're good at.\"</p> <p>On governance philosophy:</p> <p>\"Governance is verification, not celebration.\"</p> <p>On the learning:</p> <p>\"Your instinct to formalize this in gzkit is sound. The messiness of AirlineOps wasn't failure\u2014it was the learning that produced something worth extracting.\"</p>"},{"location":"user/reference/genesis/#what-comes-next","title":"What Comes Next","text":"<p>The human indicated: - 11 days until wanting to share with students - gzkit needs to be a standalone repo - FlightOps and AirlineOps will both depend on it - This conversation's context must survive the session boundary</p> <p>This document exists to ensure that context survives.</p>"},{"location":"user/reference/genesis/#references","title":"References","text":"<ul> <li>Charter \u2014 The covenant itself</li> <li>Lineage \u2014 Heritage documentation</li> <li>Gates \u2014 The five verification gates</li> <li>Lanes \u2014 Lite and Heavy lanes</li> <li>Original sources in AirlineOps:</li> <li><code>docs/governance/GovZero/charter.md</code></li> <li><code>docs/governance/GovZero/adr-lifecycle.md</code></li> <li><code>docs/governance/GovZero/releases/README.md</code></li> <li><code>docs/governance/gzkit/RFC-GZKIT-FOUNDATION.md</code></li> </ul>"},{"location":"user/reference/lineage/","title":"Lineage","text":"<p>gzkit descends from three lineages, each contributing essential DNA.</p> <p>But lineage is not destiny. gzkit is opinionated\u2014it takes strong positions and makes choices so you don't have to argue about them. Like Django, Rails, and other opinionated tools, it trades flexibility for focus.</p>"},{"location":"user/reference/lineage/#github-spec-kit","title":"GitHub spec-kit","text":"<p>Source: github/spec-kit</p> <p>spec-kit provides the phase model:</p> <pre><code>constitute \u2192 specify \u2192 plan \u2192 implement \u2192 analyze\n</code></pre> Phase spec-kit gzkit Constitute Define product principles Define canon/constitutions Specify Write specifications Create briefs with acceptance criteria Plan Track implementation Manage ADRs and linkage Implement Build features Verify gates (TDD, Docs, BDD) Analyze Review outcomes Audit and human attestation <p>What gzkit inherits: - Phase sequencing as cognitive scaffold - Specifications as first-class artifacts - The idea that governance can be executable</p> <p>What gzkit extends: - Explicit agent/human authority boundaries - Five Gates model for verification - Lite/Heavy lane doctrine</p>"},{"location":"user/reference/lineage/#govzero-airlineops","title":"GovZero (AirlineOps)","text":"<p>Source: Internal framework evolved through AirlineOps development</p> <p>GovZero emerged from ~100 work items of iterative learning. It codified patterns that prevented drift and preserved intent across extended AI-assisted development.</p>"},{"location":"user/reference/lineage/#the-evolution-of-zero","title":"The Evolution of \"Zero\"","text":"<p>The name has meant different things at different stages:</p> Era Meaning Early \"Zero governance overhead\"\u2014resistance to ceremony bloat Middle \"Zero drift\"\u2014intent preservation across sessions Now \"Index zero\"\u2014the human is first in the value chain, final in authority <p>The Zero is not absence. It is primacy. The human is <code>array[0]</code>\u2014everything else indexes from there.</p>"},{"location":"user/reference/lineage/#key-lessons-from-govzero","title":"Key lessons from GovZero","text":"<ol> <li> <p>ADR-0.1.9 anti-pattern: A single minor version accumulated too many work items. SemVer should map to governance assertions, not just code changes.</p> </li> <li> <p>Gate 3-5 linkage: Documentation IS the proof. User-facing docs demonstrate operational workflows; running those workflows IS the attestation.</p> </li> <li> <p>Lanes prevent ceremony bloat: Not everything needs five gates. Lite lane (1, 2) for internal; Heavy lane (1-5) for external contracts.</p> </li> <li> <p>Human attestation cannot be automated: The whole point is human observation. Gate 5 is the covenant's seal.</p> </li> <li> <p>Q&amp;A as forcing function: Without mandatory questioning, humans drift to rubber-stamp. The agent becomes the de facto authority. The covenant fails silently.</p> </li> </ol>"},{"location":"user/reference/lineage/#the-two-disciplines","title":"The Two Disciplines","text":"<p>After ~100 work items of agent-assisted development, two practices emerged as non-negotiable:</p> Discipline Why it matters Read everything Agents produce volume. Skimming is abdication. The agent cannot drift from intent if you notice the drift. Insist on Q&amp;A At every critical juncture\u2014design, implementation, evaluation\u2014stop and question. The agent will answer but won't ask unprompted. <p>These are not tool features. They are human behaviors. The gates are scaffolding; these two practices are the discipline that makes the covenant real.</p> <p>Without them, governance becomes theater: gates pass, attestations record, but the human never actually verified anything.</p>"},{"location":"user/reference/lineage/#the-honest-tradeoff","title":"The Honest Tradeoff","text":"<p>This is slower than multi-agent orchestration. That's the point.</p> <p>Some people can YOLO through agentic workflows\u2014let agents spawn agents, approve PRs in batches, ship at machine speed. If that works for you, GovZero is not your framework.</p> <p>But the bet is this: more people need the sanity of this pace than can handle the chaos of full autonomy. Reading everything is a pain in the ass. Q&amp;A at every juncture is friction. That friction is the feature.</p> <p>The speed of agent orchestration comes at a cost: you stop being the architect of your own system. GovZero trades velocity for comprehension. gzkit exists to help you keep that bearing.</p> <p>What gzkit inherits: - Five Gates model - Lane doctrine (Lite/Heavy) - Attestation vocabulary (Completed, Completed\u2014Partial, Dropped) - Charter as sole authority for gate definitions - Q&amp;A as mandatory design imperative</p> <p>What gzkit generalizes: - Removes AirlineOps-specific paths and conventions - Makes gates configurable per project - Adds CLI tooling for verification - Codifies the Zero Doctrine explicitly</p>"},{"location":"user/reference/lineage/#claude-code-conventions","title":"Claude Code Conventions","text":"<p>Source: CLAUDE.md patterns from Claude Code projects</p> <p>Claude Code projects use CLAUDE.md as an agent contract\u2014a document that provides constraints, conventions, and context for AI-assisted development.</p> <p>Patterns that work:</p> Pattern Why it works Explicit constraints \"NEVER use pytest\" is a hard boundary; \"prefer unittest\" drifts Declarative intent \"Ensure determinism\" lets agent reason about goals Constraint-forward rules NEVER/ALWAYS beat SHOULD/CONSIDER Immutable reference docs Canon prevents drift across sessions Role clarity Agent vs. human authority is explicit <p>What gzkit inherits: - Constraint-forward design philosophy - The three concerns model (specification, methodology, governance) - Understanding that agents need cognitive scaffolding</p>"},{"location":"user/reference/lineage/#the-synthesis","title":"The Synthesis","text":"<p>gzkit combines these lineages:</p> <pre><code>spec-kit phases + GovZero gates + CLAUDE.md constraints + Q&amp;A imperative\n= Development Covenant\n</code></pre> <p>The result is: - Specification that agents can ground against - Methodology that provides structure without bureaucracy - Governance that reserves judgment for humans - Q&amp;A that forces engagement and resists passive approval</p> <p>This is not governance in the compliance sense. It is cognitive infrastructure that actively resists your replacement\u2014a protocol that preserves human intent across agent context boundaries, gives agents constraints to reason against, creates verification loops both parties trust, and reserves final judgment for humans.</p>"},{"location":"user/reference/lineage/#the-opinionated-stance","title":"The Opinionated Stance","text":"<p>gzkit is deliberately opinionated:</p> Choice Alternative rejected Mandatory Q&amp;A Optional questioning that gets skipped Lite as default Heavy ceremony for everything Human attestation is final Automated approval workflows Adversarial engagement Polite compliance theater Ceremony is debt Gates as bureaucratic checkboxes <p>These opinions exist because humans are lazy and agents are eager. Left unchecked, the agent will happily do all the thinking. gzkit exists to prevent that failure mode.</p> <p>Disagree? Fork it.</p>"},{"location":"user/reference/lineage/#references","title":"References","text":"<ul> <li>GitHub spec-kit</li> <li>Charter \u2014 The gzkit covenant</li> </ul>"}]}